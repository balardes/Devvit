var Zk=Object.create;var Om=Object.defineProperty;var Yk=Object.getOwnPropertyDescriptor;var Qk=Object.getOwnPropertyNames;var eP=Object.getPrototypeOf,tP=Object.prototype.hasOwnProperty;var h=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var rP=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Qk(e))!tP.call(r,s)&&s!==t&&Om(r,s,{get:()=>e[s],enumerable:!(i=Yk(e,s))||i.enumerable});return r};var Rr=(r,e,t)=>(t=r!=null?Zk(eP(r)):{},rP(e||!r||!r.__esModule?Om(t,"default",{value:r,enumerable:!0}):t,r));var kl=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var n=(r,e,t)=>(kl(r,e,"read from private field"),t?t.call(r):e.get(r)),l=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},d=(r,e,t,i)=>(kl(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t);var b=(r,e,t)=>(kl(r,e,"access private method"),t);var oe=h((bO,Fm)=>{Fm.exports=function(r){try{return!!r()}catch{return!0}}});var fa=h((kO,Mm)=>{var iP=oe();Mm.exports=!iP(function(){var r=function(){}.bind();return typeof r!="function"||r.hasOwnProperty("prototype")})});var $=h((PO,Lm)=>{var Um=fa(),Bm=Function.prototype,Pl=Bm.call,nP=Um&&Bm.bind.bind(Pl,Pl);Lm.exports=Um?nP:function(r){return function(){return Pl.apply(r,arguments)}}});var _m=h((SO,Dm)=>{var sP=Math.ceil,oP=Math.floor;Dm.exports=Math.trunc||function(e){var t=+e;return(t>0?oP:sP)(t)}});var ga=h((CO,Nm)=>{var aP=_m();Nm.exports=function(r){var e=+r;return e!==e||e===0?0:aP(e)}});var ce=h((IO,qm)=>{var ha=function(r){return r&&r.Math==Math&&r};qm.exports=ha(typeof globalThis=="object"&&globalThis)||ha(typeof window=="object"&&window)||ha(typeof self=="object"&&self)||ha(typeof global=="object"&&global)||function(){return this}()||Function("return this")()});var Or=h((wO,Hm)=>{Hm.exports=!1});var va=h((AO,Wm)=>{var jm=ce(),dP=Object.defineProperty;Wm.exports=function(r,e){try{dP(jm,r,{value:e,configurable:!0,writable:!0})}catch{jm[r]=e}return e}});var ya=h((xO,zm)=>{var lP=ce(),uP=va(),Gm="__core-js_shared__",cP=lP[Gm]||uP(Gm,{});zm.exports=cP});var Sl=h((TO,Jm)=>{var mP=Or(),Vm=ya();(Jm.exports=function(r,e){return Vm[r]||(Vm[r]=e!==void 0?e:{})})("versions",[]).push({version:"3.27.2",mode:mP?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.2/LICENSE",source:"https://github.com/zloirock/core-js"})});var ba=h((EO,$m)=>{$m.exports=function(r){return r==null}});var ka=h((RO,Km)=>{var pP=ba(),fP=TypeError;Km.exports=function(r){if(pP(r))throw fP("Can't call method on "+r);return r}});var xn=h((OO,Xm)=>{var gP=ka(),hP=Object;Xm.exports=function(r){return hP(gP(r))}});var Ce=h((FO,Zm)=>{var vP=$(),yP=xn(),bP=vP({}.hasOwnProperty);Zm.exports=Object.hasOwn||function(e,t){return bP(yP(e),t)}});var Cl=h((MO,Ym)=>{var kP=$(),PP=0,SP=Math.random(),CP=kP(1 .toString);Ym.exports=function(r){return"Symbol("+(r===void 0?"":r)+")_"+CP(++PP+SP,36)}});var ep=h((UO,Qm)=>{Qm.exports=typeof navigator<"u"&&String(navigator.userAgent)||""});var ap=h((BO,op)=>{var sp=ce(),Il=ep(),tp=sp.process,rp=sp.Deno,ip=tp&&tp.versions||rp&&rp.version,np=ip&&ip.v8,He,Pa;np&&(He=np.split("."),Pa=He[0]>0&&He[0]<4?1:+(He[0]+He[1]));!Pa&&Il&&(He=Il.match(/Edge\/(\d+)/),(!He||He[1]>=74)&&(He=Il.match(/Chrome\/(\d+)/),He&&(Pa=+He[1])));op.exports=Pa});var wl=h((LO,lp)=>{var dp=ap(),IP=oe();lp.exports=!!Object.getOwnPropertySymbols&&!IP(function(){var r=Symbol();return!String(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&dp&&dp<41})});var Al=h((DO,up)=>{var wP=wl();up.exports=wP&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var Ie=h((_O,mp)=>{var AP=ce(),xP=Sl(),cp=Ce(),TP=Cl(),EP=wl(),RP=Al(),Fr=AP.Symbol,xl=xP("wks"),OP=RP?Fr.for||Fr:Fr&&Fr.withoutSetter||TP;mp.exports=function(r){return cp(xl,r)||(xl[r]=EP&&cp(Fr,r)?Fr[r]:OP("Symbol."+r)),xl[r]}});var gp=h((NO,fp)=>{var FP=Ie(),MP=FP("toStringTag"),pp={};pp[MP]="z";fp.exports=String(pp)==="[object z]"});var El=h((qO,hp)=>{var Tl=typeof document=="object"&&document.all,UP=typeof Tl>"u"&&Tl!==void 0;hp.exports={all:Tl,IS_HTMLDDA:UP}});var K=h((HO,yp)=>{var vp=El(),BP=vp.all;yp.exports=vp.IS_HTMLDDA?function(r){return typeof r=="function"||r===BP}:function(r){return typeof r=="function"}});var Sa=h((jO,kp)=>{var bp=$(),LP=bp({}.toString),DP=bp("".slice);kp.exports=function(r){return DP(LP(r),8,-1)}});var Tn=h((WO,Pp)=>{var _P=gp(),NP=K(),Ca=Sa(),qP=Ie(),HP=qP("toStringTag"),jP=Object,WP=Ca(function(){return arguments}())=="Arguments",GP=function(r,e){try{return r[e]}catch{}};Pp.exports=_P?Ca:function(r){var e,t,i;return r===void 0?"Undefined":r===null?"Null":typeof(t=GP(e=jP(r),HP))=="string"?t:WP?Ca(e):(i=Ca(e))=="Object"&&NP(e.callee)?"Arguments":i}});var En=h((GO,Sp)=>{var zP=Tn(),VP=String;Sp.exports=function(r){if(zP(r)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return VP(r)}});var Ol=h((zO,wp)=>{var Rl=$(),JP=ga(),$P=En(),KP=ka(),XP=Rl("".charAt),Cp=Rl("".charCodeAt),ZP=Rl("".slice),Ip=function(r){return function(e,t){var i=$P(KP(e)),s=JP(t),o=i.length,a,c;return s<0||s>=o?r?"":void 0:(a=Cp(i,s),a<55296||a>56319||s+1===o||(c=Cp(i,s+1))<56320||c>57343?r?XP(i,s):a:r?ZP(i,s,s+2):(a-55296<<10)+(c-56320)+65536)}};wp.exports={codeAt:Ip(!1),charAt:Ip(!0)}});var Tp=h((VO,xp)=>{var YP=ce(),QP=K(),Ap=YP.WeakMap;xp.exports=QP(Ap)&&/native code/.test(String(Ap))});var vt=h((JO,Op)=>{var Ep=K(),Rp=El(),eS=Rp.all;Op.exports=Rp.IS_HTMLDDA?function(r){return typeof r=="object"?r!==null:Ep(r)||r===eS}:function(r){return typeof r=="object"?r!==null:Ep(r)}});var me=h(($O,Fp)=>{var tS=oe();Fp.exports=!tS(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})});var Ml=h((KO,Up)=>{var rS=ce(),Mp=vt(),Fl=rS.document,iS=Mp(Fl)&&Mp(Fl.createElement);Up.exports=function(r){return iS?Fl.createElement(r):{}}});var Ul=h((XO,Bp)=>{var nS=me(),sS=oe(),oS=Ml();Bp.exports=!nS&&!sS(function(){return Object.defineProperty(oS("div"),"a",{get:function(){return 7}}).a!=7})});var Bl=h((ZO,Lp)=>{var aS=me(),dS=oe();Lp.exports=aS&&dS(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})});var Ke=h((YO,Dp)=>{var lS=vt(),uS=String,cS=TypeError;Dp.exports=function(r){if(lS(r))return r;throw cS(uS(r)+" is not an object")}});var je=h((QO,_p)=>{var mS=fa(),Ia=Function.prototype.call;_p.exports=mS?Ia.bind(Ia):function(){return Ia.apply(Ia,arguments)}});var Rn=h((eF,Np)=>{var Ll=ce(),pS=K(),fS=function(r){return pS(r)?r:void 0};Np.exports=function(r,e){return arguments.length<2?fS(Ll[r]):Ll[r]&&Ll[r][e]}});var Dl=h((tF,qp)=>{var gS=$();qp.exports=gS({}.isPrototypeOf)});var _l=h((rF,Hp)=>{var hS=Rn(),vS=K(),yS=Dl(),bS=Al(),kS=Object;Hp.exports=bS?function(r){return typeof r=="symbol"}:function(r){var e=hS("Symbol");return vS(e)&&yS(e.prototype,kS(r))}});var Nl=h((iF,jp)=>{var PS=String;jp.exports=function(r){try{return PS(r)}catch{return"Object"}}});var wa=h((nF,Wp)=>{var SS=K(),CS=Nl(),IS=TypeError;Wp.exports=function(r){if(SS(r))return r;throw IS(CS(r)+" is not a function")}});var Aa=h((sF,Gp)=>{var wS=wa(),AS=ba();Gp.exports=function(r,e){var t=r[e];return AS(t)?void 0:wS(t)}});var Vp=h((oF,zp)=>{var ql=je(),Hl=K(),jl=vt(),xS=TypeError;zp.exports=function(r,e){var t,i;if(e==="string"&&Hl(t=r.toString)&&!jl(i=ql(t,r))||Hl(t=r.valueOf)&&!jl(i=ql(t,r))||e!=="string"&&Hl(t=r.toString)&&!jl(i=ql(t,r)))return i;throw xS("Can't convert object to primitive value")}});var Xp=h((aF,Kp)=>{var TS=je(),Jp=vt(),$p=_l(),ES=Aa(),RS=Vp(),OS=Ie(),FS=TypeError,MS=OS("toPrimitive");Kp.exports=function(r,e){if(!Jp(r)||$p(r))return r;var t=ES(r,MS),i;if(t){if(e===void 0&&(e="default"),i=TS(t,r,e),!Jp(i)||$p(i))return i;throw FS("Can't convert object to primitive value")}return e===void 0&&(e="number"),RS(r,e)}});var xa=h((dF,Zp)=>{var US=Xp(),BS=_l();Zp.exports=function(r){var e=US(r,"string");return BS(e)?e:e+""}});var Xe=h(Qp=>{var LS=me(),DS=Ul(),_S=Bl(),Ta=Ke(),Yp=xa(),NS=TypeError,Wl=Object.defineProperty,qS=Object.getOwnPropertyDescriptor,Gl="enumerable",zl="configurable",Vl="writable";Qp.f=LS?_S?function(e,t,i){if(Ta(e),t=Yp(t),Ta(i),typeof e=="function"&&t==="prototype"&&"value"in i&&Vl in i&&!i[Vl]){var s=qS(e,t);s&&s[Vl]&&(e[t]=i.value,i={configurable:zl in i?i[zl]:s[zl],enumerable:Gl in i?i[Gl]:s[Gl],writable:!1})}return Wl(e,t,i)}:Wl:function(e,t,i){if(Ta(e),t=Yp(t),Ta(i),DS)try{return Wl(e,t,i)}catch{}if("get"in i||"set"in i)throw NS("Accessors not supported");return"value"in i&&(e[t]=i.value),e}});var Mr=h((uF,ef)=>{ef.exports=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}}});var Ea=h((cF,tf)=>{var HS=me(),jS=Xe(),WS=Mr();tf.exports=HS?function(r,e,t){return jS.f(r,e,WS(1,t))}:function(r,e,t){return r[e]=t,r}});var Ra=h((mF,nf)=>{var GS=Sl(),zS=Cl(),rf=GS("keys");nf.exports=function(r){return rf[r]||(rf[r]=zS(r))}});var Oa=h((pF,sf)=>{sf.exports={}});var Ur=h((fF,df)=>{var VS=Tp(),af=ce(),JS=vt(),$S=Ea(),Jl=Ce(),$l=ya(),KS=Ra(),XS=Oa(),of="Object already initialized",Kl=af.TypeError,ZS=af.WeakMap,Fa,On,Ma,YS=function(r){return Ma(r)?On(r):Fa(r,{})},QS=function(r){return function(e){var t;if(!JS(e)||(t=On(e)).type!==r)throw Kl("Incompatible receiver, "+r+" required");return t}};VS||$l.state?(We=$l.state||($l.state=new ZS),We.get=We.get,We.has=We.has,We.set=We.set,Fa=function(r,e){if(We.has(r))throw Kl(of);return e.facade=r,We.set(r,e),e},On=function(r){return We.get(r)||{}},Ma=function(r){return We.has(r)}):(Kt=KS("state"),XS[Kt]=!0,Fa=function(r,e){if(Jl(r,Kt))throw Kl(of);return e.facade=r,$S(r,Kt,e),e},On=function(r){return Jl(r,Kt)?r[Kt]:{}},Ma=function(r){return Jl(r,Kt)});var We,Kt;df.exports={set:Fa,get:On,has:Ma,enforce:YS,getterFor:QS}});var Xl=h(cf=>{"use strict";var lf={}.propertyIsEnumerable,uf=Object.getOwnPropertyDescriptor,eC=uf&&!lf.call({1:2},1);cf.f=eC?function(e){var t=uf(this,e);return!!t&&t.enumerable}:lf});var Yl=h((hF,mf)=>{var tC=$(),rC=oe(),iC=Sa(),Zl=Object,nC=tC("".split);mf.exports=rC(function(){return!Zl("z").propertyIsEnumerable(0)})?function(r){return iC(r)=="String"?nC(r,""):Zl(r)}:Zl});var Br=h((vF,pf)=>{var sC=Yl(),oC=ka();pf.exports=function(r){return sC(oC(r))}});var Ql=h(gf=>{var aC=me(),dC=je(),lC=Xl(),uC=Mr(),cC=Br(),mC=xa(),pC=Ce(),fC=Ul(),ff=Object.getOwnPropertyDescriptor;gf.f=aC?ff:function(e,t){if(e=cC(e),t=mC(t),fC)try{return ff(e,t)}catch{}if(pC(e,t))return uC(!dC(lC.f,e,t),e[t])}});var ru=h((bF,vf)=>{var eu=me(),gC=Ce(),hf=Function.prototype,hC=eu&&Object.getOwnPropertyDescriptor,tu=gC(hf,"name"),vC=tu&&function(){}.name==="something",yC=tu&&(!eu||eu&&hC(hf,"name").configurable);vf.exports={EXISTS:tu,PROPER:vC,CONFIGURABLE:yC}});var nu=h((kF,yf)=>{var bC=$(),kC=K(),iu=ya(),PC=bC(Function.toString);kC(iu.inspectSource)||(iu.inspectSource=function(r){return PC(r)});yf.exports=iu.inspectSource});var au=h((PF,Pf)=>{var ou=$(),SC=oe(),CC=K(),Ua=Ce(),su=me(),IC=ru().CONFIGURABLE,wC=nu(),kf=Ur(),AC=kf.enforce,xC=kf.get,bf=String,Ba=Object.defineProperty,TC=ou("".slice),EC=ou("".replace),RC=ou([].join),OC=su&&!SC(function(){return Ba(function(){},"length",{value:8}).length!==8}),FC=String(String).split("String"),MC=Pf.exports=function(r,e,t){TC(bf(e),0,7)==="Symbol("&&(e="["+EC(bf(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!Ua(r,"name")||IC&&r.name!==e)&&(su?Ba(r,"name",{value:e,configurable:!0}):r.name=e),OC&&t&&Ua(t,"arity")&&r.length!==t.arity&&Ba(r,"length",{value:t.arity});try{t&&Ua(t,"constructor")&&t.constructor?su&&Ba(r,"prototype",{writable:!1}):r.prototype&&(r.prototype=void 0)}catch{}var i=AC(r);return Ua(i,"source")||(i.source=RC(FC,typeof e=="string"?e:"")),r};Function.prototype.toString=MC(function(){return CC(this)&&xC(this).source||wC(this)},"toString")});var Xt=h((SF,Sf)=>{var UC=K(),BC=Xe(),LC=au(),DC=va();Sf.exports=function(r,e,t,i){i||(i={});var s=i.enumerable,o=i.name!==void 0?i.name:e;if(UC(t)&&LC(t,o,i),i.global)s?r[e]=t:DC(e,t);else{try{i.unsafe?r[e]&&(s=!0):delete r[e]}catch{}s?r[e]=t:BC.f(r,e,{value:t,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return r}});var du=h((CF,Cf)=>{var _C=ga(),NC=Math.max,qC=Math.min;Cf.exports=function(r,e){var t=_C(r);return t<0?NC(t+e,0):qC(t,e)}});var wf=h((IF,If)=>{var HC=ga(),jC=Math.min;If.exports=function(r){return r>0?jC(HC(r),9007199254740991):0}});var La=h((wF,Af)=>{var WC=wf();Af.exports=function(r){return WC(r.length)}});var Ef=h((AF,Tf)=>{var GC=Br(),zC=du(),VC=La(),xf=function(r){return function(e,t,i){var s=GC(e),o=VC(s),a=zC(i,o),c;if(r&&t!=t){for(;o>a;)if(c=s[a++],c!=c)return!0}else for(;o>a;a++)if((r||a in s)&&s[a]===t)return r||a||0;return!r&&-1}};Tf.exports={includes:xf(!0),indexOf:xf(!1)}});var uu=h((xF,Of)=>{var JC=$(),lu=Ce(),$C=Br(),KC=Ef().indexOf,XC=Oa(),Rf=JC([].push);Of.exports=function(r,e){var t=$C(r),i=0,s=[],o;for(o in t)!lu(XC,o)&&lu(t,o)&&Rf(s,o);for(;e.length>i;)lu(t,o=e[i++])&&(~KC(s,o)||Rf(s,o));return s}});var Da=h((TF,Ff)=>{Ff.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Uf=h(Mf=>{var ZC=uu(),YC=Da(),QC=YC.concat("length","prototype");Mf.f=Object.getOwnPropertyNames||function(e){return ZC(e,QC)}});var cu=h(Bf=>{Bf.f=Object.getOwnPropertySymbols});var Df=h((OF,Lf)=>{var eI=Rn(),tI=$(),rI=Uf(),iI=cu(),nI=Ke(),sI=tI([].concat);Lf.exports=eI("Reflect","ownKeys")||function(e){var t=rI.f(nI(e)),i=iI.f;return i?sI(t,i(e)):t}});var qf=h((FF,Nf)=>{var _f=Ce(),oI=Df(),aI=Ql(),dI=Xe();Nf.exports=function(r,e,t){for(var i=oI(e),s=dI.f,o=aI.f,a=0;a<i.length;a++){var c=i[a];!_f(r,c)&&!(t&&_f(t,c))&&s(r,c,o(e,c))}}});var jf=h((MF,Hf)=>{var lI=oe(),uI=K(),cI=/#|\.prototype\./,Fn=function(r,e){var t=pI[mI(r)];return t==gI?!0:t==fI?!1:uI(e)?lI(e):!!e},mI=Fn.normalize=function(r){return String(r).replace(cI,".").toLowerCase()},pI=Fn.data={},fI=Fn.NATIVE="N",gI=Fn.POLYFILL="P";Hf.exports=Fn});var Mn=h((UF,Wf)=>{var mu=ce(),hI=Ql().f,vI=Ea(),yI=Xt(),bI=va(),kI=qf(),PI=jf();Wf.exports=function(r,e){var t=r.target,i=r.global,s=r.stat,o,a,c,p,f,v;if(i?a=mu:s?a=mu[t]||bI(t,{}):a=(mu[t]||{}).prototype,a)for(c in e){if(f=e[c],r.dontCallGetSet?(v=hI(a,c),p=v&&v.value):p=a[c],o=PI(i?c:t+(s?".":"#")+c,r.forced),!o&&p!==void 0){if(typeof f==typeof p)continue;kI(f,p)}(r.sham||p&&p.sham)&&vI(f,"sham",!0),yI(a,c,f,r)}}});var pu=h((BF,Gf)=>{var SI=uu(),CI=Da();Gf.exports=Object.keys||function(e){return SI(e,CI)}});var Vf=h(zf=>{var II=me(),wI=Bl(),AI=Xe(),xI=Ke(),TI=Br(),EI=pu();zf.f=II&&!wI?Object.defineProperties:function(e,t){xI(e);for(var i=TI(t),s=EI(t),o=s.length,a=0,c;o>a;)AI.f(e,c=s[a++],i[c]);return e}});var $f=h((DF,Jf)=>{var RI=Rn();Jf.exports=RI("document","documentElement")});var Un=h((_F,tg)=>{var OI=Ke(),FI=Vf(),Kf=Da(),MI=Oa(),UI=$f(),BI=Ml(),LI=Ra(),Xf=">",Zf="<",gu="prototype",hu="script",Qf=LI("IE_PROTO"),fu=function(){},eg=function(r){return Zf+hu+Xf+r+Zf+"/"+hu+Xf},Yf=function(r){r.write(eg("")),r.close();var e=r.parentWindow.Object;return r=null,e},DI=function(){var r=BI("iframe"),e="java"+hu+":",t;return r.style.display="none",UI.appendChild(r),r.src=String(e),t=r.contentWindow.document,t.open(),t.write(eg("document.F=Object")),t.close(),t.F},_a,Na=function(){try{_a=new ActiveXObject("htmlfile")}catch{}Na=typeof document<"u"?document.domain&&_a?Yf(_a):DI():Yf(_a);for(var r=Kf.length;r--;)delete Na[gu][Kf[r]];return Na()};MI[Qf]=!0;tg.exports=Object.create||function(e,t){var i;return e!==null?(fu[gu]=OI(e),i=new fu,fu[gu]=null,i[Qf]=e):i=Na(),t===void 0?i:FI.f(i,t)}});var ig=h((NF,rg)=>{var _I=oe();rg.exports=!_I(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})});var yu=h((qF,sg)=>{var NI=Ce(),qI=K(),HI=xn(),jI=Ra(),WI=ig(),ng=jI("IE_PROTO"),vu=Object,GI=vu.prototype;sg.exports=WI?vu.getPrototypeOf:function(r){var e=HI(r);if(NI(e,ng))return e[ng];var t=e.constructor;return qI(t)&&e instanceof t?t.prototype:e instanceof vu?GI:null}});var Su=h((HF,dg)=>{"use strict";var zI=oe(),VI=K(),JI=vt(),$I=Un(),og=yu(),KI=Xt(),XI=Ie(),ZI=Or(),Pu=XI("iterator"),ag=!1,it,bu,ku;[].keys&&(ku=[].keys(),"next"in ku?(bu=og(og(ku)),bu!==Object.prototype&&(it=bu)):ag=!0);var YI=!JI(it)||zI(function(){var r={};return it[Pu].call(r)!==r});YI?it={}:ZI&&(it=$I(it));VI(it[Pu])||KI(it,Pu,function(){return this});dg.exports={IteratorPrototype:it,BUGGY_SAFARI_ITERATORS:ag}});var Bn=h((jF,ug)=>{var QI=Xe().f,ew=Ce(),tw=Ie(),lg=tw("toStringTag");ug.exports=function(r,e,t){r&&!t&&(r=r.prototype),r&&!ew(r,lg)&&QI(r,lg,{configurable:!0,value:e})}});var Lr=h((WF,cg)=>{cg.exports={}});var Cu=h((GF,mg)=>{"use strict";var rw=Su().IteratorPrototype,iw=Un(),nw=Mr(),sw=Bn(),ow=Lr(),aw=function(){return this};mg.exports=function(r,e,t,i){var s=e+" Iterator";return r.prototype=iw(rw,{next:nw(+!i,t)}),sw(r,s,!1,!0),ow[s]=aw,r}});var fg=h((zF,pg)=>{var dw=K(),lw=String,uw=TypeError;pg.exports=function(r){if(typeof r=="object"||dw(r))return r;throw uw("Can't set "+lw(r)+" as a prototype")}});var hg=h((VF,gg)=>{var cw=$(),mw=Ke(),pw=fg();gg.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r=!1,e={},t;try{t=cw(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),t(e,[]),r=e instanceof Array}catch{}return function(s,o){return mw(s),pw(o),r?t(s,o):s.__proto__=o,s}}():void 0)});var wu=h((JF,Ag)=>{"use strict";var fw=Mn(),gw=je(),qa=Or(),Ig=ru(),hw=K(),vw=Cu(),vg=yu(),yg=hg(),yw=Bn(),bw=Ea(),Iu=Xt(),kw=Ie(),bg=Lr(),wg=Su(),Pw=Ig.PROPER,Sw=Ig.CONFIGURABLE,kg=wg.IteratorPrototype,Ha=wg.BUGGY_SAFARI_ITERATORS,Ln=kw("iterator"),Pg="keys",Dn="values",Sg="entries",Cg=function(){return this};Ag.exports=function(r,e,t,i,s,o,a){vw(t,e,i);var c=function(U){if(U===s&&y)return y;if(!Ha&&U in v)return v[U];switch(U){case Pg:return function(){return new t(this,U)};case Dn:return function(){return new t(this,U)};case Sg:return function(){return new t(this,U)}}return function(){return new t(this)}},p=e+" Iterator",f=!1,v=r.prototype,m=v[Ln]||v["@@iterator"]||s&&v[s],y=!Ha&&m||c(s),k=e=="Array"&&v.entries||m,C,I,A;if(k&&(C=vg(k.call(new r)),C!==Object.prototype&&C.next&&(!qa&&vg(C)!==kg&&(yg?yg(C,kg):hw(C[Ln])||Iu(C,Ln,Cg)),yw(C,p,!0,!0),qa&&(bg[p]=Cg))),Pw&&s==Dn&&m&&m.name!==Dn&&(!qa&&Sw?bw(v,"name",Dn):(f=!0,y=function(){return gw(m,this)})),s)if(I={values:c(Dn),keys:o?y:c(Pg),entries:c(Sg)},a)for(A in I)(Ha||f||!(A in v))&&Iu(v,A,I[A]);else fw({target:e,proto:!0,forced:Ha||f},I);return(!qa||a)&&v[Ln]!==y&&Iu(v,Ln,y,{name:s}),bg[e]=y,I}});var Au=h(($F,xg)=>{xg.exports=function(r,e){return{value:r,done:e}}});var Og=h(()=>{"use strict";var Cw=Ol().charAt,Iw=En(),Eg=Ur(),ww=wu(),Tg=Au(),Rg="String Iterator",Aw=Eg.set,xw=Eg.getterFor(Rg);ww(String,"String",function(r){Aw(this,{type:Rg,string:Iw(r),index:0})},function(){var e=xw(this),t=e.string,i=e.index,s;return i>=t.length?Tg(void 0,!0):(s=Cw(t,i),e.index+=s.length,Tg(s,!1))})});var xu=h((ZF,Fg)=>{var Tw=oe(),Ew=Ie(),Rw=Or(),Ow=Ew("iterator");Fg.exports=!Tw(function(){var r=new URL("b?a=1&b=2&c=3","http://a"),e=r.searchParams,t="";return r.pathname="c%20d",e.forEach(function(i,s){e.delete("b"),t+=s+i}),Rw&&!r.toJSON||!e.sort||r.href!=="http://a/c%20d?a=1&c=3"||e.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!e[Ow]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||t!=="a1c3"||new URL("http://x",void 0).host!=="x"})});var Ug=h((YF,Mg)=>{var Fw=Sa(),Mw=$();Mg.exports=function(r){if(Fw(r)==="Function")return Mw(r)}});var ja=h((QF,Lg)=>{var Bg=Ug(),Uw=wa(),Bw=fa(),Lw=Bg(Bg.bind);Lg.exports=function(r,e){return Uw(r),e===void 0?r:Bw?Lw(r,e):function(){return r.apply(e,arguments)}}});var Ng=h((eM,_g)=>{var Dg=au(),Dw=Xe();_g.exports=function(r,e,t){return t.get&&Dg(t.get,e,{getter:!0}),t.set&&Dg(t.set,e,{setter:!0}),Dw.f(r,e,t)}});var Tu=h((tM,qg)=>{var _w=Dl(),Nw=TypeError;qg.exports=function(r,e){if(_w(e,r))return r;throw Nw("Incorrect invocation")}});var Gg=h((rM,Wg)=>{"use strict";var Hg=me(),qw=$(),Hw=je(),jw=oe(),Eu=pu(),Ww=cu(),Gw=Xl(),zw=xn(),Vw=Yl(),Dr=Object.assign,jg=Object.defineProperty,Jw=qw([].concat);Wg.exports=!Dr||jw(function(){if(Hg&&Dr({b:1},Dr(jg({},"a",{enumerable:!0,get:function(){jg(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var r={},e={},t=Symbol(),i="abcdefghijklmnopqrst";return r[t]=7,i.split("").forEach(function(s){e[s]=s}),Dr({},r)[t]!=7||Eu(Dr({},e)).join("")!=i})?function(e,t){for(var i=zw(e),s=arguments.length,o=1,a=Ww.f,c=Gw.f;s>o;)for(var p=Vw(arguments[o++]),f=a?Jw(Eu(p),a(p)):Eu(p),v=f.length,m=0,y;v>m;)y=f[m++],(!Hg||Hw(c,p,y))&&(i[y]=p[y]);return i}:Dr});var Jg=h((iM,Vg)=>{var $w=je(),zg=Ke(),Kw=Aa();Vg.exports=function(r,e,t){var i,s;zg(r);try{if(i=Kw(r,"return"),!i){if(e==="throw")throw t;return t}i=$w(i,r)}catch(o){s=!0,i=o}if(e==="throw")throw t;if(s)throw i;return zg(i),t}});var Kg=h((nM,$g)=>{var Xw=Ke(),Zw=Jg();$g.exports=function(r,e,t,i){try{return i?e(Xw(t)[0],t[1]):e(t)}catch(s){Zw(r,"throw",s)}}});var Zg=h((sM,Xg)=>{var Yw=Ie(),Qw=Lr(),eA=Yw("iterator"),tA=Array.prototype;Xg.exports=function(r){return r!==void 0&&(Qw.Array===r||tA[eA]===r)}});var ih=h((oM,rh)=>{var rA=$(),iA=oe(),Yg=K(),nA=Tn(),sA=Rn(),oA=nu(),Qg=function(){},aA=[],eh=sA("Reflect","construct"),Ru=/^\s*(?:class|function)\b/,dA=rA(Ru.exec),lA=!Ru.exec(Qg),_n=function(e){if(!Yg(e))return!1;try{return eh(Qg,aA,e),!0}catch{return!1}},th=function(e){if(!Yg(e))return!1;switch(nA(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return lA||!!dA(Ru,oA(e))}catch{return!0}};th.sham=!0;rh.exports=!eh||iA(function(){var r;return _n(_n.call)||!_n(Object)||!_n(function(){r=!0})||r})?th:_n});var Ou=h((aM,nh)=>{"use strict";var uA=xa(),cA=Xe(),mA=Mr();nh.exports=function(r,e,t){var i=uA(e);i in r?cA.f(r,i,mA(0,t)):r[i]=t}});var Wa=h((dM,oh)=>{var pA=Tn(),sh=Aa(),fA=ba(),gA=Lr(),hA=Ie(),vA=hA("iterator");oh.exports=function(r){if(!fA(r))return sh(r,vA)||sh(r,"@@iterator")||gA[pA(r)]}});var Fu=h((lM,ah)=>{var yA=je(),bA=wa(),kA=Ke(),PA=Nl(),SA=Wa(),CA=TypeError;ah.exports=function(r,e){var t=arguments.length<2?SA(r):e;if(bA(t))return kA(yA(t,r));throw CA(PA(r)+" is not iterable")}});var ch=h((uM,uh)=>{"use strict";var IA=ja(),wA=je(),AA=xn(),xA=Kg(),TA=Zg(),EA=ih(),RA=La(),dh=Ou(),OA=Fu(),FA=Wa(),lh=Array;uh.exports=function(e){var t=AA(e),i=EA(this),s=arguments.length,o=s>1?arguments[1]:void 0,a=o!==void 0;a&&(o=IA(o,s>2?arguments[2]:void 0));var c=FA(t),p=0,f,v,m,y,k,C;if(c&&!(this===lh&&TA(c)))for(y=OA(t,c),k=y.next,v=i?new this:[];!(m=wA(k,y)).done;p++)C=a?xA(y,o,[m.value,p],!0):m.value,dh(v,p,C);else for(f=RA(t),v=i?new this(f):lh(f);f>p;p++)C=a?o(t[p],p):t[p],dh(v,p,C);return v.length=p,v}});var Mu=h((cM,ph)=>{var mh=du(),MA=La(),UA=Ou(),BA=Array,LA=Math.max;ph.exports=function(r,e,t){for(var i=MA(r),s=mh(e,i),o=mh(t===void 0?i:t,i),a=BA(LA(o-s,0)),c=0;s<o;s++,c++)UA(a,c,r[s]);return a.length=c,a}});var Sh=h((mM,Ph)=>{var Zt=$(),Uu=2147483647,Nn=36,yh=1,Du=26,DA=38,_A=700,NA=72,qA=128,HA="-",jA=/[^\0-\u007E]/,bh=/[.\u3002\uFF0E\uFF61]/g,fh="Overflow: input needs wider integers to process",Bu=Nn-yh,gh=RangeError,WA=Zt(bh.exec),_r=Math.floor,Lu=String.fromCharCode,hh=Zt("".charCodeAt),kh=Zt([].join),yt=Zt([].push),GA=Zt("".replace),zA=Zt("".split),VA=Zt("".toLowerCase),JA=function(r){for(var e=[],t=0,i=r.length;t<i;){var s=hh(r,t++);if(s>=55296&&s<=56319&&t<i){var o=hh(r,t++);(o&64512)==56320?yt(e,((s&1023)<<10)+(o&1023)+65536):(yt(e,s),t--)}else yt(e,s)}return e},vh=function(r){return r+22+75*(r<26)},$A=function(r,e,t){var i=0;for(r=t?_r(r/_A):r>>1,r+=_r(r/e);r>Bu*Du>>1;)r=_r(r/Bu),i+=Nn;return _r(i+(Bu+1)*r/(r+DA))},KA=function(r){var e=[];r=JA(r);var t=r.length,i=qA,s=0,o=NA,a,c;for(a=0;a<r.length;a++)c=r[a],c<128&&yt(e,Lu(c));var p=e.length,f=p;for(p&&yt(e,HA);f<t;){var v=Uu;for(a=0;a<r.length;a++)c=r[a],c>=i&&c<v&&(v=c);var m=f+1;if(v-i>_r((Uu-s)/m))throw gh(fh);for(s+=(v-i)*m,i=v,a=0;a<r.length;a++){if(c=r[a],c<i&&++s>Uu)throw gh(fh);if(c==i){for(var y=s,k=Nn;;){var C=k<=o?yh:k>=o+Du?Du:k-o;if(y<C)break;var I=y-C,A=Nn-C;yt(e,Lu(vh(C+I%A))),y=_r(I/A),k+=Nn}yt(e,Lu(vh(y))),o=$A(s,m,f==p),s=0,f++}}s++,i++}return kh(e,"")};Ph.exports=function(r){var e=[],t=zA(GA(VA(r),bh,"."),"."),i,s;for(i=0;i<t.length;i++)s=t[i],yt(e,WA(jA,s)?"xn--"+KA(s):s);return kh(e,".")}});var _u=h((pM,Ch)=>{var XA=TypeError;Ch.exports=function(r,e){if(r<e)throw XA("Not enough arguments");return r}});var wh=h((fM,Ih)=>{var ZA=Ie(),YA=Un(),QA=Xe().f,Nu=ZA("unscopables"),qu=Array.prototype;qu[Nu]==null&&QA(qu,Nu,{configurable:!0,value:YA(null)});Ih.exports=function(r){qu[Nu][r]=!0}});var Oh=h((gM,Rh)=>{"use strict";var ex=Br(),Hu=wh(),Ah=Lr(),Th=Ur(),tx=Xe().f,rx=wu(),Ga=Au(),ix=Or(),nx=me(),Eh="Array Iterator",sx=Th.set,ox=Th.getterFor(Eh);Rh.exports=rx(Array,"Array",function(r,e){sx(this,{type:Eh,target:ex(r),index:0,kind:e})},function(){var r=ox(this),e=r.target,t=r.kind,i=r.index++;return!e||i>=e.length?(r.target=void 0,Ga(void 0,!0)):t=="keys"?Ga(i,!1):t=="values"?Ga(e[i],!1):Ga([i,e[i]],!1)},"values");var xh=Ah.Arguments=Ah.Array;Hu("keys");Hu("values");Hu("entries");if(!ix&&nx&&xh.name!=="values")try{tx(xh,"name",{value:"values"})}catch{}});var Mh=h((hM,Fh)=>{var ax=Xt();Fh.exports=function(r,e,t){for(var i in e)ax(r,i,e[i],t);return r}});var Lh=h((vM,Bh)=>{var Uh=Mu(),dx=Math.floor,ju=function(r,e){var t=r.length,i=dx(t/2);return t<8?lx(r,e):ux(r,ju(Uh(r,0,i),e),ju(Uh(r,i),e),e)},lx=function(r,e){for(var t=r.length,i=1,s,o;i<t;){for(o=i,s=r[i];o&&e(r[o-1],s)>0;)r[o]=r[--o];o!==i++&&(r[o]=s)}return r},ux=function(r,e,t,i){for(var s=e.length,o=t.length,a=0,c=0;a<s||c<o;)r[a+c]=a<s&&c<o?i(e[a],t[c])<=0?e[a++]:t[c++]:a<s?e[a++]:t[c++];return r};Bh.exports=ju});var Yu=h((yM,rv)=>{"use strict";Oh();var Ju=Mn(),qr=ce(),za=je(),Ze=$(),cx=me(),$h=xu(),Kh=Xt(),mx=Mh(),px=Bn(),fx=Cu(),Xu=Ur(),Xh=Tu(),Wu=K(),gx=Ce(),hx=ja(),vx=Tn(),yx=Ke(),Zh=vt(),pe=En(),bx=Un(),Dh=Mr(),$u=Fu(),kx=Wa(),Nr=_u(),Px=Ie(),Sx=Lh(),Cx=Px("iterator"),jn="URLSearchParams",Yh=jn+"Iterator",Qh=Xu.set,Ge=Xu.getterFor(jn),Ix=Xu.getterFor(Yh),wx=Object.getOwnPropertyDescriptor,Zu=function(r){if(!cx)return qr[r];var e=wx(qr,r);return e&&e.value},_h=Zu("fetch"),Ja=Zu("Request"),qn=Zu("Headers"),Gu=Ja&&Ja.prototype,Nh=qn&&qn.prototype,Ax=qr.RegExp,xx=qr.TypeError,ev=qr.decodeURIComponent,Tx=qr.encodeURIComponent,Ex=Ze("".charAt),qh=Ze([].join),Yt=Ze([].push),Ku=Ze("".replace),Rx=Ze([].shift),Hh=Ze([].splice),jh=Ze("".split),Ox=Ze("".slice),Fx=/\+/g,Wh=Array(4),Mx=function(r){return Wh[r-1]||(Wh[r-1]=Ax("((?:%[\\da-f]{2}){"+r+"})","gi"))},Ux=function(r){try{return ev(r)}catch{return r}},Gh=function(r){var e=Ku(r,Fx," "),t=4;try{return ev(e)}catch{for(;t;)e=Ku(e,Mx(t--),Ux);return e}},Bx=/[!'()~]|%20/g,Lx={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Dx=function(r){return Lx[r]},zh=function(r){return Ku(Tx(r),Bx,Dx)},zu=fx(function(e,t){Qh(this,{type:Yh,iterator:$u(Ge(e).entries),kind:t})},"Iterator",function(){var e=Ix(this),t=e.kind,i=e.iterator.next(),s=i.value;return i.done||(i.value=t==="keys"?s.key:t==="values"?s.value:[s.key,s.value]),i},!0),tv=function(r){this.entries=[],this.url=null,r!==void 0&&(Zh(r)?this.parseObject(r):this.parseQuery(typeof r=="string"?Ex(r,0)==="?"?Ox(r,1):r:pe(r)))};tv.prototype={type:jn,bindURL:function(r){this.url=r,this.update()},parseObject:function(r){var e=kx(r),t,i,s,o,a,c,p;if(e)for(t=$u(r,e),i=t.next;!(s=za(i,t)).done;){if(o=$u(yx(s.value)),a=o.next,(c=za(a,o)).done||(p=za(a,o)).done||!za(a,o).done)throw xx("Expected sequence with length 2");Yt(this.entries,{key:pe(c.value),value:pe(p.value)})}else for(var f in r)gx(r,f)&&Yt(this.entries,{key:f,value:pe(r[f])})},parseQuery:function(r){if(r)for(var e=jh(r,"&"),t=0,i,s;t<e.length;)i=e[t++],i.length&&(s=jh(i,"="),Yt(this.entries,{key:Gh(Rx(s)),value:Gh(qh(s,"="))}))},serialize:function(){for(var r=this.entries,e=[],t=0,i;t<r.length;)i=r[t++],Yt(e,zh(i.key)+"="+zh(i.value));return qh(e,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var $a=function(){Xh(this,Hn);var e=arguments.length>0?arguments[0]:void 0;Qh(this,new tv(e))},Hn=$a.prototype;mx(Hn,{append:function(e,t){Nr(arguments.length,2);var i=Ge(this);Yt(i.entries,{key:pe(e),value:pe(t)}),i.updateURL()},delete:function(r){Nr(arguments.length,1);for(var e=Ge(this),t=e.entries,i=pe(r),s=0;s<t.length;)t[s].key===i?Hh(t,s,1):s++;e.updateURL()},get:function(e){Nr(arguments.length,1);for(var t=Ge(this).entries,i=pe(e),s=0;s<t.length;s++)if(t[s].key===i)return t[s].value;return null},getAll:function(e){Nr(arguments.length,1);for(var t=Ge(this).entries,i=pe(e),s=[],o=0;o<t.length;o++)t[o].key===i&&Yt(s,t[o].value);return s},has:function(e){Nr(arguments.length,1);for(var t=Ge(this).entries,i=pe(e),s=0;s<t.length;)if(t[s++].key===i)return!0;return!1},set:function(e,t){Nr(arguments.length,1);for(var i=Ge(this),s=i.entries,o=!1,a=pe(e),c=pe(t),p=0,f;p<s.length;p++)f=s[p],f.key===a&&(o?Hh(s,p--,1):(o=!0,f.value=c));o||Yt(s,{key:a,value:c}),i.updateURL()},sort:function(){var e=Ge(this);Sx(e.entries,function(t,i){return t.key>i.key?1:-1}),e.updateURL()},forEach:function(e){for(var t=Ge(this).entries,i=hx(e,arguments.length>1?arguments[1]:void 0),s=0,o;s<t.length;)o=t[s++],i(o.value,o.key,this)},keys:function(){return new zu(this,"keys")},values:function(){return new zu(this,"values")},entries:function(){return new zu(this,"entries")}},{enumerable:!0});Kh(Hn,Cx,Hn.entries,{name:"entries"});Kh(Hn,"toString",function(){return Ge(this).serialize()},{enumerable:!0});px($a,jn);Ju({global:!0,constructor:!0,forced:!$h},{URLSearchParams:$a});!$h&&Wu(qn)&&(Vh=Ze(Nh.has),Jh=Ze(Nh.set),Vu=function(r){if(Zh(r)){var e=r.body,t;if(vx(e)===jn)return t=r.headers?new qn(r.headers):new qn,Vh(t,"content-type")||Jh(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),bx(r,{body:Dh(0,pe(e)),headers:Dh(0,t)})}return r},Wu(_h)&&Ju({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return _h(e,arguments.length>1?Vu(arguments[1]):{})}}),Wu(Ja)&&(Va=function(e){return Xh(this,Gu),new Ja(e,arguments.length>1?Vu(arguments[1]):{})},Gu.constructor=Va,Va.prototype=Gu,Ju({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Va})));var Vh,Jh,Vu,Va;rv.exports={URLSearchParams:$a,getState:Ge}});var Pv=h(()=>{"use strict";Og();var _x=Mn(),fc=me(),Nx=xu(),gc=ce(),iv=ja(),Ee=$(),Qa=Xt(),we=Ng(),qx=Tu(),cc=Ce(),hc=Gg(),Hr=ch(),ze=Mu(),Hx=Ol().codeAt,jx=Sh(),st=En(),Wx=Bn(),Gx=_u(),gv=Yu(),hv=Ur(),zx=hv.set,ed=hv.getterFor("URL"),Vx=gv.URLSearchParams,Jx=gv.getState,Wn=gc.URL,mc=gc.TypeError,td=gc.parseInt,$x=Math.floor,nv=Math.pow,Te=Ee("".charAt),Ve=Ee(/./.exec),zn=Ee([].join),Kx=Ee(1 .toString),Xx=Ee([].pop),Wr=Ee([].push),sv=Ee("".replace),Zx=Ee([].shift),Yx=Ee("".split),Jn=Ee("".slice),rd=Ee("".toLowerCase),Qx=Ee([].unshift),e0="Invalid authority",Qu="Invalid scheme",Qt="Invalid host",ov="Invalid port",vv=/[a-z]/i,t0=/[\d+-.a-z]/i,pc=/\d/,r0=/^0x/i,i0=/^[0-7]+$/,n0=/^\d+$/,yv=/^[\da-f]+$/i,s0=/[\0\t\n\r #%/:<>?@[\\\]^|]/,o0=/[\0\t\n\r #/:<>?@[\\\]^|]/,a0=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,d0=/[\t\n\r]/g,Ae,l0=function(r){var e=Yx(r,"."),t,i,s,o,a,c,p;if(e.length&&e[e.length-1]==""&&e.length--,t=e.length,t>4)return r;for(i=[],s=0;s<t;s++){if(o=e[s],o=="")return r;if(a=10,o.length>1&&Te(o,0)=="0"&&(a=Ve(r0,o)?16:8,o=Jn(o,a==8?1:2)),o==="")c=0;else{if(!Ve(a==10?n0:a==8?i0:yv,o))return r;c=td(o,a)}Wr(i,c)}for(s=0;s<t;s++)if(c=i[s],s==t-1){if(c>=nv(256,5-t))return null}else if(c>255)return null;for(p=Xx(i),s=0;s<i.length;s++)p+=i[s]*nv(256,3-s);return p},u0=function(r){var e=[0,0,0,0,0,0,0,0],t=0,i=null,s=0,o,a,c,p,f,v,m,y=function(){return Te(r,s)};if(y()==":"){if(Te(r,1)!=":")return;s+=2,t++,i=t}for(;y();){if(t==8)return;if(y()==":"){if(i!==null)return;s++,t++,i=t;continue}for(o=a=0;a<4&&Ve(yv,y());)o=o*16+td(y(),16),s++,a++;if(y()=="."){if(a==0||(s-=a,t>6))return;for(c=0;y();){if(p=null,c>0)if(y()=="."&&c<4)s++;else return;if(!Ve(pc,y()))return;for(;Ve(pc,y());){if(f=td(y(),10),p===null)p=f;else{if(p==0)return;p=p*10+f}if(p>255)return;s++}e[t]=e[t]*256+p,c++,(c==2||c==4)&&t++}if(c!=4)return;break}else if(y()==":"){if(s++,!y())return}else if(y())return;e[t++]=o}if(i!==null)for(v=t-i,t=7;t!=0&&v>0;)m=e[t],e[t--]=e[i+v-1],e[i+--v]=m;else if(t!=8)return;return e},c0=function(r){for(var e=null,t=1,i=null,s=0,o=0;o<8;o++)r[o]!==0?(s>t&&(e=i,t=s),i=null,s=0):(i===null&&(i=o),++s);return s>t&&(e=i,t=s),e},Gn=function(r){var e,t,i,s;if(typeof r=="number"){for(e=[],t=0;t<4;t++)Qx(e,r%256),r=$x(r/256);return zn(e,".")}else if(typeof r=="object"){for(e="",i=c0(r),t=0;t<8;t++)s&&r[t]===0||(s&&(s=!1),i===t?(e+=t?":":"::",s=!0):(e+=Kx(r[t],16),t<7&&(e+=":")));return"["+e+"]"}return r},Ya={},bv=hc({},Ya,{" ":1,'"':1,"<":1,">":1,"`":1}),kv=hc({},bv,{"#":1,"?":1,"{":1,"}":1}),ec=hc({},kv,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),bt=function(r,e){var t=Hx(r,0);return t>32&&t<127&&!cc(e,r)?r:encodeURIComponent(r)},Ka={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Vn=function(r,e){var t;return r.length==2&&Ve(vv,Te(r,0))&&((t=Te(r,1))==":"||!e&&t=="|")},av=function(r){var e;return r.length>1&&Vn(Jn(r,0,2))&&(r.length==2||(e=Te(r,2))==="/"||e==="\\"||e==="?"||e==="#")},m0=function(r){return r==="."||rd(r)==="%2e"},p0=function(r){return r=rd(r),r===".."||r==="%2e."||r===".%2e"||r==="%2e%2e"},tc={},dv={},rc={},lv={},uv={},ic={},cv={},mv={},Xa={},Za={},nc={},sc={},oc={},ac={},pv={},dc={},jr={},Ye={},fv={},er={},nt={},vc=function(r,e,t){var i=st(r),s,o,a;if(e){if(o=this.parse(i),o)throw mc(o);this.searchParams=null}else{if(t!==void 0&&(s=new vc(t,!0)),o=this.parse(i,null,s),o)throw mc(o);a=Jx(new Vx),a.bindURL(this),this.searchParams=a}};vc.prototype={type:"URL",parse:function(r,e,t){var i=this,s=e||tc,o=0,a="",c=!1,p=!1,f=!1,v,m,y,k;for(r=st(r),e||(i.scheme="",i.username="",i.password="",i.host=null,i.port=null,i.path=[],i.query=null,i.fragment=null,i.cannotBeABaseURL=!1,r=sv(r,a0,"")),r=sv(r,d0,""),v=Hr(r);o<=v.length;){switch(m=v[o],s){case tc:if(m&&Ve(vv,m))a+=rd(m),s=dv;else{if(e)return Qu;s=rc;continue}break;case dv:if(m&&(Ve(t0,m)||m=="+"||m=="-"||m=="."))a+=rd(m);else if(m==":"){if(e&&(i.isSpecial()!=cc(Ka,a)||a=="file"&&(i.includesCredentials()||i.port!==null)||i.scheme=="file"&&!i.host))return;if(i.scheme=a,e){i.isSpecial()&&Ka[i.scheme]==i.port&&(i.port=null);return}a="",i.scheme=="file"?s=ac:i.isSpecial()&&t&&t.scheme==i.scheme?s=lv:i.isSpecial()?s=mv:v[o+1]=="/"?(s=uv,o++):(i.cannotBeABaseURL=!0,Wr(i.path,""),s=fv)}else{if(e)return Qu;a="",s=rc,o=0;continue}break;case rc:if(!t||t.cannotBeABaseURL&&m!="#")return Qu;if(t.cannotBeABaseURL&&m=="#"){i.scheme=t.scheme,i.path=ze(t.path),i.query=t.query,i.fragment="",i.cannotBeABaseURL=!0,s=nt;break}s=t.scheme=="file"?ac:ic;continue;case lv:if(m=="/"&&v[o+1]=="/")s=Xa,o++;else{s=ic;continue}break;case uv:if(m=="/"){s=Za;break}else{s=Ye;continue}case ic:if(i.scheme=t.scheme,m==Ae)i.username=t.username,i.password=t.password,i.host=t.host,i.port=t.port,i.path=ze(t.path),i.query=t.query;else if(m=="/"||m=="\\"&&i.isSpecial())s=cv;else if(m=="?")i.username=t.username,i.password=t.password,i.host=t.host,i.port=t.port,i.path=ze(t.path),i.query="",s=er;else if(m=="#")i.username=t.username,i.password=t.password,i.host=t.host,i.port=t.port,i.path=ze(t.path),i.query=t.query,i.fragment="",s=nt;else{i.username=t.username,i.password=t.password,i.host=t.host,i.port=t.port,i.path=ze(t.path),i.path.length--,s=Ye;continue}break;case cv:if(i.isSpecial()&&(m=="/"||m=="\\"))s=Xa;else if(m=="/")s=Za;else{i.username=t.username,i.password=t.password,i.host=t.host,i.port=t.port,s=Ye;continue}break;case mv:if(s=Xa,m!="/"||Te(a,o+1)!="/")continue;o++;break;case Xa:if(m!="/"&&m!="\\"){s=Za;continue}break;case Za:if(m=="@"){c&&(a="%40"+a),c=!0,y=Hr(a);for(var C=0;C<y.length;C++){var I=y[C];if(I==":"&&!f){f=!0;continue}var A=bt(I,ec);f?i.password+=A:i.username+=A}a=""}else if(m==Ae||m=="/"||m=="?"||m=="#"||m=="\\"&&i.isSpecial()){if(c&&a=="")return e0;o-=Hr(a).length+1,a="",s=nc}else a+=m;break;case nc:case sc:if(e&&i.scheme=="file"){s=dc;continue}else if(m==":"&&!p){if(a=="")return Qt;if(k=i.parseHost(a),k)return k;if(a="",s=oc,e==sc)return}else if(m==Ae||m=="/"||m=="?"||m=="#"||m=="\\"&&i.isSpecial()){if(i.isSpecial()&&a=="")return Qt;if(e&&a==""&&(i.includesCredentials()||i.port!==null))return;if(k=i.parseHost(a),k)return k;if(a="",s=jr,e)return;continue}else m=="["?p=!0:m=="]"&&(p=!1),a+=m;break;case oc:if(Ve(pc,m))a+=m;else if(m==Ae||m=="/"||m=="?"||m=="#"||m=="\\"&&i.isSpecial()||e){if(a!=""){var U=td(a,10);if(U>65535)return ov;i.port=i.isSpecial()&&U===Ka[i.scheme]?null:U,a=""}if(e)return;s=jr;continue}else return ov;break;case ac:if(i.scheme="file",m=="/"||m=="\\")s=pv;else if(t&&t.scheme=="file")if(m==Ae)i.host=t.host,i.path=ze(t.path),i.query=t.query;else if(m=="?")i.host=t.host,i.path=ze(t.path),i.query="",s=er;else if(m=="#")i.host=t.host,i.path=ze(t.path),i.query=t.query,i.fragment="",s=nt;else{av(zn(ze(v,o),""))||(i.host=t.host,i.path=ze(t.path),i.shortenPath()),s=Ye;continue}else{s=Ye;continue}break;case pv:if(m=="/"||m=="\\"){s=dc;break}t&&t.scheme=="file"&&!av(zn(ze(v,o),""))&&(Vn(t.path[0],!0)?Wr(i.path,t.path[0]):i.host=t.host),s=Ye;continue;case dc:if(m==Ae||m=="/"||m=="\\"||m=="?"||m=="#"){if(!e&&Vn(a))s=Ye;else if(a==""){if(i.host="",e)return;s=jr}else{if(k=i.parseHost(a),k)return k;if(i.host=="localhost"&&(i.host=""),e)return;a="",s=jr}continue}else a+=m;break;case jr:if(i.isSpecial()){if(s=Ye,m!="/"&&m!="\\")continue}else if(!e&&m=="?")i.query="",s=er;else if(!e&&m=="#")i.fragment="",s=nt;else if(m!=Ae&&(s=Ye,m!="/"))continue;break;case Ye:if(m==Ae||m=="/"||m=="\\"&&i.isSpecial()||!e&&(m=="?"||m=="#")){if(p0(a)?(i.shortenPath(),m!="/"&&!(m=="\\"&&i.isSpecial())&&Wr(i.path,"")):m0(a)?m!="/"&&!(m=="\\"&&i.isSpecial())&&Wr(i.path,""):(i.scheme=="file"&&!i.path.length&&Vn(a)&&(i.host&&(i.host=""),a=Te(a,0)+":"),Wr(i.path,a)),a="",i.scheme=="file"&&(m==Ae||m=="?"||m=="#"))for(;i.path.length>1&&i.path[0]==="";)Zx(i.path);m=="?"?(i.query="",s=er):m=="#"&&(i.fragment="",s=nt)}else a+=bt(m,kv);break;case fv:m=="?"?(i.query="",s=er):m=="#"?(i.fragment="",s=nt):m!=Ae&&(i.path[0]+=bt(m,Ya));break;case er:!e&&m=="#"?(i.fragment="",s=nt):m!=Ae&&(m=="'"&&i.isSpecial()?i.query+="%27":m=="#"?i.query+="%23":i.query+=bt(m,Ya));break;case nt:m!=Ae&&(i.fragment+=bt(m,bv));break}o++}},parseHost:function(r){var e,t,i;if(Te(r,0)=="["){if(Te(r,r.length-1)!="]"||(e=u0(Jn(r,1,-1)),!e))return Qt;this.host=e}else if(this.isSpecial()){if(r=jx(r),Ve(s0,r)||(e=l0(r),e===null))return Qt;this.host=e}else{if(Ve(o0,r))return Qt;for(e="",t=Hr(r),i=0;i<t.length;i++)e+=bt(t[i],Ya);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return cc(Ka,this.scheme)},shortenPath:function(){var r=this.path,e=r.length;e&&(this.scheme!="file"||e!=1||!Vn(r[0],!0))&&r.length--},serialize:function(){var r=this,e=r.scheme,t=r.username,i=r.password,s=r.host,o=r.port,a=r.path,c=r.query,p=r.fragment,f=e+":";return s!==null?(f+="//",r.includesCredentials()&&(f+=t+(i?":"+i:"")+"@"),f+=Gn(s),o!==null&&(f+=":"+o)):e=="file"&&(f+="//"),f+=r.cannotBeABaseURL?a[0]:a.length?"/"+zn(a,"/"):"",c!==null&&(f+="?"+c),p!==null&&(f+="#"+p),f},setHref:function(r){var e=this.parse(r);if(e)throw mc(e);this.searchParams.update()},getOrigin:function(){var r=this.scheme,e=this.port;if(r=="blob")try{return new Gr(r.path[0]).origin}catch{return"null"}return r=="file"||!this.isSpecial()?"null":r+"://"+Gn(this.host)+(e!==null?":"+e:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(r){this.parse(st(r)+":",tc)},getUsername:function(){return this.username},setUsername:function(r){var e=Hr(st(r));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var t=0;t<e.length;t++)this.username+=bt(e[t],ec)}},getPassword:function(){return this.password},setPassword:function(r){var e=Hr(st(r));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var t=0;t<e.length;t++)this.password+=bt(e[t],ec)}},getHost:function(){var r=this.host,e=this.port;return r===null?"":e===null?Gn(r):Gn(r)+":"+e},setHost:function(r){this.cannotBeABaseURL||this.parse(r,nc)},getHostname:function(){var r=this.host;return r===null?"":Gn(r)},setHostname:function(r){this.cannotBeABaseURL||this.parse(r,sc)},getPort:function(){var r=this.port;return r===null?"":st(r)},setPort:function(r){this.cannotHaveUsernamePasswordPort()||(r=st(r),r==""?this.port=null:this.parse(r,oc))},getPathname:function(){var r=this.path;return this.cannotBeABaseURL?r[0]:r.length?"/"+zn(r,"/"):""},setPathname:function(r){this.cannotBeABaseURL||(this.path=[],this.parse(r,jr))},getSearch:function(){var r=this.query;return r?"?"+r:""},setSearch:function(r){r=st(r),r==""?this.query=null:(Te(r,0)=="?"&&(r=Jn(r,1)),this.query="",this.parse(r,er)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var r=this.fragment;return r?"#"+r:""},setHash:function(r){if(r=st(r),r==""){this.fragment=null;return}Te(r,0)=="#"&&(r=Jn(r,1)),this.fragment="",this.parse(r,nt)},update:function(){this.query=this.searchParams.serialize()||null}};var Gr=function(e){var t=qx(this,Q),i=Gx(arguments.length,1)>1?arguments[1]:void 0,s=zx(t,new vc(e,!1,i));fc||(t.href=s.serialize(),t.origin=s.getOrigin(),t.protocol=s.getProtocol(),t.username=s.getUsername(),t.password=s.getPassword(),t.host=s.getHost(),t.hostname=s.getHostname(),t.port=s.getPort(),t.pathname=s.getPathname(),t.search=s.getSearch(),t.searchParams=s.getSearchParams(),t.hash=s.getHash())},Q=Gr.prototype,xe=function(r,e){return{get:function(){return ed(this)[r]()},set:e&&function(t){return ed(this)[e](t)},configurable:!0,enumerable:!0}};fc&&(we(Q,"href",xe("serialize","setHref")),we(Q,"origin",xe("getOrigin")),we(Q,"protocol",xe("getProtocol","setProtocol")),we(Q,"username",xe("getUsername","setUsername")),we(Q,"password",xe("getPassword","setPassword")),we(Q,"host",xe("getHost","setHost")),we(Q,"hostname",xe("getHostname","setHostname")),we(Q,"port",xe("getPort","setPort")),we(Q,"pathname",xe("getPathname","setPathname")),we(Q,"search",xe("getSearch","setSearch")),we(Q,"searchParams",xe("getSearchParams")),we(Q,"hash",xe("getHash","setHash")));Qa(Q,"toJSON",function(){return ed(this).serialize()},{enumerable:!0});Qa(Q,"toString",function(){return ed(this).serialize()},{enumerable:!0});Wn&&(lc=Wn.createObjectURL,uc=Wn.revokeObjectURL,lc&&Qa(Gr,"createObjectURL",iv(lc,Wn)),uc&&Qa(Gr,"revokeObjectURL",iv(uc,Wn)));var lc,uc;Wx(Gr,"URL");_x({global:!0,constructor:!0,forced:!Nx,sham:!fc},{URL:Gr})});var Sv=h(()=>{Pv()});var Cv=h(()=>{"use strict";var f0=Mn(),g0=je();f0({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return g0(URL.prototype.toString,this)}})});var Iv=h(()=>{Yu()});var Av=h((xM,wv)=>{var h0=ce();wv.exports=h0});var Tv=h((TM,xv)=>{Sv();Cv();Iv();var v0=Av();xv.exports=v0.URL});var Gc=h((GL,Oy)=>{var wT=Object.prototype.toString;Oy.exports=function(e){if(e===void 0)return"undefined";if(e===null)return"null";var t=typeof e;if(t==="boolean")return"boolean";if(t==="string")return"string";if(t==="number")return"number";if(t==="symbol")return"symbol";if(t==="function")return RT(e)?"generatorfunction":"function";if(AT(e))return"array";if(MT(e))return"buffer";if(FT(e))return"arguments";if(TT(e))return"date";if(xT(e))return"error";if(ET(e))return"regexp";switch(Ry(e)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(OT(e))return"generator";switch(t=wT.call(e),t){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return t.slice(8,-1).toLowerCase().replace(/\s/g,"")};function Ry(r){return typeof r.constructor=="function"?r.constructor.name:null}function AT(r){return Array.isArray?Array.isArray(r):r instanceof Array}function xT(r){return r instanceof Error||typeof r.message=="string"&&r.constructor&&typeof r.constructor.stackTraceLimit=="number"}function TT(r){return r instanceof Date?!0:typeof r.toDateString=="function"&&typeof r.getDate=="function"&&typeof r.setDate=="function"}function ET(r){return r instanceof RegExp?!0:typeof r.flags=="string"&&typeof r.ignoreCase=="boolean"&&typeof r.multiline=="boolean"&&typeof r.global=="boolean"}function RT(r,e){return Ry(r)==="GeneratorFunction"}function OT(r){return typeof r.throw=="function"&&typeof r.return=="function"&&typeof r.next=="function"}function FT(r){try{if(typeof r.length=="number"&&typeof r.callee=="function")return!0}catch(e){if(e.message.indexOf("callee")!==-1)return!0}return!1}function MT(r){return r.constructor&&typeof r.constructor.isBuffer=="function"?r.constructor.isBuffer(r):!1}});var Uy=h((zL,My)=>{"use strict";var Fy=Symbol.prototype.valueOf,UT=Gc();function BT(r,e){switch(UT(r)){case"array":return r.slice();case"object":return Object.assign({},r);case"date":return new r.constructor(Number(r));case"map":return new Map(r);case"set":return new Set(r);case"buffer":return NT(r);case"symbol":return qT(r);case"arraybuffer":return DT(r);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return _T(r);case"regexp":return LT(r);case"error":return Object.create(r);default:return r}}function LT(r){let e=r.flags!==void 0?r.flags:/\w+$/.exec(r)||void 0,t=new r.constructor(r.source,e);return t.lastIndex=r.lastIndex,t}function DT(r){let e=new r.constructor(r.byteLength);return new Uint8Array(e).set(new Uint8Array(r)),e}function _T(r,e){return new r.constructor(r.buffer,r.byteOffset,r.length)}function NT(r){let e=r.length,t=Buffer.allocUnsafe?Buffer.allocUnsafe(e):Buffer.from(e);return r.copy(t),t}function qT(r){return Fy?Object(Fy.call(r)):{}}My.exports=BT});var Ly=h((VL,By)=>{"use strict";By.exports=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}});var Ny=h((JL,_y)=>{"use strict";var HT=Ly();function Dy(r){return HT(r)===!0&&Object.prototype.toString.call(r)==="[object Object]"}_y.exports=function(e){var t,i;return!(Dy(e)===!1||(t=e.constructor,typeof t!="function")||(i=t.prototype,Dy(i)===!1)||i.hasOwnProperty("isPrototypeOf")===!1)}});var Hy=h(($L,qy)=>{"use strict";var jT=Uy(),WT=Gc(),GT=Ny();function zc(r,e){switch(WT(r)){case"object":return zT(r,e);case"array":return VT(r,e);default:return jT(r)}}function zT(r,e){if(typeof e=="function")return e(r);if(e||GT(r)){let t=new r.constructor;for(let i in r)t[i]=zc(r[i],e);return t}return r}function VT(r,e){let t=new r.constructor(r.length);for(let i=0;i<r.length;i++)t[i]=zc(r[i],e);return t}qy.exports=zc});var Dd=h((ds,ci)=>{var JT=200,rm="__lodash_hash_undefined__",Md=1,Qy=2,eb=9007199254740991,Ad="[object Arguments]",Kc="[object Array]",$T="[object AsyncFunction]",tb="[object Boolean]",rb="[object Date]",ib="[object Error]",nb="[object Function]",KT="[object GeneratorFunction]",xd="[object Map]",sb="[object Number]",XT="[object Null]",ui="[object Object]",jy="[object Promise]",ZT="[object Proxy]",ob="[object RegExp]",Td="[object Set]",ab="[object String]",YT="[object Symbol]",QT="[object Undefined]",Xc="[object WeakMap]",db="[object ArrayBuffer]",Ed="[object DataView]",eE="[object Float32Array]",tE="[object Float64Array]",rE="[object Int8Array]",iE="[object Int16Array]",nE="[object Int32Array]",sE="[object Uint8Array]",oE="[object Uint8ClampedArray]",aE="[object Uint16Array]",dE="[object Uint32Array]",lE=/[\\^$.*+?()[\]{}|]/g,uE=/^\[object .+?Constructor\]$/,cE=/^(?:0|[1-9]\d*)$/,q={};q[eE]=q[tE]=q[rE]=q[iE]=q[nE]=q[sE]=q[oE]=q[aE]=q[dE]=!0;q[Ad]=q[Kc]=q[db]=q[tb]=q[Ed]=q[rb]=q[ib]=q[nb]=q[xd]=q[sb]=q[ui]=q[ob]=q[Td]=q[ab]=q[Xc]=!1;var lb=typeof global=="object"&&global&&global.Object===Object&&global,mE=typeof self=="object"&&self&&self.Object===Object&&self,lt=lb||mE||Function("return this")(),ub=typeof ds=="object"&&ds&&!ds.nodeType&&ds,Wy=ub&&typeof ci=="object"&&ci&&!ci.nodeType&&ci,cb=Wy&&Wy.exports===ub,Vc=cb&&lb.process,Gy=function(){try{return Vc&&Vc.binding&&Vc.binding("util")}catch{}}(),zy=Gy&&Gy.isTypedArray;function pE(r,e){for(var t=-1,i=r==null?0:r.length,s=0,o=[];++t<i;){var a=r[t];e(a,t,r)&&(o[s++]=a)}return o}function fE(r,e){for(var t=-1,i=e.length,s=r.length;++t<i;)r[s+t]=e[t];return r}function gE(r,e){for(var t=-1,i=r==null?0:r.length;++t<i;)if(e(r[t],t,r))return!0;return!1}function hE(r,e){for(var t=-1,i=Array(r);++t<r;)i[t]=e(t);return i}function vE(r){return function(e){return r(e)}}function yE(r,e){return r.has(e)}function bE(r,e){return r?.[e]}function kE(r){var e=-1,t=Array(r.size);return r.forEach(function(i,s){t[++e]=[s,i]}),t}function PE(r,e){return function(t){return r(e(t))}}function SE(r){var e=-1,t=Array(r.size);return r.forEach(function(i){t[++e]=i}),t}var CE=Array.prototype,IE=Function.prototype,Ud=Object.prototype,Jc=lt["__core-js_shared__"],mb=IE.toString,Qe=Ud.hasOwnProperty,Vy=function(){var r=/[^.]+$/.exec(Jc&&Jc.keys&&Jc.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),pb=Ud.toString,wE=RegExp("^"+mb.call(Qe).replace(lE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jy=cb?lt.Buffer:void 0,Rd=lt.Symbol,$y=lt.Uint8Array,fb=Ud.propertyIsEnumerable,AE=CE.splice,lr=Rd?Rd.toStringTag:void 0,Ky=Object.getOwnPropertySymbols,xE=Jy?Jy.isBuffer:void 0,TE=PE(Object.keys,Object),Zc=mi(lt,"DataView"),ls=mi(lt,"Map"),Yc=mi(lt,"Promise"),Qc=mi(lt,"Set"),em=mi(lt,"WeakMap"),us=mi(Object,"create"),EE=mr(Zc),RE=mr(ls),OE=mr(Yc),FE=mr(Qc),ME=mr(em),Xy=Rd?Rd.prototype:void 0,$c=Xy?Xy.valueOf:void 0;function ur(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}function UE(){this.__data__=us?us(null):{},this.size=0}function BE(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}function LE(r){var e=this.__data__;if(us){var t=e[r];return t===rm?void 0:t}return Qe.call(e,r)?e[r]:void 0}function DE(r){var e=this.__data__;return us?e[r]!==void 0:Qe.call(e,r)}function _E(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=us&&e===void 0?rm:e,this}ur.prototype.clear=UE;ur.prototype.delete=BE;ur.prototype.get=LE;ur.prototype.has=DE;ur.prototype.set=_E;function ut(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}function NE(){this.__data__=[],this.size=0}function qE(r){var e=this.__data__,t=Bd(e,r);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():AE.call(e,t,1),--this.size,!0}function HE(r){var e=this.__data__,t=Bd(e,r);return t<0?void 0:e[t][1]}function jE(r){return Bd(this.__data__,r)>-1}function WE(r,e){var t=this.__data__,i=Bd(t,r);return i<0?(++this.size,t.push([r,e])):t[i][1]=e,this}ut.prototype.clear=NE;ut.prototype.delete=qE;ut.prototype.get=HE;ut.prototype.has=jE;ut.prototype.set=WE;function cr(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}function GE(){this.size=0,this.__data__={hash:new ur,map:new(ls||ut),string:new ur}}function zE(r){var e=Ld(this,r).delete(r);return this.size-=e?1:0,e}function VE(r){return Ld(this,r).get(r)}function JE(r){return Ld(this,r).has(r)}function $E(r,e){var t=Ld(this,r),i=t.size;return t.set(r,e),this.size+=t.size==i?0:1,this}cr.prototype.clear=GE;cr.prototype.delete=zE;cr.prototype.get=VE;cr.prototype.has=JE;cr.prototype.set=$E;function Od(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new cr;++e<t;)this.add(r[e])}function KE(r){return this.__data__.set(r,rm),this}function XE(r){return this.__data__.has(r)}Od.prototype.add=Od.prototype.push=KE;Od.prototype.has=XE;function Rt(r){var e=this.__data__=new ut(r);this.size=e.size}function ZE(){this.__data__=new ut,this.size=0}function YE(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function QE(r){return this.__data__.get(r)}function eR(r){return this.__data__.has(r)}function tR(r,e){var t=this.__data__;if(t instanceof ut){var i=t.__data__;if(!ls||i.length<JT-1)return i.push([r,e]),this.size=++t.size,this;t=this.__data__=new cr(i)}return t.set(r,e),this.size=t.size,this}Rt.prototype.clear=ZE;Rt.prototype.delete=YE;Rt.prototype.get=QE;Rt.prototype.has=eR;Rt.prototype.set=tR;function rR(r,e){var t=Fd(r),i=!t&&vR(r),s=!t&&!i&&tm(r),o=!t&&!i&&!s&&Pb(r),a=t||i||s||o,c=a?hE(r.length,String):[],p=c.length;for(var f in r)(e||Qe.call(r,f))&&!(a&&(f=="length"||s&&(f=="offset"||f=="parent")||o&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||mR(f,p)))&&c.push(f);return c}function Bd(r,e){for(var t=r.length;t--;)if(vb(r[t][0],e))return t;return-1}function iR(r,e,t){var i=e(r);return Fd(r)?i:fE(i,t(r))}function ms(r){return r==null?r===void 0?QT:XT:lr&&lr in Object(r)?uR(r):hR(r)}function Zy(r){return cs(r)&&ms(r)==Ad}function gb(r,e,t,i,s){return r===e?!0:r==null||e==null||!cs(r)&&!cs(e)?r!==r&&e!==e:nR(r,e,t,i,gb,s)}function nR(r,e,t,i,s,o){var a=Fd(r),c=Fd(e),p=a?Kc:Et(r),f=c?Kc:Et(e);p=p==Ad?ui:p,f=f==Ad?ui:f;var v=p==ui,m=f==ui,y=p==f;if(y&&tm(r)){if(!tm(e))return!1;a=!0,v=!1}if(y&&!v)return o||(o=new Rt),a||Pb(r)?hb(r,e,t,i,s,o):dR(r,e,p,t,i,s,o);if(!(t&Md)){var k=v&&Qe.call(r,"__wrapped__"),C=m&&Qe.call(e,"__wrapped__");if(k||C){var I=k?r.value():r,A=C?e.value():e;return o||(o=new Rt),s(I,A,t,i,o)}}return y?(o||(o=new Rt),lR(r,e,t,i,s,o)):!1}function sR(r){if(!kb(r)||fR(r))return!1;var e=yb(r)?wE:uE;return e.test(mr(r))}function oR(r){return cs(r)&&bb(r.length)&&!!q[ms(r)]}function aR(r){if(!gR(r))return TE(r);var e=[];for(var t in Object(r))Qe.call(r,t)&&t!="constructor"&&e.push(t);return e}function hb(r,e,t,i,s,o){var a=t&Md,c=r.length,p=e.length;if(c!=p&&!(a&&p>c))return!1;var f=o.get(r);if(f&&o.get(e))return f==e;var v=-1,m=!0,y=t&Qy?new Od:void 0;for(o.set(r,e),o.set(e,r);++v<c;){var k=r[v],C=e[v];if(i)var I=a?i(C,k,v,e,r,o):i(k,C,v,r,e,o);if(I!==void 0){if(I)continue;m=!1;break}if(y){if(!gE(e,function(A,U){if(!yE(y,U)&&(k===A||s(k,A,t,i,o)))return y.push(U)})){m=!1;break}}else if(!(k===C||s(k,C,t,i,o))){m=!1;break}}return o.delete(r),o.delete(e),m}function dR(r,e,t,i,s,o,a){switch(t){case Ed:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case db:return!(r.byteLength!=e.byteLength||!o(new $y(r),new $y(e)));case tb:case rb:case sb:return vb(+r,+e);case ib:return r.name==e.name&&r.message==e.message;case ob:case ab:return r==e+"";case xd:var c=kE;case Td:var p=i&Md;if(c||(c=SE),r.size!=e.size&&!p)return!1;var f=a.get(r);if(f)return f==e;i|=Qy,a.set(r,e);var v=hb(c(r),c(e),i,s,o,a);return a.delete(r),v;case YT:if($c)return $c.call(r)==$c.call(e)}return!1}function lR(r,e,t,i,s,o){var a=t&Md,c=Yy(r),p=c.length,f=Yy(e),v=f.length;if(p!=v&&!a)return!1;for(var m=p;m--;){var y=c[m];if(!(a?y in e:Qe.call(e,y)))return!1}var k=o.get(r);if(k&&o.get(e))return k==e;var C=!0;o.set(r,e),o.set(e,r);for(var I=a;++m<p;){y=c[m];var A=r[y],U=e[y];if(i)var ue=a?i(U,A,y,e,r,o):i(A,U,y,r,e,o);if(!(ue===void 0?A===U||s(A,U,t,i,o):ue)){C=!1;break}I||(I=y=="constructor")}if(C&&!I){var An=r.constructor,pa=e.constructor;An!=pa&&"constructor"in r&&"constructor"in e&&!(typeof An=="function"&&An instanceof An&&typeof pa=="function"&&pa instanceof pa)&&(C=!1)}return o.delete(r),o.delete(e),C}function Yy(r){return iR(r,kR,cR)}function Ld(r,e){var t=r.__data__;return pR(e)?t[typeof e=="string"?"string":"hash"]:t.map}function mi(r,e){var t=bE(r,e);return sR(t)?t:void 0}function uR(r){var e=Qe.call(r,lr),t=r[lr];try{r[lr]=void 0;var i=!0}catch{}var s=pb.call(r);return i&&(e?r[lr]=t:delete r[lr]),s}var cR=Ky?function(r){return r==null?[]:(r=Object(r),pE(Ky(r),function(e){return fb.call(r,e)}))}:PR,Et=ms;(Zc&&Et(new Zc(new ArrayBuffer(1)))!=Ed||ls&&Et(new ls)!=xd||Yc&&Et(Yc.resolve())!=jy||Qc&&Et(new Qc)!=Td||em&&Et(new em)!=Xc)&&(Et=function(r){var e=ms(r),t=e==ui?r.constructor:void 0,i=t?mr(t):"";if(i)switch(i){case EE:return Ed;case RE:return xd;case OE:return jy;case FE:return Td;case ME:return Xc}return e});function mR(r,e){return e=e??eb,!!e&&(typeof r=="number"||cE.test(r))&&r>-1&&r%1==0&&r<e}function pR(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function fR(r){return!!Vy&&Vy in r}function gR(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||Ud;return r===t}function hR(r){return pb.call(r)}function mr(r){if(r!=null){try{return mb.call(r)}catch{}try{return r+""}catch{}}return""}function vb(r,e){return r===e||r!==r&&e!==e}var vR=Zy(function(){return arguments}())?Zy:function(r){return cs(r)&&Qe.call(r,"callee")&&!fb.call(r,"callee")},Fd=Array.isArray;function yR(r){return r!=null&&bb(r.length)&&!yb(r)}var tm=xE||SR;function bR(r,e){return gb(r,e)}function yb(r){if(!kb(r))return!1;var e=ms(r);return e==nb||e==KT||e==$T||e==ZT}function bb(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=eb}function kb(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}function cs(r){return r!=null&&typeof r=="object"}var Pb=zy?vE(zy):oR;function kR(r){return yR(r)?rR(r):aR(r)}function PR(){return[]}function SR(){return!1}ci.exports=bR});var jk=h(Qd=>{"use strict";Qd.byteLength=zR;Qd.toByteArray=JR;Qd.fromByteArray=XR;var et=[],_e=[],GR=typeof Uint8Array<"u"?Uint8Array:Array,wm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Sr=0,qk=wm.length;Sr<qk;++Sr)et[Sr]=wm[Sr],_e[wm.charCodeAt(Sr)]=Sr;var Sr,qk;_e["-".charCodeAt(0)]=62;_e["_".charCodeAt(0)]=63;function Hk(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var i=t===e?0:4-t%4;return[t,i]}function zR(r){var e=Hk(r),t=e[0],i=e[1];return(t+i)*3/4-i}function VR(r,e,t){return(e+t)*3/4-t}function JR(r){var e,t=Hk(r),i=t[0],s=t[1],o=new GR(VR(r,i,s)),a=0,c=s>0?i-4:i,p;for(p=0;p<c;p+=4)e=_e[r.charCodeAt(p)]<<18|_e[r.charCodeAt(p+1)]<<12|_e[r.charCodeAt(p+2)]<<6|_e[r.charCodeAt(p+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=e&255;return s===2&&(e=_e[r.charCodeAt(p)]<<2|_e[r.charCodeAt(p+1)]>>4,o[a++]=e&255),s===1&&(e=_e[r.charCodeAt(p)]<<10|_e[r.charCodeAt(p+1)]<<4|_e[r.charCodeAt(p+2)]>>2,o[a++]=e>>8&255,o[a++]=e&255),o}function $R(r){return et[r>>18&63]+et[r>>12&63]+et[r>>6&63]+et[r&63]}function KR(r,e,t){for(var i,s=[],o=e;o<t;o+=3)i=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),s.push($R(i));return s.join("")}function XR(r){for(var e,t=r.length,i=t%3,s=[],o=16383,a=0,c=t-i;a<c;a+=o)s.push(KR(r,a,a+o>c?c:a+o));return i===1?(e=r[t-1],s.push(et[e>>2]+et[e<<4&63]+"==")):i===2&&(e=(r[t-2]<<8)+r[t-1],s.push(et[e>>10]+et[e>>4&63]+et[e<<2&63]+"=")),s.join("")}});var Zq=Rr(Tv(),1);function g(r,e){if(r==null)throw Error(e??"Expected nonnullish value.")}function tr(r,e){if(!r)throw Error(e)}var ee;(function(r){r.COMMENT="t1_",r.ACCOUNT="t2_",r.LINK="t3_",r.MESSAGE="t4_",r.SUBREDDIT="t5_",r.AWARD="t6_"})(ee||(ee={}));function kt(r){return r.startsWith(ee.COMMENT)}function id(r){return r.startsWith(ee.ACCOUNT)}function rr(r){return r.startsWith(ee.LINK)}function Ev(r){return r.startsWith(ee.MESSAGE)}function Rv(r){return r.startsWith(ee.SUBREDDIT)}function Ov(r){return r.startsWith(ee.AWARD)}function y0(r){tr(kt(r),`Expected comment id to start with ${ee.COMMENT}, got ${r}}`)}function b0(r){tr(id(r),`Expected account id to start with ${ee.ACCOUNT}, got ${r}}`)}function k0(r){tr(rr(r),`Expected link id to start with ${ee.LINK}, got ${r}}`)}function P0(r){tr(Ev(r),`Expected message id to start with ${ee.MESSAGE}, got ${r}}`)}function S0(r){tr(Rv(r),`Expected subreddit id to start with ${ee.SUBREDDIT}, got ${r}}`)}function C0(r){tr(Ov(r),`Expected award id to start with ${ee.AWARD}, got ${r}}`)}function zr(r){return y0(r),r}function te(r){return b0(r),r}function fe(r){return k0(r),r}function I0(r){return P0(r),r}function Re(r){return S0(r),r}function w0(r){return C0(r),r}function ge(r){if(kt(r))return zr(r);if(id(r))return te(r);if(rr(r))return fe(r);if(Ev(r))return I0(r);if(Rv(r))return Re(r);if(Ov(r))return w0(r);throw new Error(`Expected thing id to start with ${Object.values(ee).join(", ")} got ${r}}`)}function yc(r){return kt(r)}import*as S from"@devvit/protos";var nd=class{constructor(e){}};var bc=(t=>(t.Installation="installation",t.App="app",t))(bc||{});function ir(r,e=new Set){for(let t of r){if(t.type==="group"){ir(t.fields,e);continue}let i=t.name;if(e.has(i))throw new Error(`Duplicate field name: ${i}`);e.add(i)}A0(r)}function A0(r){for(let e of r)if(e.type==="string"&&e.isSecret&&e.scope!=="app")throw`Invalid setting: only app settings can be secrets. Add "scope: SettingScope.App" to field "${e.name}"`}var Pt=Object.freeze({INTERVAL:0,FORM:1,STATE:2,CHANNEL:3});var _M=["activity","add-emoji","add","add-media","add-to-feed","admin","align-center","align-left","align-right","all","appearance","approve","archived","aspect-ratio","aspect-rectangle","attach","audio","author","avatar-style","award","back","ban","best","binoculars","block","blockchain","bold","bot","boost","bounce","brand-awareness","browse","browser","cake","calendar","camera","caret-down","caret-left","caret-right","caret-up","chat","chat-group","chat-new","checkbox-dismiss","checkbox","checkmark","chrome","clear","close","closed-captioning","code-block","code-inline","coins-color-old","coins-color","coins","collapse-left","collapse-right","collection","comment","comments","community","contest","controversial","crop","crosspost","crowd-control","custom-feed","customize","day","delete","discover","dismiss-all","distinguish","down-arrow","down","download","downvote","downvotes","drag","drugs","duplicate","edit","effect","embed","emoji","end-live-chat","error","expand-left","expand-right","external","feed-video","filter","format","forward","gif-post","heart","help","hide","history","home","hot","ignore-reports","image-post","inbox","info","invite","italic","join","joined","jump-down","jump-up","karma","keyboard","kick","language","leave","left","link","link-post","list-bulleted","list-numbered","live-chat","live","load","location","lock","logout","loop","mark-read","mask","media-gallery","meme","menu","message","mic","mic-mute","mod","mod-mail","mod-mode","mod-mute","mod-overflow","mod-queue","mod-unmute","music","new","night","notification","notification-frequent","notification-off","nsfw","nsfw-language","nsfw-violence","original","overflow-caret","overflow-horizontal","overflow-vertical","pause","payment","peace","pending-posts","phone","pin","planet","play","poll-post","popular","posts","powerup-color-outline","powerup-fill-color","powerup","predictions","premium","privacy","profile","qa","qr-code","quarantined","quote","r-slash","radio-button","raise-hand","random","ratings-everyone","ratings-mature","ratings-nsfw","ratings-violence","refresh","remove","reply","report","reverse","right","rising","rotate","rotate-image","rpan","rules","safari","save","saved","search","self","send","settings","share-android","share","share-ios","show","side-menu","skipback10","skipforward10","sort-az","sort","sort-price","sort-za","spam","spoiler","sponsored","star","statistics","status-live","sticker","strikethrough","subtract","superscript","swap-camera","swipe-back","swipe-down","swipe","swipe-up","table","tag","tap","telescope","text","text-post","text-size","toggle","tools","top","topic-activism","topic-addictionsupport","topic-advice","topic-animals","topic-anime","topic-art","topic-beauty","topic-business","topic-careers","topic-cars","topic-celebrity","topic-craftsdiy","topic-crypto","topic-culture","topic-diy","topic-entertainment","topic-ethics","topic-family","topic-fashion","topic","topic-fitness","topic-food","topic-funny","topic-gender","topic-health","topic-help","topic-history","topic-hobbies","topic-homegarden","topic-internet","topic-law","topic-learning","topic-lifestyle","topic-marketplace","topic-mature","topic-mensfashion","topic-menshealth","topic-meta","topic-military","topic-movies","topic-music","topic-news","topic-other","topic-outdoors","topic-pets","topic-photography","topic-places","topic-podcasts","topic-politics","topic-programming","topic-reading","topic-religion","topic-science","topic-sexorientation","topic-sports","topic-style","topic-tabletop","topic-technology","topic-television","topic-traumasupport","topic-travel","topic-videogaming","topic-womensfashion","topic-womenshealth","translate","trim","u-slash","unban","undo","unheart","unlock","unmod","unpin","unverified","up-arrow","up","upload","upvote","upvotes","user","user-note","users","vault","verified","video-camera","video-feed","video-live-1","video-live-fill-1","video-live","video-post","video-thread","video-transcription","view-card","view-classic","view-compact","view-grid","views","volume","volume-mute","wallet","warning","wiki-ban","wiki","wiki-unban","world"];import{AppSettingsDefinition as H0,GetFieldsResponse as j0}from"@devvit/protos";import{FormField as nr,FormFieldType as Oe}from"@devvit/protos";function ot(r){return r.map(e=>{switch(e.type){case"string":return x0(e);case"image":return T0(e);case"paragraph":return E0(e);case"number":return R0(e);case"select":return O0(e);case"boolean":return F0(e);case"group":return M0(e);default:throw new Error("Unknown field type.")}})}function x0(r){return nr.fromPartial({defaultValue:{fieldType:Oe.STRING,stringValue:r.defaultValue},disabled:r.disabled,fieldConfig:{stringConfig:{placeholder:r.placeholder}},fieldId:r.name,fieldType:Oe.STRING,helpText:r.helpText,label:r.label,required:r.required,isSecret:r.isSecret})}function T0(r){return nr.fromPartial({disabled:r.disabled,fieldId:r.name,fieldType:Oe.IMAGE,helpText:r.helpText,label:r.label,required:r.required})}function E0(r){return nr.fromPartial({defaultValue:{fieldType:Oe.PARAGRAPH,stringValue:r.defaultValue},disabled:r.disabled,fieldConfig:{paragraphConfig:{lineHeight:r.lineHeight,placeholder:r.placeholder}},fieldId:r.name,fieldType:Oe.PARAGRAPH,helpText:r.helpText,label:r.label,required:r.required})}function R0(r){return nr.fromPartial({defaultValue:{fieldType:Oe.NUMBER,numberValue:r.defaultValue},disabled:r.disabled,fieldConfig:{numberConfig:{}},fieldId:r.name,fieldType:Oe.NUMBER,helpText:r.helpText,label:r.label,required:r.required})}function O0(r){return nr.fromPartial({defaultValue:{fieldType:Oe.SELECTION,selectionValue:{values:r.defaultValue}},disabled:r.disabled,fieldConfig:{selectionConfig:{choices:r.options,multiSelect:r.multiSelect}},fieldId:r.name,fieldType:Oe.SELECTION,helpText:r.helpText,label:r.label,required:r.required})}function F0(r){return nr.fromPartial({defaultValue:{fieldType:Oe.BOOLEAN,boolValue:r.defaultValue},disabled:r.disabled,fieldId:r.name,fieldType:Oe.BOOLEAN,helpText:r.helpText,label:r.label})}function M0(r){return nr.fromPartial({fieldType:Oe.GROUP,fieldConfig:{groupConfig:{fields:ot(r.fields)}},label:r.label,helpText:r.helpText})}function M(r,e){u.prototype[r]=e}import{ValidateFormResponse as q0}from"@devvit/protos";import{RealtimeSubscriptionStatus as Mv}from"@devvit/protos";var B=Object.freeze({Actor:"devvit-actor",App:"devvit-app",AppUser:"devvit-app-user",AppViewerAuthToken:"devvit-app-viewer-authorization",Caller:"devvit-caller",CallerPortID:"devvit-caller-port-id",Canary:"devvit-canary",Debug:"devvit-debug",GQLHost:"devvit-gql-host",Installation:"devvit-installation",ModPermissions:"devvit-mod-permissions",R2Auth:"devvit-sec-authorization",R2Host:"devvit-r2-host",RemoteHostname:"devvit-remote-hostname",SettingsUri:"devvit-sec-settings-uri",StreamID:"devvit-stream-id",Subreddit:"devvit-subreddit",TraceID:"devvit-trace-id",User:"devvit-user",Version:"devvit-version",Language:"devvit-accept-language",Timezone:"devvit-accept-timezone"}),Fv;(function(r){r.Blocks="blocks",r.EmitSnapshots="emitSnapshots",r.EmitState="emitState",r.Runtime="runtime",r.Surface="surface",r.UseAsync="useAsync",r.UseChannel="useChannel"})(Fv||(Fv={}));function Uv(r){function e(t){let i=r.currentHookIndex,s=r.getCurrentComponentState(),o=r.getPreviousComponentState(),a=r.metadata[B.App]?.values[0];g(a,"useChannel - app is missing from Context");let c=r.metadata[B.Installation]?.values[0];g(c,"useChannel - installation is missing from Context");async function p(I){let A=s[i].channel;if(s[i].active)if(s[i].connected)await r.realtime.send(A,I);else throw Error(`Failed to send to channel '${A}'; it is active but not yet connected`);else throw Error(`Cannot send a message over inactive channel: ${A}`)}function f(){if(!s[i].active){let I=s[i].channel;s[i].active=!0,r.addRealtimeChannel(I)}}function v(){if(s[i].active){let I=s[i].channel;s[i].active=!1,r.removeRealtimeChannel(I)}}function m(I){return async()=>{let A;switch(I.status){case Mv.REALTIME_SUBSCRIBED:s[i].connected=!0,A=t.onSubscribed?.();break;case Mv.REALTIME_UNSUBSCRIBED:s[i].connected=!1,A=t.onUnsubscribed?.();break;default:A=t.onMessage(I.event?.data??{});break}await A}}let y={channel:`${a}:${c}:${t.name}`,active:!1,connected:!1,preventCallback:!1,type:Pt.CHANNEL};i in s?y=s[i]:i in o&&(y=o[i]);let k=r.realtimeEvent;r.isInitialRender?y.active=!1:k&&y.active&&k.event.channel===y.channel&&(y.preventCallback||r.runHook(m(k)),r.rerenderIn(0)),s[i]=y,r.currentHookIndex++;let C=0;return y.active&&y.connected?C=2:y.active&&!y.connected?C=1:!y.active&&y.connected?C=3:!y.active&&!y.connected&&(C=4),{subscribe:f,unsubscribe:v,send:p,status:C}}return e}import{FormFieldType as Vr}from"@devvit/protos";function kc(r){switch(r.fieldType){case Vr.STRING:return r.stringValue;case Vr.IMAGE:return r.stringValue;case Vr.PARAGRAPH:return r.stringValue;case Vr.NUMBER:return r.numberValue;case Vr.BOOLEAN:return r.boolValue;case Vr.SELECTION:return r.selectionValue?.values??[];default:return}}function St(r){return Object.keys(r).reduce((e,t)=>(e[t]=kc(r[t]),e),{})}function Bv(r){function e(t,i){let s=r.currentHookIndex,o=r.getCurrentComponentKey(),a=r.getCurrentComponentState(),c=r.getPreviousComponentState(),p=`form.hook.${o}.${s}`,f={formKey:p,preventSubmit:!1,type:Pt.FORM};s in a?f=a[s]:s in c&&(f=c[s]),a[s]=f,r.forms.set(p,t);let v=r.formSubmittedEvent;return v&&!f.preventSubmit&&v.formId===p&&r.runHook(async()=>{let m=i(St(v.results));m&&m instanceof Promise&&await m,r.rerenderIn(0)}),a[s].preventSubmit=!1,r.currentHookIndex++,p}return e}function Lv(r){function e(t,i){let s=r.currentHookIndex,o=r.getCurrentComponentState(),a=r.getPreviousComponentState(),c=100,p=Math.max(c,i),f={lastRun:void 0,running:!1,preventCallback:!1,type:Pt.INTERVAL};s in o?f=o[s]:s in a&&(f=a[s]);function v(){i<c&&console.error(`useInterval delay must be at least ${c}ms. Your interval of ${i}ms was automatically extended.`);for(let[y,k]of Object.entries(o))if(y!==s.toString()&&k?.type===Pt.INTERVAL&&k?.running)throw new Error("Only one useInterval hook may be running at a time");o[s]={running:!0,lastRun:o[s]?.lastRun??Date.now(),preventCallback:!1,type:Pt.INTERVAL},r.rerenderIn(p)}function m(){o[s].running=!1,o[s].lastRun=void 0,o[s].preventCallback=!1}return r.isEffectRender&&f.running&&(f.preventCallback||(f.lastRun===void 0||f.lastRun+p<Date.now())&&r.runHook(async()=>{let y=t();y&&y instanceof Promise&&await y,f.lastRun=Date.now()}),r.rerenderIn(p)),f.preventCallback=!1,o[s]=f,r.currentHookIndex++,{start:v,stop:m}}return e}function Dv(r){function e(t){let i=r.currentHookIndex,s=r.getCurrentComponentState(),o=r.getPreviousComponentState();if(i in s)return r.currentHookIndex++,[s[i],a];if(r.isInitialRender||!(i in o)){let c=t instanceof Function?t():t;if(c instanceof Promise)throw(async()=>{s[i]=await c,r.currentHookIndex=0})();s[i]=c}else s[i]=o[i];function a(c){if(r.isRendering)throw new Error("Cannot call setState while rendering.");s[i]=c instanceof Function?c(s[i]):c}return r.currentHookIndex++,[s[i],a]}return e}var Ct,sd,_v,od,Nv,Jr=class{constructor(){l(this,sd);l(this,od);l(this,Ct,{});d(this,Ct,u.assets)}getURL(e){return typeof e=="string"?b(this,sd,_v).call(this,e):b(this,od,Nv).call(this,e)}};Ct=new WeakMap,sd=new WeakSet,_v=function(e){let t=n(this,Ct)[e];if(t)return t;try{return new URL(e),e}catch{return""}},od=new WeakSet,Nv=function(e){let t={},i=[];if(n(this,Ct))for(let s of e)n(this,Ct)[s]?t[s]=n(this,Ct)[s]:i.push(s);else i=e;if(i.length>0)throw new Error(`The following assets were missing from the assets list: ${i.join(", ")}`);return t};var It,$r=class{constructor(e){l(this,It,void 0);d(this,It,e)}async get(e){let{messages:t}=await u.kvStorePlugin.Get({keys:[e]},n(this,It));try{if(t[e])return JSON.parse(t[e])}catch{return}}async put(e,t){let i={};i[e]=JSON.stringify(t),await u.kvStorePlugin.Put({messages:i},n(this,It))}async delete(e){await u.kvStorePlugin.Del({keys:[e]},n(this,It))}async list(){let{keys:e}=await u.kvStorePlugin.List({filter:"*"},n(this,It));return e}};It=new WeakMap;var $n,Kr=class{constructor(e){l(this,$n,void 0);d(this,$n,e)}async upload(e){let t=await u.mediaPlugin.Upload(e,n(this,$n));if(!t.mediaId)throw new Error("unable to get mediaId via uploads");return Promise.resolve({mediaId:t.mediaId,mediaUrl:t.mediaUrl})}};$n=new WeakMap;var Kn,Xr=class{constructor(e){l(this,Kn,void 0);d(this,Kn,e)}async add(e){await u.modLogPlugin.Add(e,n(this,Kn))}};Kn=new WeakMap;var P,Xn,Yr=class{constructor(e){l(this,P,void 0);l(this,Xn,void 0);d(this,P,e),d(this,Xn,new dd(e))}get modMail(){return n(this,Xn)}getSubredditById(e){return he.getById(ge(e),n(this,P))}getSubredditByName(e){return he.getByName(e,n(this,P))}addSubredditRemovalReason(e,t){return he.addRemovalReason(e,t.title,t.message,n(this,P))}getSubredditRemovalReasons(e){return he.getRemovalReasons(e,n(this,P))}getCurrentSubreddit(){return he.getFromMetadata(n(this,P))}getPostById(e){return z.getById(ge(e),n(this,P))}submitPost(e){return z.submit(e,n(this,P))}crosspost(e){return z.crosspost(e,n(this,P))}getUserById(e){return w.getById(ge(e),n(this,P))}getCollectionById(e){return Zr.getCollectionById({collectionId:e},n(this,P))}createCollection(e){return Zr.create(e,n(this,P))}getCollectionsForSubreddit(e){return Zr.getCollectionsForSubreddit({subredditId:e},n(this,P))}getUserByUsername(e){return w.getByUsername(e,n(this,P))}getCurrentUser(){return w.getFromMetadata(B.User,n(this,P))}getAppUser(){return w.getFromMetadata(B.AppUser,n(this,P))}getSnoovatarUrl(e){return w.getSnoovatarUrl(e,n(this,P))}getCommentById(e){return X.getById(ge(e),n(this,P))}getComments(e){return X.getComments(e,n(this,P))}getCommentsByUser(e){return X.getCommentsByUser(e,n(this,P))}submitComment(e){return X.submit({...e,id:ge(e.id)},n(this,P))}getControversialPosts(e){return z.getControversialPosts(e,n(this,P))}getTopPosts(e){return z.getTopPosts(e,n(this,P))}getHotPosts(e){return z.getHotPosts(e,n(this,P))}getNewPosts(e){return z.getNewPosts(e,n(this,P))}getRisingPosts(e){return z.getRisingPosts(e,n(this,P))}getPostsByUser(e){return z.getPostsByUser(e,n(this,P))}getCommentsAndPostsByUser(e){return w.getOverview(e,n(this,P))}getModerationLog(e){return ad(e,n(this,P))}getApprovedUsers(e){return w.getSubredditUsersByType({type:"contributors",...e},n(this,P))}approveUser(e,t){return w.createRelationship({username:e,subredditName:t,type:"contributor"},n(this,P))}removeUser(e,t){return w.removeRelationship({username:e,subredditName:t,type:"contributor"},n(this,P))}getWikiContributors(e){return w.getSubredditUsersByType({type:"wikicontributors",...e},n(this,P))}addWikiContributor(e,t){return w.createRelationship({username:e,subredditName:t,type:"wikicontributor"},n(this,P))}removeWikiContributor(e,t){return w.removeRelationship({username:e,subredditName:t,type:"wikicontributor"},n(this,P))}getBannedUsers(e){return w.getSubredditUsersByType({type:"banned",...e},n(this,P))}banUser(e){return w.createRelationship({username:e.username,subredditName:e.subredditName,type:"banned",banReason:e.reason,banMessage:e.message,note:e.note,duration:e.duration},n(this,P))}unbanUser(e,t){return w.removeRelationship({username:e,subredditName:t,type:"banned"},n(this,P))}getBannedWikiContributors(e){return w.getSubredditUsersByType({type:"wikibanned",...e},n(this,P))}banWikiContributor(e){return w.createRelationship({...e,type:"wikibanned"},n(this,P))}unbanWikiContributor(e,t){return w.removeRelationship({username:e,subredditName:t,type:"wikibanned"},n(this,P))}getModerators(e){return w.getSubredditUsersByType({type:"moderators",...e},n(this,P))}inviteModerator(e){return w.createRelationship({type:"moderator_invite",subredditName:e.subredditName,username:e.subredditName,permissions:e.permissions??[]},n(this,P))}revokeModeratorInvite(e,t){return w.removeRelationship({username:e,subredditName:t,type:"moderator_invite"},n(this,P))}removeModerator(e,t){return w.removeRelationship({type:"moderator",subredditName:t,username:e},n(this,P))}setModeratorPermissions(e,t,i){return w.setModeratorPermissions(e,t,i,n(this,P))}getMutedUsers(e){return w.getSubredditUsersByType({type:"muted",...e},n(this,P))}muteUser(e){return w.createRelationship({...e,type:"muted"},n(this,P))}unmuteUser(e,t){return w.removeRelationship({username:e,subredditName:t,type:"muted"},n(this,P))}getModNotes(e){return Fe.get(e,n(this,P))}deleteModNote(e){return Fe.delete(e,n(this,P))}addModNote(e){let t={...e,redditId:ge(e.redditId)};return Fe.add(t,n(this,P))}addRemovalNote(e){return Fe.addRemovalNote(e,n(this,P))}async sendPrivateMessage(e){return sr.send(e,n(this,P))}async sendPrivateMessageAsSubreddit(e){return sr.sendAsSubreddit(e,n(this,P))}async approve(e){if(kt(e))return X.approve(e,n(this,P));if(rr(e))return z.approve(e,n(this,P));throw new Error("id must start with either t1_ or t3_")}async remove(e,t){if(kt(e))return X.remove(e,t,n(this,P));if(rr(e))return z.remove(e,t,n(this,P));throw new Error("id must start with either t1_ or t3_")}async getPostFlairTemplates(e){return ae.getPostFlairTemplates(e,n(this,P))}async getUserFlairTemplates(e){return ae.getUserFlairTemplates(e,n(this,P))}async createPostFlairTemplate(e){return ae.createPostFlairTemplate(e,n(this,P))}async createUserFlairTemplate(e){return ae.createUserFlairTemplate(e,n(this,P))}async editFlairTemplate(e){return ae.editFlairTemplate(e,n(this,P))}async deleteFlairTemplate(e,t){return ae.deleteFlairTemplate(e,t,n(this,P))}async setUserFlair(e){return Me.setUserFlair(e,n(this,P))}async removeUserFlair(e,t){return Me.removeUserFlair(e,t,n(this,P))}async setPostFlair(e){return Me.setPostFlair(e,n(this,P))}async removePostFlair(e,t){return Me.removePostFlair(e,fe(t),n(this,P))}async getWidgets(e){return re.getWidgets(e,n(this,P))}async deleteWidget(e,t){return re.delete(e,t,n(this,P))}async addWidget(e){return re.add(e,n(this,P))}async reorderWidgets(e,t){return re.reorder(e,t,n(this,P))}async getWikiPage(e,t){return ve.getPage(e,t,n(this,P))}async getWikiPages(e){return ve.getPages(e,n(this,P))}async createWikiPage(e){return ve.createPage(e,n(this,P))}async updateWikiPage(e){return ve.updatePage(e,n(this,P))}getWikiPageRevisions(e){return ve.getPageRevisions(e,n(this,P))}async revertWikiPage(e,t,i){return ve.revertPage(e,t,i,n(this,P))}async getWikiPageSettings(e,t){return ve.getPageSettings(e,t,n(this,P))}async updateWikiPageSettings(e){return ve.updatePageSettings(e,n(this,P))}async addEditorToWikiPage(e,t,i){return ve.addEditor(e,t,i,n(this,P))}async removeEditorFromWikiPage(e,t,i){return ve.removeEditor(e,t,i,n(this,P))}getMessages(e){return sr.getMessages(e,n(this,P))}markAllMessagesAsRead(){return sr.markAllAsRead(n(this,P))}report(e,t){return u.redditAPIPlugins.LinksAndComments.Report({reason:t.reason,thingId:e.id,srName:e.subredditName,usernames:e.authorName},n(this,P))}getModQueue(e){return he.aboutLocation({...e,location:"modqueue"},n(this,P))}getReports(e){return he.aboutLocation({...e,location:"reports"},n(this,P))}getSpam(e){return he.aboutLocation({...e,location:"spam"},n(this,P))}getUnmoderated(e){return he.aboutLocation({...e,location:"unmoderated"},n(this,P))}getEdited(e){return he.aboutLocation({...e,location:"edited"},n(this,P))}getVaultByAddress(e){return Hv(e,n(this,P))}getVaultByUserId(e){return jv(ge(e),n(this,P))}};P=new WeakMap,Xn=new WeakMap;import{RedisKeyScope as Pc}from"@devvit/protos";var E,R,O,Sc=class{constructor(e,t,i){l(this,E,void 0);l(this,R,void 0);l(this,O,void 0);d(this,E,e),d(this,R,t),d(this,O,i)}async get(e){return await n(this,E).Get({key:e,transactionId:n(this,R)},n(this,O)),this}async multi(){await n(this,E).Multi(n(this,R),n(this,O))}async set(e,t,i){let s;return i?.expiration&&(s=Math.floor((i.expiration.getTime()-Date.now())/1e3),s<1&&(s=1)),await n(this,E).Set({key:e,value:t,nx:i?.nx===!0,xx:i?.xx===!0,expiration:s||0,transactionId:n(this,R)},n(this,O)),this}async del(...e){return await n(this,E).Del({keys:e,transactionId:n(this,R)},n(this,O)),this}async type(e){return await n(this,E).Type({key:e,transactionId:n(this,R)},n(this,O)),this}async exec(){let e=await n(this,E).Exec(n(this,R),n(this,O)),t=[];for(let i of e.response)i.members?t.push(i.members):i.nil!==void 0?t.push(null):i.num!==void 0?t.push(i.num):i.values!==void 0?t.push(i.values.values):i.str!==void 0&&t.push(i.str);return t}async discard(){await n(this,E).Discard(n(this,R),n(this,O))}async watch(...e){return await n(this,E).Watch({keys:e,transactionId:n(this,R)},n(this,O)),this}async unwatch(){return await n(this,E).Unwatch(n(this,R),n(this,O)),this}async getRange(e,t,i){return await n(this,E).GetRange({key:e,start:t,end:i,transactionId:n(this,R)},n(this,O)),this}async setRange(e,t,i){return await n(this,E).SetRange({key:e,offset:t,value:i,transactionId:n(this,R)},n(this,O)),this}async strlen(e){return await n(this,E).Strlen({key:e,transactionId:n(this,R)},n(this,O)),this}async mget(e){return await n(this,E).MGet({keys:e,transactionId:n(this,R)},n(this,O)),this}async mset(e){let t=Object.entries(e).map(([i,s])=>({key:i,value:s}));return await n(this,E).MSet({kv:t,transactionId:n(this,R)},n(this,O)),this}async incrBy(e,t){return await n(this,E).IncrBy({key:e,value:t,transactionId:n(this,R)},n(this,O)),this}async expire(e,t){return await n(this,E).Expire({key:e,seconds:t,transactionId:n(this,R)},n(this,O)),this}async expireTime(e){return await n(this,E).ExpireTime({key:e,transactionId:n(this,R)},n(this,O)),this}async zAdd(e,...t){return await n(this,E).ZAdd({key:e,members:t,transactionId:n(this,R)},n(this,O)),this}async zScore(e,t){return await n(this,E).ZScore({key:{key:e,transactionId:n(this,R)},member:t},n(this,O)),this}async zRank(e,t){return await n(this,E).ZRank({key:{key:e,transactionId:n(this,R)},member:t},n(this,O)),this}async zIncrBy(e,t,i){return await n(this,E).ZIncrBy({key:e,member:t,value:i,transactionId:n(this,R)},n(this,O)),this}async zScan(e,t,i,s){let o={key:e,cursor:t,pattern:i,count:s,transactionId:n(this,R)};return await n(this,E).ZScan(o,n(this,O)),this}async zCard(e){return await n(this,E).ZCard({key:e,transactionId:n(this,R)},n(this,O)),this}async zRange(e,t,i,s){let o={rev:!1,byLex:!1,byScore:!1,offset:0,count:1e3};return s?.reverse&&(o.rev=s.reverse),s?.by==="lex"?o.byLex=!0:s?.by==="score"&&(o.byScore=!0),await n(this,E).ZRange({key:{key:e,transactionId:n(this,R)},start:t+"",stop:i+"",...o},n(this,O)),this}async zRem(e,t){return await n(this,E).ZRem({key:{key:e,transactionId:n(this,R)},members:t},n(this,O)),this}async zRemRangeByLex(e,t,i){return await n(this,E).ZRemRangeByLex({key:{key:e,transactionId:n(this,R)},min:t,max:i},n(this,O)),this}async zRemRangeByRank(e,t,i){return await n(this,E).ZRemRangeByRank({key:{key:e,transactionId:n(this,R)},start:t,stop:i},n(this,O)),this}async zRemRangeByScore(e,t,i){return await n(this,E).ZRemRangeByScore({key:{key:e,transactionId:n(this,R)},min:t,max:i},n(this,O)),this}async hgetall(e){return await n(this,E).HGetAll({key:e,transactionId:n(this,R)},n(this,O)),this}async hget(e,t){return await n(this,E).HGet({key:e,field:t,transactionId:n(this,R)},n(this,O)),this}async hset(e,t){let i=Object.entries(t).map(([s,o])=>({field:s,value:o}));return await n(this,E).HSet({key:e,fv:i,transactionId:n(this,R)},n(this,O)),this}async hincrby(e,t,i){return await n(this,E).HIncrBy({key:e,field:t,value:i,transactionId:n(this,R)},n(this,O)),this}async hdel(e,t){return await n(this,E).HDel({key:e,fields:t,transactionId:n(this,R)},n(this,O)),this}async hscan(e,t,i,s){let o={key:e,cursor:t,pattern:i,count:s,transactionId:n(this,R)};return await n(this,E).HScan(o,n(this,O)),this}async hkeys(e){return await n(this,E).HKeys({key:e,transactionId:n(this,R)},n(this,O)),this}async hlen(e){return await n(this,E).HLen({key:e,transactionId:n(this,R)},n(this,O)),this}};E=new WeakMap,R=new WeakMap,O=new WeakMap;var F,Qr,Cc=class Cc{constructor(e,t=void 0,i=Pc.INSTALLATION){l(this,F,void 0);l(this,Qr,void 0);d(this,F,e),d(this,Qr,t),this.scope=i,this.global=i===Pc.INSTALLATION?new Cc(n(this,F),n(this,Qr),Pc.GLOBAL):this}get storage(){return n(this,Qr)||u.redisPlugin}async watch(...e){let t=await this.storage.Watch({keys:e},n(this,F));return new Sc(this.storage,t,n(this,F))}async get(e){let t=await this.storage.Get({key:e,scope:this.scope},n(this,F));return t!==null?t.value??void 0:t}async set(e,t,i){let s;return i?.expiration&&(s=Math.floor((i.expiration.getTime()-Date.now())/1e3),s<1&&(s=1)),(await this.storage.Set({key:e,value:t,nx:i?.nx===!0&&!i.xx,xx:i?.xx===!0&&!i.nx,expiration:s||0,scope:this.scope},n(this,F))).value}async del(...e){await this.storage.Del({keys:e,scope:this.scope},n(this,F))}async incrBy(e,t){return(await this.storage.IncrBy({key:e,value:t,scope:this.scope},n(this,F))).value}async getRange(e,t,i){let s=await this.storage.GetRange({key:e,start:t,end:i,scope:this.scope},n(this,F));return s!==null?s.value:s}async setRange(e,t,i){return(await this.storage.SetRange({key:e,offset:t,value:i,scope:this.scope},n(this,F))).value}async strlen(e){return(await this.storage.Strlen({key:e,scope:this.scope},n(this,F))).value}async expire(e,t){await this.storage.Expire({key:e,seconds:t,scope:this.scope},n(this,F))}async expireTime(e){return(await this.storage.ExpireTime({key:e,scope:this.scope},n(this,F))).value}async zAdd(e,...t){return(await this.storage.ZAdd({key:e,members:t,scope:this.scope},n(this,F))).value}async zRange(e,t,i,s){let o={rev:!1,byLex:!1,byScore:!1,offset:0,count:1e3};return s?.reverse&&(o.rev=s.reverse),s?.by==="lex"?o.byLex=!0:s?.by==="score"?o.byScore=!0:(o.offset=0,o.count=0),(await this.storage.ZRange({key:{key:e},start:t+"",stop:i+"",...o,scope:this.scope},n(this,F))).members}async zRem(e,t){return(await this.storage.ZRem({key:{key:e},members:t,scope:this.scope},n(this,F))).value}async zRemRangeByLex(e,t,i){return(await this.storage.ZRemRangeByLex({key:{key:e},min:t,max:i,scope:this.scope},n(this,F))).value}async zRemRangeByRank(e,t,i){return(await this.storage.ZRemRangeByRank({key:{key:e},start:t,stop:i,scope:this.scope},n(this,F))).value}async zRemRangeByScore(e,t,i){return(await this.storage.ZRemRangeByScore({key:{key:e},min:t,max:i,scope:this.scope},n(this,F))).value}async zScore(e,t){let i=await this.storage.ZScore({key:{key:e},member:t,scope:this.scope},n(this,F));return i!==null?i.value:i}async zRank(e,t){let i=await this.storage.ZRank({key:{key:e},member:t,scope:this.scope},n(this,F));return i!==null?i.value:i}async zIncrBy(e,t,i){let s=await this.storage.ZIncrBy({key:e,member:t,value:i,scope:this.scope},n(this,F));return s!==null?s.value:s}async mget(e){let t=await this.storage.MGet({keys:e,scope:this.scope},n(this,F));return t!==null?t.values.map(i=>i||null):t}async mset(e){let t=Object.entries(e).map(([i,s])=>({key:i,value:s}));await this.storage.MSet({kv:t,scope:this.scope},n(this,F))}async zCard(e){let t=await this.storage.ZCard({key:e,scope:this.scope},n(this,F));return t!==null?t.value:t}async zScan(e,t,i,s){let o={key:e,cursor:t,pattern:i,count:s,scope:this.scope};return await this.storage.ZScan(o,n(this,F))}async type(e){let t=await this.storage.Type({key:e,scope:this.scope},n(this,F));return t!==null?t.value:t}async hget(e,t){let i=await this.storage.HGet({key:e,field:t,scope:this.scope},n(this,F));return i!==null?i.value??void 0:i}async hset(e,t){let i=Object.entries(t).map(([o,a])=>({field:o,value:a}));return(await this.storage.HSet({key:e,fv:i,scope:this.scope},n(this,F))).value}async hgetall(e){let t=await this.storage.HGetAll({key:e,scope:this.scope},n(this,F));return t!==null?t.fieldValues:t}async hdel(e,t){return(await this.storage.HDel({key:e,fields:t,scope:this.scope},n(this,F))).value}async hscan(e,t,i,s){let o={key:e,cursor:t,pattern:i,count:s,scope:this.scope};return await this.storage.HScan(o,n(this,F))}async hkeys(e){let t=await this.storage.HKeys({key:e,scope:this.scope},n(this,F));return t!==null?t.keys:t}async hincrby(e,t,i){return(await this.storage.HIncrBy({key:e,field:t,value:i,scope:this.scope},n(this,F))).value}async hlen(e){return(await this.storage.HLen({key:e,scope:this.scope})).value}};F=new WeakMap,Qr=new WeakMap;var ei=Cc;var or,ti=class{constructor(e){l(this,or,void 0);d(this,or,e)}async runJob(e){return(await u.schedulerPlugin.Schedule({action:{type:e.name,data:e.data},cron:"cron"in e?e.cron:void 0,when:"runAt"in e?e.runAt:void 0},n(this,or))).id}async cancelJob(e){await u.schedulerPlugin.Cancel({id:e},n(this,or))}async listJobs(){return(await u.schedulerPlugin.List({after:new Date(0),before:new Date(Date.now()+31536e7)},n(this,or))).actions.map(t=>(g(t.request?.action,"Scheduled job is malformed"),"when"in t.request&&t.request.when!=null?{id:t.id,name:t.request.action.type,runAt:t.request.when,data:t.request.action.data}:{id:t.id,name:t.request.action.type,cron:t.request.cron??"",data:t.request.action}))}};or=new WeakMap;var Zn,ri=class{constructor(e){l(this,Zn,void 0);d(this,Zn,e)}async get(e){return(await this.getAll())[e]}async getAll(){let t=await u.settingsPlugin.GetSettings({},n(this,Zn));if(!t.installationSettings)throw new Error("Could not get installation settings");if(!t.appSettings)throw new Error("Could not get app settings");return{...Wv(t.installationSettings.settings,u.installationSettings),...Wv(t.appSettings.settings,u.appSettings)}}};Zn=new WeakMap;function Wv(r,e){let t=Object.keys(r).reduce((i,s)=>(i[s]=kc(r[s]),i),{});return e&&Gv(t,e),t}function Gv(r,e){for(let t of e)t.type==="group"?Gv(r,t.fields):!(t.name in r)&&"defaultValue"in t&&(r[t.name]=t.defaultValue)}import{EffectType as Ic,Form as B0,ToastAppearance as zv}from"@devvit/protos";var ar,ii,ld=class{constructor(e){l(this,ar,[]);l(this,ii,void 0);d(this,ii,e)}showForm(e,t){let i=u.formDefinitions.get(e);if(!i&&n(this,ii)){let a=n(this,ii).forms.get(e);a&&(i={form:a,onSubmit:()=>{}})}if(!i)throw new Error("Form does not exist. Make sure you have added it using Devvit.createForm at the root of your app.");let s=i.form instanceof Function?i.form(t??{}):i.form,o=B0.fromPartial({id:e,title:s.title,acceptLabel:s.acceptLabel,cancelLabel:s.cancelLabel,shortDescription:s.description});ir(s.fields),o.fields=ot(s.fields),n(this,ar).push({type:Ic.EFFECT_SHOW_FORM,showForm:{form:o}})}showToast(e){let t;e instanceof Object?t={text:e.text,appearance:e.appearance==="success"?zv.SUCCESS:zv.NEUTRAL}:t={text:e},n(this,ar).push({type:Ic.EFFECT_SHOW_TOAST,showToast:{toast:t}})}navigateTo(e){let t;typeof e=="string"?t=new URL(e).toString():t=new URL(e.permalink,"https://www.reddit.com").toString(),n(this,ar).push({type:Ic.EFFECT_NAVIGATE_TO_URL,navigateToUrl:{url:t}})}get __effects(){return n(this,ar)}};ar=new WeakMap,ii=new WeakMap;var Tc={now(){return new Date}};function Vv(r){return`__autocache__${r}`}function Jv(r){return`__lock__${r}`}var L0=300,D0=1e3,ud=5e3,wc=3,$v=.1,Kv=1e3,_0=3e4;function Xv(r){if(r.error)throw new Error(r.error);return r.value}var wt,At,Ue,ni,md,Zv,pd,Yv,fd,Qv,Yn,Ac,gd,ey,hd,ty,Qn,xc,vd,ry,cd=class{constructor(e,t,i=Tc){l(this,md);l(this,pd);l(this,fd);l(this,Yn);l(this,gd);l(this,hd);l(this,Qn);l(this,vd);l(this,wt,void 0);l(this,At,{});l(this,Ue,void 0);l(this,ni,void 0);d(this,wt,e),d(this,ni,t),d(this,Ue,i)}async cache(e,t){d(this,At,n(this,ni).__cache=n(this,ni).__cache??{}),b(this,vd,ry).call(this,t);let i=b(this,md,Zv).call(this,t.key);if(i!==void 0)return i;let s=await b(this,Qn,xc).call(this,t.key),o=await b(this,pd,Yv).call(this,t,s,e);return Xv(o)}};wt=new WeakMap,At=new WeakMap,Ue=new WeakMap,ni=new WeakMap,md=new WeakSet,Zv=function(e){let t=n(this,At)[e];if(t){let i=n(this,Ue).now().getTime(),s=t?.error&&t?.errorTime&&t.errorCount<wc&&Math.random()<$v&&t.errorTime+Kv<i;if(t?.expires&&t.expires<i&&t.checkedAt+Kv<i||s){delete n(this,At)[e];return}else return Xv(t)}},pd=new WeakSet,Yv=async function(e,t,i){let s=t?.expires,o=s?b(this,hd,ty).call(this,s):1;return!t||t?.error&&t.errorCount<wc&&$v>Math.random()||o>Math.random()?b(this,fd,Qv).call(this,e,t,i):t},fd=new WeakSet,Qv=async function(e,t,i){let s=Jv(e.key),o=n(this,Ue).now().getTime(),a=new Date(o+e.ttl/2);if(await n(this,wt).set(s,"1",{expiration:a,nx:!0}))return b(this,gd,ey).call(this,e.key,t,i,e.ttl);if(t)return t;{let p=n(this,Ue).now();return b(this,Yn,Ac).call(this,p,e.key,e.ttl)}},Yn=new WeakSet,Ac=async function(e,t,i){let s=Math.min(i,D0),o=await b(this,Qn,xc).call(this,t);if(o)return o;if(n(this,Ue).now().getTime()-e.getTime()>=s)throw new Error(`Cache request timed out trying to get data at key: ${t}`);return await new Promise(a=>setTimeout(a,L0)),b(this,Yn,Ac).call(this,e,t,i)},gd=new WeakSet,ey=async function(e,t,i,s){let o=n(this,Ue).now().getTime()+s;t=t??{value:null,expires:o,errorCount:0,error:null,errorTime:null,checkedAt:0};try{t.value=await i(),t.error=null,t.errorCount=0,t.errorTime=null}catch(a){t.value=null,t.error=a.message??"Unknown error",t.errorTime=n(this,Ue).now().getTime(),t.errorCount++}return n(this,At)[e]=t,await n(this,wt).set(Vv(e),JSON.stringify(t),{expiration:new Date(o+_0)}),t.error&&t.errorCount<wc&&await n(this,wt).del(Jv(e)),t},hd=new WeakSet,ty=function(e){let t=n(this,Ue).now().getTime(),i=e-t;return i<0?1:i<1e3?.1:i<2e3?.01:i<3e3?.001:0},Qn=new WeakSet,xc=async function(e){let t=await n(this,wt).get(Vv(e));if(t){let i=JSON.parse(t);return i.checkedAt=n(this,Ue).now().getTime(),n(this,At)[e]=i,i}},vd=new WeakSet,ry=function(e){e.ttl<ud&&(console.warn(`Cache TTL cannot be less than ${ud} milliseconds! Updating ttl value of ${e.ttl} to ${ud}.`),e.ttl=ud)};function iy(r,e,t=Tc){let i=new cd(r,e,t);return i.cache.bind(i)}var es,si=class{constructor(e){l(this,es,void 0);d(this,es,e)}async send(e,t){await u.realtimePlugin.Send({channel:e,data:t},n(this,es))}};es=new WeakMap;function Be({metadata:r,ui:e,hooks:t,reconciler:i}){let s=new Xr(r),o=new $r(r),a=new ei(r),c=iy(a,i?i.state:{}),p=new Yr(r),f=new ti(r),v=new ri(r),m=e?new ld(i):void 0,y=new Kr(r),k=new Jr,C=new si(r),I=t&&i?Dv(i):void 0,A=t&&i?Lv(i):void 0,U=t&&i?Bv(i):void 0,ue=t&&i?Uv(i):void 0;return{modLog:s,kvStore:o,redis:a,reddit:p,scheduler:f,settings:v,media:y,assets:k,realtime:C,get useForm(){return U??(()=>{throw new Error("useForm() is unavailable")})},get cache(){return c??(()=>{throw new Error("cache() is unavailable")})},get useState(){return I??(()=>{throw new Error("useState() is unavailable")})},get useInterval(){return A??(()=>{throw new Error("useInterval() is unavailable")})},get useChannel(){return ue??(()=>{throw new Error("useChannel() is unavailable")})},get ui(){if(!m)throw new Error("ui client is not available");return m}}}function de(r,e,t){let i=r[B.Subreddit]?.values[0];g(i,"subreddit is missing from Context");let s=r[B.AppUser]?.values[0];g(s,"appAccountId is missing from Context");let o=r[B.User]?.values[0],a=N0(r);return{appAccountId:s,subredditId:i,userId:o,postId:e,commentId:t,debug:a,toJSON(){return{appAccountId:s,subredditId:i,userId:o,postId:e,commentId:t,debug:a}}}}function N0(r){let e={blocks:void 0,emitSnapshots:void 0,emitState:void 0,runtime:void 0,surface:void 0,useAsync:void 0,useChannel:void 0},t={};for(let s in e)t[s.toLowerCase()]=s;let i={metadata:r};for(let s of(r[B.Debug]?.values??[]).join().split(",")){let[o,a]=s.split("=");o&&(o=o.trim(),a=a?.trim(),o.toLowerCase()in t?o=t[o.toLowerCase()]:console.warn(`[api] unknown devvit-debug header "${o}"`),i[o]??(i[o]=a||`${!0}`),console.info(`[api] set devvit-debug ${o}=${i[o]}`))}return i}async function yd(r,e,t){if(!e)throw new Error("Settings were not defined.");let i=q0.fromPartial({success:!0,errors:{}}),s=St(r.fieldValues),o=e.flatMap(a=>a.type==="group"?a.fields:a);return await Promise.all(o.map(async a=>{let c=a.name;if(c&&a.type!=="group"&&a.onValidate){let p=s[c],f=a.onValidate,v=Object.assign(Be({metadata:t}),de(t)),m=await f({value:p,isEditing:r.editing},v);m&&(i.success=!1,i.errors[c]=m)}})),i}async function W0(){if(!u.appSettings)throw new Error("App settings were not defined.");return j0.fromPartial({fields:{fields:ot(u.appSettings)}})}async function G0(r,e){return yd(r,u.appSettings,e)}function ny(r){r.provides(H0),M("GetAppSettingsFields",W0),M("ValidateAppForm",G0)}import{CustomPostDefinition as K0}from"@devvit/protos";import{BlockRenderEventType as Hc,EffectType as ky}from"@devvit/protos";function oi(r){return r.__effects}function sy(){let r=new Set;return e=>{let t=e,i=1;for(;r.has(t);)t=`${e}.${i++}`;return r.add(t),t}}import{BlockActionType as qc,BlockAnimationDirection as py,BlockAnimationLoopMode as fy,BlockAnimationType as gy,BlockAvatarBackground as hy,BlockAvatarFacing as vy,BlockAvatarSize as xt,BlockBorderWidth as kd,BlockButtonAppearance as Tt,BlockButtonSize as Oc,BlockFullSnooSize as ai,BlockGap as Pd,BlockHorizontalAlignment as Fc,BlockIconSize as Sd,BlockImageResizeMode as ts,BlockPadding as rs,BlockRadius as is,BlockSizeUnit as Mc,BlockSpacerShape as Uc,BlockSpacerSize as Cd,BlockStackDirection as Bc,BlockTextOutline as Lc,BlockTextOverflow as Dc,BlockTextSize as di,BlockTextStyle as _c,BlockTextWeight as yy,BlockType as Le,BlockVerticalAlignment as Nc}from"@devvit/protos";var Ec={transparent:"transparent",black:"#000000",white:"#ffffff","coolgray-950":"#04090A","coolgray-900":"#0B1416","coolgray-850":"#0F1A1C","coolgray-800":"#131F23","coolgray-750":"#1A282D","coolgray-700":"#223237","coolgray-650":"#2A3C42","coolgray-600":"#33464C","coolgray-550":"#4B6066","coolgray-525":"#576F76","coolgray-500":"#667A80","coolgray-450":"#82959B","coolgray-400":"#A0B0B5","coolgray-350":"#B8C5C9","coolgray-300":"#D2DADD","coolgray-250":"#DAE0E3","coolgray-200":"#E2E7E9","coolgray-150":"#EAEDEF","coolgray-100":"#F2F4F5","coolgray-50":"#F9FAFA","puregray-950":"#080808","puregray-900":"#131313","puregray-850":"#181818","puregray-800":"#1E1E1E","puregray-750":"#272727","puregray-700":"#303030","puregray-650":"#393939","puregray-600":"#434343","puregray-550":"#5C5C5C","puregray-500":"#767676","puregray-450":"#919191","puregray-400":"#ACACAC","puregray-350":"#C3C3C3","puregray-300":"#D6D6D6","puregray-250":"#DDDDDD","puregray-200":"#E4E4E4","puregray-150":"#EBEBEB","puregray-100":"#F2F2F2","puregray-50":"#F8F8F8","orangered-950":"#190600","orangered-900":"#340E00","orangered-800":"#4F1500","orangered-700":"#721F00","orangered-600":"#962900","orangered-500":"#D93A00","orangered-400":"#FE7C53","orangered-300":"#FFBEA6","orangered-200":"#FFD5C6","orangered-100":"#FFEDE5","orangered-50":"#FFF6F3","red-950":"#1C0004","red-900":"#3A0008","red-800":"#58000C","red-700":"#7E0011","red-600":"#A50016","red-500":"#EB001F","red-400":"#FF6E80","red-300":"#FFADB8","red-200":"#FFCCD2","red-100":"#FFEAED","red-50":"#FFF6F7","sakurapink-950":"#1A0011","sakurapink-900":"#360024","sakurapink-800":"#530037","sakurapink-700":"#770051","sakurapink-600":"#9B006A","sakurapink-500":"#E00096","sakurapink-400":"#FF55BD","sakurapink-300":"#FFA5E3","sakurapink-200":"#FFC5EC","sakurapink-100":"#FFE5F9","sakurapink-50":"#FFF3FB","berrypurple-950":"#16001F","berrypurple-900":"#2E0041","berrypurple-800":"#470062","berrypurple-700":"#66008C","berrypurple-600":"#8700B5","berrypurple-500":"#BC0EFF","berrypurple-400":"#D55EFF","berrypurple-300":"#EEA7FF","berrypurple-200":"#F2C8FF","berrypurple-100":"#FBE6FF","berrypurple-50":"#FCF4FF","periwinkle-950":"#0D0B1F","periwinkle-900":"#1A1741","periwinkle-800":"#272262","periwinkle-700":"#372F8C","periwinkle-600":"#453BB5","periwinkle-500":"#6A5CFF","periwinkle-400":"#988EFF","periwinkle-300":"#C3BDFF","periwinkle-200":"#D8D4FF","periwinkle-100":"#ECEAFF","periwinkle-50":"#F7F6FF","alienblue-950":"#000C1D","alienblue-900":"#00183D","alienblue-800":"#00255D","alienblue-700":"#003584","alienblue-600":"#0045AC","alienblue-500":"#1870F4","alienblue-400":"#629FFF","alienblue-300":"#A7CCFF","alienblue-200":"#C6DCFF","alienblue-100":"#E4EFFF","alienblue-50":"#F3F7FF","lightblue-950":"#000D12","lightblue-900":"#001C26","lightblue-800":"#002A3A","lightblue-700":"#003F56","lightblue-600":"#005472","lightblue-500":"#007FAE","lightblue-400":"#47B0DB","lightblue-300":"#95DCFB","lightblue-200":"#B6E9FF","lightblue-100":"#D9F6FF","lightblue-50":"#ECFAFF","mintgreen-950":"#00100E","mintgreen-900":"#001E1B","mintgreen-800":"#002E28","mintgreen-700":"#00443C","mintgreen-600":"#005A4F","mintgreen-500":"#008675","mintgreen-400":"#45B9AB","mintgreen-300":"#96E1D8","mintgreen-200":"#B7ECE5","mintgreen-100":"#DAF7F4","mintgreen-50":"#ECFBF9","kiwigreen-950":"#021000","kiwigreen-900":"#032200","kiwigreen-800":"#053200","kiwigreen-700":"#084A00","kiwigreen-600":"#0A6000","kiwigreen-500":"#0E8A00","kiwigreen-400":"#55BD46","kiwigreen-300":"#A3E398","kiwigreen-200":"#BFEEB8","kiwigreen-100":"#DFF8DB","kiwigreen-50":"#EEFCED","lime-950":"#0C0E00","lime-900":"#1A1F00","lime-800":"#282F00","lime-700":"#3A4501","lime-600":"#4D5A01","lime-500":"#6B7E01","lime-400":"#A1B33B","lime-300":"#CFDB83","lime-200":"#DFE8A6","lime-100":"#EFF4CC","lime-50":"#F7FAE5","yellow-950":"#100D01","yellow-900":"#251E02","yellow-800":"#382D03","yellow-700":"#504104","yellow-600":"#665505","yellow-500":"#8F7407","yellow-400":"#DBAF00","yellow-300":"#FADB61","yellow-200":"#FFE88F","yellow-100":"#FFF2BD","yellow-50":"#FFFAE5","yelloworange-950":"#150C00","yelloworange-900":"#2C1A00","yelloworange-800":"#432700","yelloworange-700":"#623A00","yelloworange-600":"#814C00","yelloworange-500":"#B06400","yelloworange-400":"#FF9C1A","yelloworange-300":"#FFCD7C","yelloworange-200":"#FFDDA8","yelloworange-100":"#FFF0D3","yelloworange-50":"#FFF7EA","poopbrown-950":"#110B04","poopbrown-900":"#29190A","poopbrown-800":"#3B2510","poopbrown-700":"#54371A","poopbrown-600":"#6E4924","poopbrown-500":"#9A6D3F","poopbrown-400":"#CAA075","poopbrown-300":"#EECCAA","poopbrown-200":"#F6DDC3","poopbrown-100":"#FEEEDD","poopbrown-50":"#FEF7EE",pizzaRed:{light:"#ef5350",dark:"#c62828"},"global-brand-orangered":{light:"#FF4500",dark:"#FF4500"},"global-focus":{light:"#47B0DB",dark:"#007FAE"},"interactive-content-disabled":{light:"#0000003f",dark:"#ffffff3f"},"interactive-background-disabled":{light:"#0000000c",dark:"#ffffff0c"},"interactive-pressed":{light:"#00000028",dark:"#ffffff28"},"neutral-content":{light:"#2A3C42",dark:"#B8C5C9"},"neutral-content-disabled":{light:"#D6D6D6",dark:"#303030"},"neutral-content-weak":{light:"#576F76",dark:"#82959B"},"neutral-content-strong":{light:"#0F1A1C",dark:"#F2F4F5"},"neutral-background":{light:"#ffffff",dark:"#0B1416"},"neutral-background-selected":{light:"#EAEDEF",dark:"#1A282D"},"neutral-background-weak":{light:"#F9FAFA",dark:"#04090A"},"neutral-background-medium":{light:"#F8F8F8",dark:"#131313"},"neutral-background-strong":{light:"#ffffff",dark:"#0F1A1C"},"neutral-background-hover":{light:"#F2F4F5",dark:"#131F23"},"neutral-border":{light:"#00000033",dark:"#ffffff33"},"neutral-border-medium":{light:"#0000007f",dark:"#ffffff7f"},"neutral-border-weak":{light:"#00000019",dark:"#ffffff19"},"neutral-border-strong":{light:"#0F1A1C",dark:"#F2F4F5"},primary:{light:"#0045AC",dark:"#629FFF"},"primary-hover":{light:"#003584",dark:"#A7CCFF"},"primary-visited":{light:"#8700B5",dark:"#D55EFF"},"primary-onBackground":{light:"#ffffff",dark:"#ffffff"},"primary-onBackground-selected":{light:"#ffffff",dark:"#000000"},"primary-background":{light:"#0045AC",dark:"#0045AC"},"primary-background-hover":{light:"#003584",dark:"#1870F4"},"primary-background-selected":{light:"#00255D",dark:"#629FFF"},secondary:{light:"#0F1A1C",dark:"#F2F4F5"},"secondary-hover":{light:"#000000",dark:"#ffffff"},"secondary-weak":{light:"#576F76",dark:"#82959B"},"secondary-onBackground":{light:"#000000",dark:"#ffffff"},"secondary-background":{light:"#EAEDEF",dark:"#1A282D"},"secondary-background-hover":{light:"#E2E7E9",dark:"#223237"},"secondary-background-selected":{light:"#D2DADD",dark:"#33464C"},"secondary-plain":{light:"#0F1A1C",dark:"#F2F4F5"},"secondary-plain-hover":{light:"#000000",dark:"#ffffff"},"danger-background":{light:"#EB001F",dark:"#A50016"},"danger-background-disabled":{light:"#FFCCD2",dark:"#3A0008"},"danger-background-hover":{light:"#A50016",dark:"#EB001F"},"danger-onBackground":{light:"#ffffff",dark:"#ffffff"},"danger-content":{light:"#A50016",dark:"#FF6E80"},"danger-content-hover":{light:"#7E0011",dark:"#FFADB8"},"danger-content-default":{light:"#ffffff",dark:"#ffffff"},"brand-background":{light:"#D93A00",dark:"#D93A00"},"brand-onBackground":{light:"#ffffff",dark:"#ffffff"},"brand-background-hover":{light:"#962900",dark:"#962900"},"media-background":{light:"#00000099",dark:"#00000099"},"media-onbackground":{light:"#ffffff",dark:"#ffffff"},"media-onbackground-weak":{light:"#E2E7E9",dark:"#E2E7E9"},"media-background-hover":{light:"#000000cc",dark:"#000000cc"},"media-onbackground-disabled":{light:"#ffffff3f",dark:"#ffffff3f"},"media-border-selected":{light:"#ffffff",dark:"#ffffff"},"media-background-selected":{light:"#000000cc",dark:"#000000cc"},"success-content":{light:"#0A6000",dark:"#55BD46"},"success-hover":{light:"#084A00",dark:"#A3E398"},"success-onBackground":{light:"#ffffff",dark:"#ffffff"},"success-background":{light:"#0E8A00",dark:"#0A6000"},"success-background-hover":{light:"#0A6000",dark:"#0E8A00"},"warning-content":{light:"#665505",dark:"#DBAF00"},"warning-content-hover":{light:"#504104",dark:"#FADB61"},"warning-onBackground":{light:"#000000",dark:"#000000"},"warning-background":{light:"#DBAF00",dark:"#DBAF00"},"warning-background-hover":{light:"#8F7407",dark:"#FADB61"},"upvote-content":{light:"#962900",dark:"#FE7C53"},"upvote-content-weak":{light:"#FF4500",dark:"#FF4500"},"upvote-disabled":{light:"#9629004c",dark:"#FE7C534c"},"upvote-onBackground":{light:"#ffffff",dark:"#ffffff"},"upvote-background":{light:"#D93A00",dark:"#D93A00"},"upvote-background-hover":{light:"#962900",dark:"#962900"},"upvote-background-disabled":{light:"#D93A004c",dark:"#D93A004c"},"downvote-content":{light:"#453BB5",dark:"#988EFF"},"downvote-content-weak":{light:"#6A5CFF",dark:"#6A5CFF"},"downvote-disabled":{light:"#453BB54c",dark:"#988EFF4c"},"downvote-onBackground":{light:"#ffffff",dark:"#ffffff"},"downvote-background":{light:"#6A5CFF",dark:"#453BB5"},"downvote-background-hover":{light:"#453BB5",dark:"#453BB5"},"downvote-background-disabled":{light:"#6A5CFF4c",dark:"#6A5CFF4c"},"brand-gradient-default":{light:"",dark:""},"brand-gradient-default-highlight":{light:"",dark:""},"brand-gradient-hover":{light:"",dark:""},"brand-gradient-hover-highlight":{light:"",dark:""},"brand-gradient-active":{light:"",dark:""},"brand-gradient-active-highlight":{light:"",dark:""},"gradient-media":{light:"",dark:""},"gradient-media-strong":{light:"",dark:""},"transparent-background-hover":{light:"#82959B19",dark:"#667A8019"},"global-black":{light:"#000000",dark:"#000000"},"global-white":{light:"#ffffff",dark:"#ffffff"},"global-orangered":{light:"#D93A00",dark:"#D93A00"},"global-alienblue":{light:"#1870F4",dark:"#1870F4"},"global-darkblue":{light:"#131F23",dark:"#131F23"},"tone-1":{light:"#131313",dark:"#F2F2F2"},"tone-2":{light:"#434343",dark:"#ACACAC"},"tone-3":{light:"#ACACAC",dark:"#434343"},"tone-4":{light:"#E4E4E4",dark:"#303030"},"tone-5":{light:"#F2F2F2",dark:"#1E1E1E"},"tone-6":{light:"#F8F8F8",dark:"#131313"},"tone-7":{light:"#ffffff",dark:"#080808"},"action-upvote":{light:"#D93A00",dark:"#D93A00"},"action-downvote":{light:"#6A5CFF",dark:"#6A5CFF"},"alert-caution":{light:"#8F7407",dark:"#8F7407"},"identity-admin":{light:"#D93A00",dark:"#D93A00"},"identity-moderator":{light:"#0E8A00",dark:"#0E8A00"},"identity-self":{light:"#008675",dark:"#008675"},"identity-coins":{light:"#DBAF00",dark:"#DBAF00"},"category-live":{light:"#D93A00",dark:"#D93A00"},"category-nsfw":{light:"#E00096",dark:"#E00096"},"category-spoiler":{light:"#131313",dark:"#F2F2F2"},"ui-canvas":{light:"#F2F2F2",dark:"#080808"},"ui-modalbackground":{light:"#ffffff",dark:"#0F1A1C"},"avatar-gradient":{light:"",dark:""},"opacity-highlight":{light:"",dark:""},"opacity-08":{light:"#13131314",dark:"#13131314"},"opacity-50":{light:"#0000007f",dark:"#F2F2F27f"},scrim:{light:"#00000099",dark:"#00000099"},"scrim-strong":{light:"#000000cc",dark:"#000000cc"},"scrim-gradient":{light:"",dark:""},online:{light:"#55BD46",dark:"#55BD46"},favorite:{light:"#8F7407",dark:"#DBAF00"}};var oy={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",transparent:"#FFFFFF00",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},ay=r=>!!r.match(/^(#[0-9a-fA-F]{3,8}).*/),dy=r=>r in Ec,Rc=r=>r in oy,ly=r=>!!r.match(/^rgba?\(.*/),uy=r=>!!r.match(/^hsla?\(.*/),cy=(r,e="light")=>{if(Rc(r))return bd(r);let i=Ec[r];return typeof i=="string"?i:i[e]},bd=r=>oy[r]??r,my=r=>{let[e,t,i,s]=r.replace(/^rgba?\(|\s+|\)$/g,"").split(",");if(!e||!t||!i)return r;let a=[...[e,t,i].map(p=>parseFloat(p))];if(s){let p=parseFloat(s),f=Math.round(p*255);a.push(f)}return`#${a.map(p=>p.toString(16).padStart(2,"0")).join("")}`};var by="data-",z0=new Set(["onPress","onMessage"]),V0=new Map([["onPress",qc.ACTION_CLICK],["onMessage",qc.ACTION_WEBVIEW]]),ns,li=class{constructor(e=()=>{}){l(this,ns,void 0);d(this,ns,e)}createBlocksElementOrThrow({type:e,props:t,children:i}){let s=this.createBlocksElement({type:e,props:t,children:i});if(!s)throw new Error(`Could not create block of type ${e}`);return s}createBlocksElement({type:e,props:t,children:i}){switch(e){case"blocks":return this.makeRoot(t,...i);case"hstack":return this.makeHStack(t,...i);case"vstack":return this.makeVStack(t,...i);case"zstack":return this.makeZStack(t,...i);case"text":return this.makeText(t,...i);case"button":return this.makeButton(t,...i);case"image":return this.makeImage(t);case"spacer":return this.makeSpacer(t);case"icon":return this.makeIcon(t);case"avatar":return this.makeAvatar(t);case"fullsnoo":return this.makeFullSnoo(t);case"animation":return this.makeAnimation(t);case"webview":return this.makeWebView(t);case"__fragment":throw new Error("root fragment is not supported - use 'blocks' instead")}}makeRootHeight(e){switch(e){case"regular":return 320;case"tall":return 512}}makeBlockPadding(e){switch(e){case"none":return rs.PADDING_NONE;case"xsmall":return rs.PADDING_XSMALL;case"small":return rs.PADDING_SMALL;case"medium":return rs.PADDING_MEDIUM;case"large":return rs.PADDING_LARGE}}makeBlockRadius(e){switch(e){case"none":return is.RADIUS_NONE;case"small":return is.RADIUS_SMALL;case"medium":return is.RADIUS_MEDIUM;case"large":return is.RADIUS_LARGE;case"full":return is.RADIUS_FULL}}makeBlockGap(e){switch(e){case"none":return Pd.GAP_NONE;case"small":return Pd.GAP_SMALL;case"medium":return Pd.GAP_MEDIUM;case"large":return Pd.GAP_LARGE}}makeBlockAlignment(e){if(e===void 0)return;let t,i;if(e.includes("top")?t=Nc.ALIGN_TOP:e.includes("middle")?t=Nc.ALIGN_MIDDLE:e.includes("bottom")&&(t=Nc.ALIGN_BOTTOM),e.includes("start")?i=Fc.ALIGN_START:e.includes("center")?i=Fc.ALIGN_CENTER:e.includes("end")&&(i=Fc.ALIGN_END),t!==void 0||i!==void 0)return{vertical:t,horizontal:i}}makeBlockBorder(e,t,i,s){if(!e&&!t)return;let o;switch(e){case"none":o=kd.BORDER_WIDTH_NONE;break;case"thin":o=kd.BORDER_WIDTH_THIN;break;case"thick":o=kd.BORDER_WIDTH_THICK;break;default:o=kd.BORDER_WIDTH_THIN;break}let a=t??"neutral-border-weak",c=this.getThemedColors(a,i,s);return{width:o,color:c?.light,colors:c}}makeBlockTextSize(e){switch(e){case"xsmall":return di.TEXT_SIZE_XSMALL;case"small":return di.TEXT_SIZE_SMALL;case"medium":return di.TEXT_SIZE_MEDIUM;case"large":return di.TEXT_SIZE_LARGE;case"xlarge":return di.TEXT_SIZE_XLARGE;case"xxlarge":return di.TEXT_SIZE_XXLARGE}}makeBlockTextStyle(e){switch(e){case"body":return _c.TEXT_STYLE_BODY;case"metadata":return _c.TEXT_STYLE_METADATA;case"heading":return _c.TEXT_STYLE_HEADING}}makeBlockTextOutline(e){switch(e){case"none":return Lc.TEXT_OUTLINE_NONE;case"thin":return Lc.TEXT_OUTLINE_THIN;case"thick":return Lc.TEXT_OUTLINE_THICK}}makeBlockTextWeight(e){switch(e){case"regular":return yy.TEXT_WEIGHT_REGULAR;case"bold":return yy.TEXT_WEIGHT_BOLD}}makeBlockTextOverflow(e){switch(e){case"clip":return Dc.TEXT_OVERFLOW_CLIP;case"ellipsis":return Dc.TEXT_OVERFLOW_ELLIPSE}return Dc.TEXT_OVERFLOW_ELLIPSE}makeBlockButtonAppearance(e){switch(e){case"secondary":return Tt.BUTTON_APPEARANCE_SECONDARY;case"primary":return Tt.BUTTON_APPEARANCE_PRIMARY;case"plain":return Tt.BUTTON_APPEARANCE_PLAIN;case"bordered":return Tt.BUTTON_APPEARANCE_BORDERED;case"media":return Tt.BUTTON_APPEARANCE_MEDIA;case"destructive":return Tt.BUTTON_APPEARANCE_DESTRUCTIVE;case"caution":return Tt.BUTTON_APPEARANCE_CAUTION;case"success":return Tt.BUTTON_APPEARANCE_SUCCESS}}makeBlockButtonSize(e){switch(e){case"small":return Oc.BUTTON_SIZE_SMALL;case"medium":return Oc.BUTTON_SIZE_MEDIUM;case"large":return Oc.BUTTON_SIZE_LARGE}}makeBlockImageResizeMode(e){switch(e){case"none":return ts.IMAGE_RESIZE_NONE;case"fit":return ts.IMAGE_RESIZE_FIT;case"fill":return ts.IMAGE_RESIZE_FILL;case"cover":return ts.IMAGE_RESIZE_COVER;case"scale-down":return ts.IMAGE_RESIZE_SCALE_DOWN}}makeBlockSpacerSize(e){switch(e){case"xsmall":return Cd.SPACER_XSMALL;case"small":return Cd.SPACER_SMALL;case"medium":return Cd.SPACER_MEDIUM;case"large":return Cd.SPACER_LARGE}}makeBlockSpacerShape(e){switch(e){case"invisible":return Uc.SPACER_INVISIBLE;case"thin":return Uc.SPACER_THIN;case"square":return Uc.SPACER_SQUARE}}makeBlockIconSize(e){switch(e){case"xsmall":return Sd.ICON_SIZE_XSMALL;case"small":return Sd.ICON_SIZE_SMALL;case"medium":return Sd.ICON_SIZE_MEDIUM;case"large":return Sd.ICON_SIZE_LARGE}}makeBlockAvatarSize(e){switch(e){case"xxsmall":return xt.AVATAR_SIZE_XXSMALL;case"xsmall":return xt.AVATAR_SIZE_XSMALL;case"small":return xt.AVATAR_SIZE_SMALL;case"medium":return xt.AVATAR_SIZE_MEDIUM;case"large":return xt.AVATAR_SIZE_LARGE;case"xlarge":return xt.AVATAR_SIZE_XXLARGE;case"xxlarge":return xt.AVATAR_SIZE_XXLARGE;case"xxxlarge":return xt.AVATAR_SIZE_XXXLARGE}}makeBlockAvatarFacing(e){switch(e){case"left":return vy.AVATAR_FACING_LEFT;case"right":return vy.AVATAR_FACING_RIGHT}}makeBlockFullSnooSize(e){switch(e){case"xsmall":return ai.FULLSNOO_XSMALL;case"small":return ai.FULLSNOO_SMALL;case"medium":return ai.FULLSNOO_MEDIUM;case"large":return ai.FULLSNOO_LARGE;case"xlarge":return ai.FULLSNOO_XLARGE;case"xxlarge":return ai.FULLSNOO_XXLARGE}}makeBlockAvatarBackground(e){switch(e){case"dark":return hy.AVATAR_BG_DARK;case"light":return hy.AVATAR_BG_LIGHT}}makeBlockAnimationType(e){return e==="lottie"||e===void 0?gy.ANIM_LOTTIE:gy.UNRECOGNIZED}makeBlockAnimationDirection(e){switch(e){case"backward":return py.ANIM_DIR_BACKWARD;case"forward":return py.ANIM_DIR_FORWARD}}makeBlockLoopMode(e){switch(e){case"repeat":return fy.ANIM_LOOP_REPEAT;case"bounce":return fy.ANIM_LOOP_BOUNCE}}makeBlockSize(e){if(e&&(e.width!=null||e.height!=null||e.grow)){let{value:t,unit:i}=this.parseSize(e.width)??{},{value:s,unit:o}=this.parseSize(e.height)??{};return{width:t,widthUnit:i,height:s,heightUnit:o,grow:e.grow}}}makeBlockSizes(e){if(e){let t=e.width!=null||e.minWidth!=null||e.maxWidth!=null,i=e.height!=null||e.minHeight!=null||e.maxHeight!=null;if(t||i||e.grow!=null)return{width:t?{value:this.parseSize(e.width),min:this.parseSize(e.minWidth),max:this.parseSize(e.maxWidth)}:void 0,height:i?{value:this.parseSize(e.height),min:this.parseSize(e.minHeight),max:this.parseSize(e.maxHeight)}:void 0,grow:e.grow}}}parseSize(e){if(e==null)return;if(typeof e=="number")return{value:e,unit:Mc.SIZE_UNIT_PERCENT};let t=e.match(/^(\d+(?:\.\d+)?)(px|%)?$/);if(t==null)return;let i=Mc.SIZE_UNIT_PERCENT;return t?.at(2)==="px"&&(i=Mc.SIZE_UNIT_PIXELS),{value:Number.parseFloat(t[1]),unit:i}}getDataSet(e){return Object.keys(e).filter(t=>t.startsWith(by)).reduce((t,i)=>(t[i.substring(by.length)]=e[i],t),{})}makeActions(e,t){let i=[],s=this.getDataSet(t);return z0.forEach(o=>{if(o in t){let a=t[o];i.push({type:V0.get(o)??qc.UNRECOGNIZED,id:a.toString(),data:s})}}),i}blockColorToHex(e,t="light"){if(e)return e=e.toLowerCase(),ay(e)?e:dy(e)?cy(e,t):Rc(e)?bd(e):ly(e)?my(e):uy(e)?e:(console.warn(`Could not parse color: ${e}.`),bd("red"))}childrenToBlocks(e){return e.flatMap(t=>(typeof t!="string"?this.createBlocksElement(t):void 0)??[])}getThemedColors(e,t,i){let s=this.blockColorToHex(t,"light"),o=this.blockColorToHex(i,"dark"),a=[];if(e&&(!s||!o)){let c=Array.from(e?.matchAll(/[\w#-]+(?:\([\w\t ,.#-]+\))?/g)??[]);a.push(...c.map(p=>p[0]))}return s||(s=this.blockColorToHex(a?.at(0),"light")),o||(o=this.blockColorToHex(a?.at(1)??a?.at(0),"dark")),s||o?{light:s,dark:o}:void 0}parsePixels(e){return typeof e=="string"?Number(e.slice(0,-2)):e}resolveAssetUrl(e){return n(this,ns).call(this)?.getURL(e)??e}childrenToString(e){return e.map(t=>t.toString()).join("")}makeRoot(e,...t){return this.wrapRoot(e,this.childrenToBlocks(t))}wrapRoot(e,t){return this.makeBlock(Le.BLOCK_ROOT,{},{rootConfig:{children:t,height:this.makeRootHeight(u.customPostType?.height??e?.height??"regular")}})}makeStackBlock(e,t,i){let s=this.getThemedColors(t?.backgroundColor,t?.lightBackgroundColor,t?.darkBackgroundColor);return this.makeBlock(Le.BLOCK_STACK,t,{stackConfig:{alignment:this.makeBlockAlignment(t?.alignment),backgroundColor:s?.light,backgroundColors:s,border:this.makeBlockBorder(t?.border,t?.borderColor,t?.lightBorderColor,t?.darkBorderColor),children:this.childrenToBlocks(i),cornerRadius:this.makeBlockRadius(t?.cornerRadius),direction:e,gap:this.makeBlockGap(t?.gap),padding:this.makeBlockPadding(t?.padding),reverse:t?.reverse}})}makeHStack(e,...t){return this.makeStackBlock(Bc.STACK_HORIZONTAL,e,t)}makeVStack(e,...t){return this.makeStackBlock(Bc.STACK_VERTICAL,e,t)}makeZStack(e,...t){return this.makeStackBlock(Bc.STACK_DEPTH,e,t)}makeText(e,...t){let i=this.getThemedColors(e?.color,e?.lightColor,e?.darkColor);return this.makeBlock(Le.BLOCK_TEXT,e,{textConfig:{alignment:this.makeBlockAlignment(e?.alignment),color:i?.light,colors:i,outline:this.makeBlockTextOutline(e?.outline),size:this.makeBlockTextSize(e?.size),style:this.makeBlockTextStyle(e?.style),text:this.childrenToString(t),weight:this.makeBlockTextWeight(e?.weight),selectable:e?.selectable,wrap:e?.wrap,overflow:this.makeBlockTextOverflow(e?.overflow)}})}makeButton(e,...t){let i=this.getThemedColors(e?.textColor,e?.lightTextColor,e?.darkTextColor);return this.makeBlock(Le.BLOCK_BUTTON,e,{buttonConfig:{buttonAppearance:this.makeBlockButtonAppearance(e?.appearance),icon:e?.icon,buttonSize:this.makeBlockButtonSize(e?.size),text:this.childrenToString(t),textColor:i?.light,textColors:i,disabled:e?.disabled}})}makeImage(e){return e&&this.makeBlock(Le.BLOCK_IMAGE,e,{imageConfig:{description:e?.description,resizeMode:this.makeBlockImageResizeMode(e.resizeMode),url:this.resolveAssetUrl(e.url),width:this.parsePixels(e.imageWidth),height:this.parsePixels(e.imageHeight)}})}makeSpacer(e){return this.makeBlock(Le.BLOCK_SPACER,e,{spacerConfig:{size:this.makeBlockSpacerSize(e?.size),shape:this.makeBlockSpacerShape(e?.shape)}})}makeIcon(e){let t=this.getThemedColors(e?.color,e?.lightColor,e?.darkColor);return e&&this.makeBlock(Le.BLOCK_ICON,e,{iconConfig:{icon:e.name,color:t?.light,colors:t,size:this.makeBlockIconSize(e.size)}})}makeAvatar(e){return e&&this.makeBlock(Le.BLOCK_AVATAR,e,{avatarConfig:{thingId:e.thingId,size:this.makeBlockAvatarSize(e.size),facing:this.makeBlockAvatarFacing(e.facing),background:this.makeBlockAvatarBackground(e.background)}})}makeFullSnoo(e){return e&&this.makeBlock(Le.BLOCK_FULLSNOO,e,{fullsnooConfig:{userId:e.userId,facing:this.makeBlockAvatarFacing(e.facing),size:this.makeBlockFullSnooSize(e.size)}})}makeAnimation(e){return e&&this.makeBlock(Le.BLOCK_ANIMATION,e,{animationConfig:{type:this.makeBlockAnimationType(e.type),url:this.resolveAssetUrl(e.url),loop:e.loop,loopMode:this.makeBlockLoopMode(e.loopMode),autoplay:e.autoplay,width:this.parsePixels(e.imageWidth),height:this.parsePixels(e.imageHeight),direction:this.makeBlockAnimationDirection(e.direction),speed:e.speed}})}makeWebView(e){return e&&this.makeBlock(Le.BLOCK_WEBVIEW,e,{webviewConfig:{url:this.resolveAssetUrl(e.url),state:e.state}})}makeBlock(e,t,i){return{type:e,size:this.makeBlockSize(t),sizes:this.makeBlockSizes(t),config:i,actions:(t&&this.makeActions(e,t))??[],id:t?.id,key:t?.key}}ensureRootBlock(e){let t=e;if(t.type===Le.BLOCK_ROOT)return t.config?.rootConfig&&u.customPostType?.height&&(t.config.rootConfig.height=this.makeRootHeight(u.customPostType?.height)),t;let i=this.wrapRoot(void 0,[t]);if(!i)throw new Error("Could not create root block");return i}};ns=new WeakMap;function Py(r){if(typeof r=="string")throw new Error("Root element cannot be a string")}var Sy=r=>{let e="",t=r.props?Object.keys(r.props).map(i=>i==="onPress"?"":`${i}="${r.props[i]}"`).join(" "):"";e+=`<${r.type}${t?" "+t:""}>`;for(let i of r.children)typeof i=="string"?e+=i:e+=Sy(i);return e+=`</${r.type}>`,e};function J0(r){return"  ".repeat(r)}function $0(r){let e="",t=0,i=r.split(/>\s*</);for(let s=0;s<i.length;s++){let o=i[s];s===0&&(o=o.trim()),s===i.length-1&&(o=o.trim());let a=o.charAt(0)==="/";a&&t--,e+=J0(t),s!==0&&(e+="<"),e+=o,s!==i.length-1&&(e+=`>
`),!a&&o.indexOf("</")===-1&&o.charAt(o.length-1)!=="/"&&t++}return e}var Id,Cy,dr,ss,os,jc,as,at=class{constructor(e,t,i,s,o){l(this,Id);l(this,dr);l(this,os);this.renderState={};this.currentComponentKey=[];this.currentHookIndex=0;this.actions=new Map;this.forms=new Map;this.realtimeChannels=[];this.realtimeUpdated=!1;this.pendingHooks=[];this.isRendering=!1;this.transformer=new li(()=>this.assets);this.effects=[];l(this,as,!1);this.component=e,this.event=t,this.state={__renderState:{},...i},this.metadata=s,this.state.__realtimeChannels&&(this.realtimeChannels=this.state.__realtimeChannels);let a=Be({reconciler:this,hooks:!0,ui:!0,metadata:s});this.cache=a.cache,this.modLog=a.modLog,this.reddit=a.reddit,this.kvStore=a.kvStore,this.redis=a.redis,this.settings=a.settings,this.scheduler=a.scheduler,this.media=a.media,this.assets=a.assets,this.realtime=a.realtime,this.dimensions=o,this.ui=a.ui,this.hooks={useState:a.useState,useInterval:a.useInterval,useForm:a.useForm,useChannel:a.useChannel}}emitEffect(e,t){this.effects.push(t)}async render(){await this.reconcile(),this.isRendering=!0;let e=await this.buildBlocksUI();return this.isRendering=!1,e}makeUniqueActionID(e){let t=e,i=1;for(;this.actions.has(t);)t=`${e}.${i++}`;return t}async reconcile(){let e=b(this,dr,ss).call(this),t={type:this.component,props:e,children:[]},i=await this.processBlock(t);if(Py(i),this.transformer.createBlocksElementOrThrow(i),this.isUserActionRender&&this.blockRenderEventId){let s=this.actions.get(this.blockRenderEventId);s&&await s(this.event.data)}for(let s of this.pendingHooks)await s();this.buildNextState(),b(this,Id,Cy).call(this)}async buildBlocksUI(){let e=b(this,dr,ss).call(this),t={type:this.component,props:e,children:[]},i=await this.renderElement(e,t);return this.transformer.ensureRootBlock(i)}async renderElement(e,t){let i=await this.processBlock(t);return Py(i),(u.debug.emitSnapshots||e.debug.emitSnapshots)&&console.debug($0(Sy(i))),(u.debug.emitState||e.debug.emitState)&&console.debug(JSON.stringify(this.state,void 0,2)),this.transformer.createBlocksElementOrThrow(i)}async processProps(e){let t=e.props??{},i=["onPress","onMessage"];for(let s of i)if(s in t){let o=t[s],a=o?.name,c=this.makeUniqueActionID(`${e.type}.${a??s}`);this.actions.set(c,o),t[s]=c}}async processBlock(e,t=sy(),i=[]){let s=e;if(typeof s.type=="string"){let p=(await Promise.all(s.children.flatMap(async(m,y)=>m==null?[]:await this.processBlock(m,t,[...i,`${s.type}.${y}`])))).flat(),f=b(this,os,jc).call(this,p);return await this.processProps(s),{type:s.type,props:s.props,children:f}}if(typeof s.type=="function"){let c=t(`${i.length?i.join("."):"root"}.${s.type.name.length?s.type.name:"anonymous"}`);this.currentComponentKey.push(c),this.renderState[c]||(this.renderState[c]={});let p=s.children.flatMap(m=>m),f={...b(this,dr,ss).call(this),...s.props,children:p},v;for(;v===void 0;)try{v=await s.type(f,b(this,dr,ss).call(this))}catch(m){if(m instanceof Promise)v=await m;else throw m}if(!this.isInitialRender){let m=this.getPreviousComponentState();if(Object.keys(m).length!==this.currentHookIndex)throw new Error("Invalid hook call. Hooks can only be called at the top-level of a function component. Make sure that you are not calling hooks inside loops, conditions, or nested functions.")}if(this.currentComponentKey.pop(),this.currentHookIndex=0,typeof v=="object")return this.processBlock(v,t,[...i,s.type.name])}if(typeof s=="string")return s;if(typeof s=="number")return`${s}`;let o=[],a="";return Array.isArray(s)?o=s:typeof s.type>"u"&&s.children&&(o=s.children,a="fragmentChild."),{type:"__fragment",props:void 0,children:await Promise.all(o.flatMap(async(c,p)=>await this.processBlock(c,t,[...i,`${a}${p}`])))}}getCurrentComponentKey(){if(!this.currentComponentKey.at(-1))throw new Error("Current component key is missing");return this.currentComponentKey}getCurrentComponentState(){let e=this.currentComponentKey.at(-1);if(!e)throw new Error("Current component key is missing");return this.renderState[e]}getPreviousComponentState(){let e=this.currentComponentKey.at(-1);if(!e)throw new Error("Current component key is missing");return this.state.__renderState[e]||(this.state.__renderState[e]={}),this.state.__renderState[e]}get isInitialRender(){return this.event?this.event.type===Hc.RENDER_INITIAL:!1}get isUserActionRender(){return this.event?this.event.type===Hc.RENDER_USER_ACTION:!1}get isEffectRender(){return this.event?this.event.type===Hc.RENDER_EFFECT_EVENT:!1}get formSubmittedEvent(){return this.event?this.event.formSubmitted:!1}get blockRenderEventId(){return this.event?this.event.id:!1}get realtimeEvent(){if(!this.event)return!1;let e=this.event.realtimeEvent;return e?.event?.channel?e:!1}runHook(e){this.pendingHooks.push(e)}rerenderIn(e){n(this,as)||(d(this,as,!0),this.effects.push({type:ky.EFFECT_RERENDER_UI,rerenderUi:{delaySeconds:e/1e3}}))}addRealtimeChannel(e){this.realtimeChannels.push(e),this.realtimeUpdated=!0}removeRealtimeChannel(e){this.realtimeChannels=this.realtimeChannels.filter(t=>t!==e),this.realtimeUpdated=!0}get realtimeEffect(){return this.realtimeUpdated&&this.realtimeChannels.length>0?[{type:ky.EFFECT_REALTIME_SUB,realtimeSubscriptions:{subscriptionIds:this.realtimeChannels}}]:[]}getEffects(){return[...oi(this.ui),...this.effects,...this.realtimeEffect]}buildNextState(){for(let e of Object.keys(this.renderState))this.renderState[e]=Object.values(this.renderState[e]);this.state={__postData:this.state.__postData,__renderState:this.renderState,__cache:this.state.__cache,...this.realtimeChannels.length>0?{__realtimeChannels:this.realtimeChannels}:{}}}};Id=new WeakSet,Cy=function(){this.actions.clear(),this.currentComponentKey=[],this.currentHookIndex=0,this.pendingHooks=[],this.realtimeChannels=[],this.realtimeUpdated=!1},dr=new WeakSet,ss=function(){let e={...de(this.metadata,this.state.__postData?.thingId),modLog:this.modLog,reddit:this.reddit,cache:this.cache,kvStore:this.kvStore,redis:this.redis,settings:this.settings,scheduler:this.scheduler,media:this.media,assets:this.assets,realtime:this.realtime,ui:this.ui,dimensions:this.dimensions,uiEnvironment:{timezone:this.metadata[B.Timezone]?.values[0],locale:this.metadata[B.Language]?.values[0],dimensions:this.dimensions},...this.hooks};return e.debug.effects=this,e},os=new WeakSet,jc=function(e){let t=[];for(let i of e)typeof i=="string"?t.push(i):i.type==="__fragment"?t.push(...b(this,os,jc).call(this,i.children)):t.push(i);return t},as=new WeakMap;async function X0(r,e){let t=u.customPostType;if(!t)throw new Error("Custom post type not registered");let i=new at((o,a)=>t.render(a),r.blocks,r.state,e,r.dimensions),s=await i.render();return{state:i.state,blocks:{ui:s},effects:i.getEffects()}}function Iy(r){r.provides(K0),M("RenderPost",X0)}import{GetFieldsResponse as Z0,InstallationSettingsDefinition as Y0}from"@devvit/protos";async function Q0(){if(!u.installationSettings)throw new Error("Installation settings were not defined.");return Z0.fromPartial({fields:{fields:ot(u.installationSettings)}})}async function eT(r,e){return yd(r,u.installationSettings,e)}function wy(r){r.provides(Y0),M("GetSettingsFields",Q0),M("ValidateForm",eT)}import{ContextActionDefinition as tT,ContextActionDescription as rT,ContextActionResponse as iT}from"@devvit/protos";var Ay=r=>`menuItem.${r}`;function Wc(r){return u.menuItems.find((e,t)=>Ay(t)===r)}async function nT(r,e){let t=u.menuItems;if(!t.length)throw new Error("No menu items registered.");return{actions:t.map((s,o)=>rT.fromPartial({actionId:Ay(o),name:s.label,description:s.description,contexts:{subreddit:s.location.includes("subreddit"),post:s.location.includes("post"),comment:s.location.includes("comment")},users:{loggedOut:s.forUserType?.includes("loggedOut"),member:s.forUserType?.includes("member"),moderator:s.forUserType?.includes("moderator")},postFilters:s.postFilter==="currentApp"?{currentApp:!0}:void 0}))}}async function sT(r,e){let t=Wc(r.actionId);if(!t)throw new Error(`MenuItem ${r.actionId} not found`);let i=r.comment?.id&&`t1_${r.comment.id}`,s=r.post?.id&&`t3_${r.post.id}`,o=r.subreddit?.id&&`t5_${r.subreddit.id}`,a=i||s||o;g(a,"targetId is missing from ContextActionRequest");let c={targetId:a,location:r.comment?"comment":r.post?"post":"subreddit"},p=Object.assign(Be({ui:!0,metadata:e}),de(e,s,i),{uiEnvironment:{timezone:e[B.Timezone]?.values[0],locale:e[B.Language]?.values[0]}});return await t.onPress(c,p),iT.fromPartial({effects:oi(p.ui)})}function xy(r){r.provides(tT),M("GetActions",nT),M("OnAction",sT)}function dt(r){return r?r===!0?!0:r.enabled:!1}import{SchedulerHandlerDefinition as oT}from"@devvit/protos";async function aT(r,e){let t=r.type,i=u.scheduledJobHandlers.get(t);if(!i)throw new Error(`Job ${t} not found`);let s={name:t,data:r.data},o=Object.assign(Be({metadata:e}),de(e));await i(s,o)}function Ty(r){r.provides(oT),M("HandleScheduledAction",aT)}import{HandlerResult as dT,OnAppInstallDefinition as lT,OnAppUpgradeDefinition as uT,OnCommentCreateDefinition as cT,OnCommentDeleteDefinition as mT,OnCommentReportDefinition as pT,OnCommentSubmitDefinition as fT,OnCommentUpdateDefinition as gT,OnModActionDefinition as hT,OnModMailDefinition as vT,OnPostCreateDefinition as yT,OnPostDeleteDefinition as bT,OnPostFlairUpdateDefinition as kT,OnPostReportDefinition as PT,OnPostSubmitDefinition as ST,OnPostUpdateDefinition as CT}from"@devvit/protos";var wd;(function(r){function e(o,a){return o.length<=a?o:`${o.slice(0,a-1)}\u2026`}r.ellipsize=e;function t(o){return o[0]==null?o:`${o[0].toLocaleUpperCase()}${o.slice(1)}`}r.capitalize=t;function i(o){return o==null||/^\s*$/.test(o)}r.isBlank=i;function s(o){return o instanceof Error?`${o.stack||o.message||o.name}`:String(o)}r.caughtToString=s})(wd||(wd={}));function ie(r,e){return g(e),async(t,i)=>{let s={...t,type:r},o=Object.assign(Be({metadata:i}),de(i)),a=await Promise.allSettled(e.map(p=>p(s,o))),c=IT(a);if(c)throw c.err;return dT.fromPartial({})}}function Ey(r){for(let e of u.triggerOnEventHandlers.keys())switch(e){case"PostSubmit":r.provides(ST),M("OnPostSubmit",ie("PostSubmit",u.triggerOnEventHandlers.get(e)));break;case"PostCreate":r.provides(yT),M("OnPostCreate",ie("PostCreate",u.triggerOnEventHandlers.get(e)));break;case"PostUpdate":r.provides(CT),M("OnPostUpdate",ie("PostUpdate",u.triggerOnEventHandlers.get(e)));break;case"PostReport":r.provides(PT),M("OnPostReport",ie("PostReport",u.triggerOnEventHandlers.get(e)));break;case"PostDelete":r.provides(bT),M("OnPostDelete",ie("PostDelete",u.triggerOnEventHandlers.get(e)));break;case"PostFlairUpdate":r.provides(kT),M("OnPostFlairUpdate",ie("PostFlairUpdate",u.triggerOnEventHandlers.get(e)));break;case"CommentSubmit":r.provides(fT),M("OnCommentSubmit",ie("CommentSubmit",u.triggerOnEventHandlers.get(e)));break;case"CommentCreate":r.provides(cT),M("OnCommentCreate",ie("CommentCreate",u.triggerOnEventHandlers.get(e)));break;case"CommentUpdate":r.provides(gT),M("OnCommentUpdate",ie("CommentUpdate",u.triggerOnEventHandlers.get(e)));break;case"CommentReport":r.provides(pT),M("OnCommentReport",ie("CommentReport",u.triggerOnEventHandlers.get(e)));break;case"CommentDelete":r.provides(mT),M("OnCommentDelete",ie("CommentDelete",u.triggerOnEventHandlers.get(e)));break;case"AppInstall":r.provides(lT),M("OnAppInstall",ie("AppInstall",u.triggerOnEventHandlers.get(e)));break;case"AppUpgrade":r.provides(uT),M("OnAppUpgrade",ie("AppUpgrade",u.triggerOnEventHandlers.get(e)));break;case"ModAction":r.provides(hT),M("OnModAction",ie("ModAction",u.triggerOnEventHandlers.get(e)));break;case"ModMail":r.provides(vT),M("OnModMail",ie("ModMail",u.triggerOnEventHandlers.get(e)));break;default:throw new Error(`Unknown trigger event: ${e}`)}}function IT(r){let e=r.reduce((t,i)=>i.status==="rejected"?[...t,i.reason]:t,[]);if(e.length!==0)return e.length===1?{err:e[0]}:{err:new Error(e.map(t=>wd.caughtToString(t)).join(`
`))}}var Sb=Rr(Hy(),1),Cb=Rr(Dd(),1);import{EffectType as CR,UIEventHandlerDefinition as IR}from"@devvit/protos";async function wR(r,e){let t=r.state??{},i=(0,Sb.default)(t),s=Be({ui:!0,metadata:e});if(r.event?.formSubmitted&&r.event.formSubmitted.formId){let p=r.event.formSubmitted.formId;if(p.includes("form.hook.")&&u.customPostType){let k=new at((C,I)=>u.customPostType?.render(I)??null,r.event,r.state,e,void 0);return await k.reconcile(),{state:k.state,effects:k.getEffects()}}let f=u.formDefinitions.get(p);if(!f)throw new Error(`Form with key ${p} not found`);let v,m;if(i.__contextAction){let{actionId:k,thingId:C}=i.__contextAction,I=Wc(k);I?.location==="post"?v=C:I?.location==="comment"&&(m=C)}let y=Object.assign(s,de(e,v,m),{uiEnvironment:{timezone:e[B.Timezone]?.values[0],locale:e[B.Language]?.values[0]}});await f.onSubmit({values:St(r.event.formSubmitted.results)},y)}else if(r.event?.realtimeEvent){if(u.customPostType){let p=new at((f,v)=>u.customPostType?.render(v)??null,r.event,r.state,e,void 0);return await p.reconcile(),{state:p.state,effects:p.getEffects()}}}else if(r.event?.toastAction)throw new Error("Toast actions not yet implemented");let o=!(0,Cb.default)(t,i),a=oi(s.ui),c=o?[...a,{type:CR.EFFECT_RERENDER_UI,rerenderUi:{delaySeconds:0}}]:a;return{state:i,effects:c}}function Ib(r){r.provides(IR),M("HandleUIEvent",wR)}import{CustomPostDefinition as Fb}from"@devvit/protos";var qd=Rr(Dd(),1);import{EffectType as sm,Form as TR,ToastAppearance as Ab}from"@devvit/protos";var im=class{constructor(e,t,i){this.state=null;this.hookId=e.hookId,this.form=t,this.onSubmit=i,this.onUIEvent=async s=>{s.formSubmitted&&await i(St(s.formSubmitted.results))}}};function nm(r,e){let t=De({namespace:"useForm"},i=>new im(i,r,e));return AR({id:t.hookId})}function AR(r){return`form.hook.${r.id}.0`}function xR(r){return{id:r.match(/form\.hook\.(.+)\.0/)[1]}}function wb(r,e){let t=xR(e);return r.getHook(t)}var Ot,_d=class{constructor(e){l(this,Ot,void 0);d(this,Ot,e)}showForm(e,t){let i=wb(n(this,Ot),e);if(!i)throw new Error("Form does not exist. Make sure you have added it using useForm.");let s=i.form instanceof Function?i.form(t??{}):i.form,o=TR.fromPartial({id:e,title:s.title,acceptLabel:s.acceptLabel,cancelLabel:s.cancelLabel,shortDescription:s.description});ir(s.fields),o.fields=ot(s.fields),n(this,Ot).emitEffect(e,{type:sm.EFFECT_SHOW_FORM,showForm:{form:o}})}showToast(e){let t;e instanceof Object?t={text:e.text,appearance:e.appearance==="success"?Ab.SUCCESS:Ab.NEUTRAL}:t={text:e},n(this,Ot).emitEffect(e.toString(),{type:sm.EFFECT_SHOW_TOAST,showToast:{toast:t}})}navigateTo(e){let t;typeof e=="string"?t=new URL(e).toString():t=new URL(e.permalink,"https://www.reddit.com").toString(),n(this,Ot).emitEffect(t,{type:sm.EFFECT_NAVIGATE_TO_URL,navigateToUrl:{url:t}})}};Ot=new WeakMap;import{RealtimeSubscriptionStatus as xb}from"@devvit/protos";var ps,Ft,pr,om=class{constructor(e,t){l(this,ps,void 0);l(this,Ft,void 0);l(this,pr,void 0);d(this,ps,t.context),d(this,pr,e),d(this,Ft,t.invalidate);let i=t.context.meta[B.App]?.values[0];if(!i)throw Error("useChannel() missing app ID metadata");let s=t.context.meta[B.Installation]?.values[0];if(!s)throw Error("useChannel() missing install ID from metadata");this.state={channel:`${i}:${s}:${e.name}`,connected:!1,subscribed:!1}}async onUIEvent(e){let t=e.realtimeEvent;if(!(!t||!this.state.subscribed))switch(t.status){case xb.REALTIME_SUBSCRIBED:this.state.connected=!0,n(this,Ft).call(this),await n(this,pr).onSubscribed?.();break;case xb.REALTIME_UNSUBSCRIBED:this.state.connected=!1,n(this,Ft).call(this),await n(this,pr).onUnsubscribed?.();break;default:n(this,pr).onMessage(t.event?.data??{});break}}async send(e){if(!this.state.subscribed||!this.state.connected)throw Error(`send failed; ${this.state.channel} channel not connected`);await n(this,ps).devvitContext.realtime.send(this.state.channel,e)}get status(){return this.state.subscribed&&this.state.connected?2:this.state.subscribed&&!this.state.connected?1:!this.state.subscribed&&this.state.connected?3:4}subscribe(){this.state.subscribed||(this.state.subscribed=!0,n(this,Ft).call(this))}unsubscribe(){this.state.subscribed&&(this.state.subscribed=!1,n(this,Ft).call(this))}};ps=new WeakMap,Ft=new WeakMap,pr=new WeakMap;function Tb(r){return De({namespace:"useChannel"},e=>new om(r,e))}import{EffectType as am}from"@devvit/protos";var fi,pi=class pi{constructor(e,t){l(this,fi,void 0);this._segments=[];this._hooks={};this._prevHookId="";this._effects={};this._changed={};this._requeueEvents=[];this._rootProps={};this._generated={};this._undeliveredHandlers={};this.request=e,this.meta=t,d(this,fi,e.state??{}),this._rootProps=e.props??{}}get devvitContext(){if(!this._devvitContext)throw new Error("Devvit context not available");return this._devvitContext}set devvitContext(e){this._devvitContext=e}get _changedState(){let e={};for(let t in this._changed)e[t]=this._state[t];return e}get _state(){return n(this,fi)}set _state(e){this._changed={},d(this,fi,e)}push(e){this._segments.push({...e,next:0})}pop(){this._segments.pop()}addUndeliveredEventHandler(e,t){this._undeliveredHandlers[e]=t}addGlobalUndeliveredEventHandler(e,t){pi.addGlobalUndeliveredEventHandler(e,t)}getHook(e){return this._hooks[e.id]}static addGlobalUndeliveredEventHandler(e,t){pi._staticUndeliveredHandlers[e]=t}async handleUndeliveredEvent(e){let t={...pi._staticUndeliveredHandlers,...this._undeliveredHandlers};for(let[i,s]of Object.entries(t))await s(e,this)}emitEffect(e,t){this._effects[e]=t}addToRequeueEvents(...e){this._devvitContext?.debug.blocks&&console.debug("[blocks] requeueing events",e);let t=e.reduce((i,s)=>(s.retry?i.retry.push(s):i.normal.push(s),i),{retry:[],normal:[]});this._requeueEvents=[...t.retry,...this._requeueEvents,...t.normal]}get effects(){return Object.values(this._effects)}nextHookId(e){e.key===void 0&&(e.key=this._segments[this._segments.length-1].next+++""),this.push(e);try{let t=[];for(let s=this._segments.length-1;s>=0;s--){let o=this._segments[s];if(o.id){t.unshift(o.id);break}let a=[];o.namespace&&a.push(o.namespace),o.key!==void 0&&o.key!==!1&&a.push(o.key),t.unshift(a.join("-"))}let i=t.join(".");if(this._generated[i]&&!e.shared)throw new Error(`Hook id ${i} already used, cannot register another hook with the same id`);return this._generated[i]=!0,this._prevHookId=i,i}finally{this.pop()}}};fi=new WeakMap,pi._staticUndeliveredHandlers={};var gi=pi;var Mt={};gi.addGlobalUndeliveredEventHandler("intervals",async(r,e)=>{r.timer&&r.hook&&(delete Mt[r.hook],e.emitEffect("timers",{type:am.EFFECT_SET_INTERVALS,interval:{intervals:Mt}}))});var Ut,hi,fs,vi,dm=class{constructor(e,t,i){l(this,Ut,void 0);l(this,hi,void 0);l(this,fs,void 0);l(this,vi,void 0);this.state={duration:{seconds:0,nanos:0},running:!1};d(this,hi,i.invalidate),d(this,Ut,i.hookId),d(this,fs,e),d(this,vi,i.context);let s=Math.floor(t/1e3),o=t%1e3*1e6;this.state.duration={seconds:s,nanos:o}}onStateLoaded(){this.state.running?Mt[n(this,Ut)]={duration:this.state.duration}:delete Mt[n(this,Ut)]}async onUIEvent(e){await n(this,fs).call(this)}start(){Mt[n(this,Ut)]={duration:this.state.duration},this.state.running=!0,n(this,hi).call(this),n(this,vi).emitEffect("timers",{type:am.EFFECT_SET_INTERVALS,interval:{intervals:Mt}})}stop(){delete Mt[n(this,Ut)],this.state.running=!1,n(this,hi).call(this),n(this,vi).emitEffect("timers",{type:am.EFFECT_SET_INTERVALS,interval:{intervals:Mt}})}};Ut=new WeakMap,hi=new WeakMap,fs=new WeakMap,vi=new WeakMap;function lm(r,e){return De({namespace:"useInterval"},t=>new dm(r,e,t))}var yi=class extends Error{};function cm(r){let e=De({namespace:"useState"},({invalidate:t})=>{let i=r instanceof Function?r():r;if(i instanceof Promise)throw new Error("Cannot use async initializer with context.useState. Please use useAsyncState instead by importing it: import { Devvit, useAsyncState } from '@devvit/public-api';");return{state:i,setter:o=>{e.state=o instanceof Function?o(e.state):o,t()}}});return[e.state,e.setter]}var fr,gs,hs,bi,um=class{constructor(e,t){this.state={value:null,loading:!1};l(this,fr,void 0);l(this,gs,void 0);l(this,hs,void 0);l(this,bi,void 0);d(this,hs,e),d(this,bi,t.hookId),d(this,fr,t.invalidate),d(this,gs,t.context)}async onUIEvent(){this.state.value===null&&(this.state.value=await n(this,hs).call(this),this.state.loading=!1,n(this,fr).call(this))}setter(e){this.state.value=e instanceof Function?e(this.state.value):e,n(this,fr).call(this)}onStateLoaded(){if(this.state.value===null){this.state.loading=!0,n(this,fr).call(this);let e={asyncRequest:{requestId:n(this,bi)},hook:n(this,bi)};throw n(this,gs).addToRequeueEvents(e),new yi}}};fr=new WeakMap,gs=new WeakMap,hs=new WeakMap,bi=new WeakMap;function ER(r){let e=De({namespace:"useAsyncState"},t=>new um(r,t));return[e.state.value,e.setter.bind(e)]}var RR=new Proxy({},{get:function(r,e,t){throw new Error(`Unimplemented API: ${String(e)}`)}}),Nd=class{buildContext(e,t,i){let s=new Xr(i),o=new $r(i),a=new ei(i),c=new Yr(i),p=new ti(i),f=new ri(i),v=new _d(e),m=new Kr(i),y=new Jr,k=new si(i),I={modLog:s,kvStore:o,redis:a,reddit:c,scheduler:p,settings:f,media:m,assets:y,realtime:k,ui:v,useState:cm,useChannel:Tb,useInterval:lm,useForm:nm,cache:RR,dimensions:t.env?.dimensions,uiEnvironment:{timezone:i[B.Timezone]?.values[0],locale:i[B.Language]?.values[0],dimensions:t.env?.dimensions}},A=de(i,t.props?.postId);return A.debug.effects=e,{...A,...I}}};var ye=null;function mm(r){return JSON.parse(JSON.stringify(r))}function De(r,e){if(!ye)throw new Error("Hooks can only be declared at the top of a component.  You cannot declare hooks outside    of components or inside of event handlers.  It's almost always a mistake to declare hooks inside of loops or    conditionals.");let t=ye.nextHookId(r),i=ye,s={hookId:t,invalidate:()=>{i._changed[t]=!0,i._state[t]=i?._hooks[t]?.state},context:ye},o=ye._state[t]===void 0;ye._hooks[t]=ye._hooks[t]??e(s);let a=ye._hooks[t];return ye._state[t]!==void 0&&(a.state=ye._state[t]),a.onStateLoaded?.(),o&&a.state!==void 0&&a.state!==null&&s.invalidate(),a}var OR=null,ki,Gd,vs,ne,be,Pi,Hd,zd,Eb,ys,pm,Vd,Rb,bs,fm,ks,gm,Si,jd,Ps,hm,Jd,Ob,Wd=class{constructor(e){l(this,ne);l(this,Pi);l(this,zd);l(this,ys);l(this,Vd);l(this,bs);l(this,ks);l(this,Si);l(this,Ps);l(this,Jd);l(this,ki,void 0);l(this,Gd,new Nd);l(this,vs,new li(()=>this._latestRenderContext?.devvitContext?.assets));this._latestRenderContext=null;n(this,ne,be)&&console.debug("[blocks] BlocksHandler v1"),d(this,ki,e),OR=this}async handle(e,t){let i=new gi(e,t),s=n(this,Gd).buildContext(i,e,t);i.devvitContext=s;let o,a=e.events,p=!e.events?.length||a.some(k=>!k.async),f=a.some(k=>k.blocking),v,m,y=[...a];for(n(this,ne,be)&&console.debug("[blocks] starting processing events");a.length>0;){n(this,ne,be)&&console.debug("[blocks] processing events loop iteration",a.length);let k=[];if(!a[0].async)k.push(a.shift());else for(;a[0]?.async;)k.push(a.shift());if(!k.length)throw Error("batch must have at least one event");try{if(k[0].async){let I=mm(i._state);await b(this,zd,Eb).call(this,i,...k),i._state=I}else await b(this,Vd,Rb).call(this,i,...k)}catch(I){if(n(this,ne,be)&&console.debug("[blocks] caught in handler",I),m){i._state=m._state,i._changed=v,i._effects=m._effects;let A=y.map(U=>{let ue={...U};return ue.retry=!0,ue});i.addToRequeueEvents(...A);break}else throw I}n(this,ne,be)&&console.debug("[blocks] remaining events",i._requeueEvents);let C=[];for(let I of i._requeueEvents){if(!p&&!I.async){n(this,ne,be)&&console.debug("[blocks] NOT reprocessing event in BlocksHandler, sync mismatch A",I),C.push(I);continue}if(p&&I.async&&!f){n(this,ne,be)&&console.debug("[blocks] NOT reprocessing event in BlocksHandler, sync mismatch B",I),C.push(I);continue}n(this,ne,be)&&console.debug("[blocks] reprocessing event in BlocksHandler",I),a.push(I)}i._requeueEvents=C,a.length>0&&(v={...i._changed},m={_state:mm(i._state),_effects:{...i._effects}},y=[...a])}if(p){let k=mm(i._state),C=[...i._requeueEvents],I={...i._effects},A=b(this,bs,fm).call(this,n(this,ki),i._rootProps??{},i);(0,qd.default)(i._state,k)||console.error("[blocks] State was mutated during rendering",i._state,k),(0,qd.default)(i._requeueEvents,C)||console.error("[blocks] Events were mutated during rendering",i._requeueEvents,C),(0,qd.default)(i._effects,I)||console.error("[blocks] Effects were mutated during rendering",i._effects,I),A&&(o=n(this,vs).createBlocksElementOrThrow(A),o=n(this,vs).ensureRootBlock(o))}return{state:i._changedState,effects:i.effects,blocks:o,events:i._requeueEvents}}};ki=new WeakMap,Gd=new WeakMap,vs=new WeakMap,ne=new WeakSet,be=function(){return!!this._latestRenderContext?.devvitContext.debug.blocks},Pi=new WeakSet,Hd=function(e,...t){e._hooks={},b(this,bs,fm).call(this,n(this,ki),e.request.props??{},e)},zd=new WeakSet,Eb=async function(e,...t){b(this,Pi,Hd).call(this,e,...t),await Promise.all(t.map(async i=>{if(!i.async)throw new Error("You can't mix main and other queues in one batch.  This is likely a platform bug.  Please file an issue in the Discord for someone to help! https://discord.com/channels/1050224141732687912/1115441897079574620");await b(this,ys,pm).call(this,e,i)}))},ys=new WeakSet,pm=async function(e,t){let i=e._hooks[t.hook];if(i?.onUIEvent)try{await i.onUIEvent(t,e)}catch(s){throw console.error("Error in event handler",s),s}else await e.handleUndeliveredEvent(t)},Vd=new WeakSet,Rb=async function(e,...t){for(let i of t)n(this,ne,be)&&console.log("[blocks] handling main queue event",i),n(this,ne,be)&&console.log("[blocks] before",e._state),b(this,Pi,Hd).call(this,e,i),await b(this,ys,pm).call(this,e,i),n(this,ne,be)&&console.log("[blocks] after",e._state);b(this,Pi,Hd).call(this,e)},bs=new WeakSet,fm=function(e,t,i){n(this,ne,be)&&console.debug("[blocks] renderRoot"),i._generated={},ye=i,this._latestRenderContext=i;try{let s=b(this,ks,gm).call(this,e,t,i);if(s.length!==1)throw new Error("only one root");let o=s[0];if(typeof o=="string")throw new Error("There must be a root tag.  Try wrapping your app in a <text></text>, <vstack> or other tag.");return o}catch(s){if(s instanceof yi)return;throw s}finally{ye=null}},ks=new WeakSet,gm=function(e,t,i){i.push({namespace:e.name,...t});try{let s=e(t,i.devvitContext);return b(this,Ps,hm).call(this,s,i)}finally{i.pop()}},Si=new WeakSet,jd=function(e,t){return e=e.flat(1/0),e.flatMap((i,s)=>(i&&typeof i=="object"&&"props"in i&&(i.props?.key||(i.props=i.props??{},i.props.key=`${s}`)),b(this,Ps,hm).call(this,i,t)))},Ps=new WeakSet,hm=function(e,t){if(Array.isArray(e))return b(this,Si,jd).call(this,e,t);if(FR(e)){if(e.type===void 0)return b(this,Si,jd).call(this,e.children,t);if(typeof e.type=="function"){let i={...e.props,children:e.children};return b(this,ks,gm).call(this,e.type,i,t)}else{t.push({namespace:e.type,...e.props});let i=b(this,Si,jd).call(this,e.children,t),s=b(this,Jd,Ob).call(this,e.props??{});return t.pop(),[{type:e.type,children:i,props:s}]}}else return[(e??"").toString()]},Jd=new WeakSet,Ob=function(e){let t={};for(let i in e)if(typeof e[i]=="function"){let s=De({namespace:i,key:!1},({hookId:o})=>({hookId:o,state:null,onUIEvent:e[i]}));t[i]=s.hookId,"captureHookRef"in e[i]&&e[i].captureHookRef()}else{let s=JSON.parse(JSON.stringify(e[i]));s!=null&&(t[i]=s)}return t};function FR(r){return typeof r=="object"&&r!=null&&"type"in r}var MR=[[Fb,Fb.methods.renderPostContent,(r,e)=>u.customPostType?.render(e)??null]];function UR(r){return async(e,t)=>new Wd(r).handle(e,t)}function Mb(r){for(let[e,t,i]of MR)r.provides(e),M(t.name,UR(i))}var Ss,Ci,gr,hr,vr,Ii,wi,Bt,yr,_,H,V,Cs,L=class L extends nd{static configure(e){d(this,Ss,e),dt(e.http)&&b(this,H,V).call(this,S.HTTPDefinition),(dt(e.kvStore)||dt(e.redis))&&(b(this,H,V).call(this,S.KVStoreDefinition),b(this,H,V).call(this,S.RedisAPIDefinition)),dt(e.media)&&b(this,H,V).call(this,S.MediaServiceDefinition),dt(e.modLog)&&b(this,H,V).call(this,S.ModlogDefinition),dt(e.redditAPI)&&(b(this,H,V).call(this,S.FlairDefinition),b(this,H,V).call(this,S.GraphQLDefinition),b(this,H,V).call(this,S.LinksAndCommentsDefinition),b(this,H,V).call(this,S.ListingsDefinition),b(this,H,V).call(this,S.ModerationDefinition),b(this,H,V).call(this,S.ModNoteDefinition),b(this,H,V).call(this,S.NewModmailDefinition),b(this,H,V).call(this,S.PrivateMessagesDefinition),b(this,H,V).call(this,S.SubredditsDefinition),b(this,H,V).call(this,S.PostCollectionsDefinition),b(this,H,V).call(this,S.UsersDefinition),b(this,H,V).call(this,S.WidgetsDefinition),b(this,H,V).call(this,S.WikiDefinition),b(this,H,V).call(this,S.RedditAPIV2Definition)),dt(e.realtime)&&b(this,H,V).call(this,S.RealtimeDefinition)}static addMenuItem(e){n(this,Ci).push(e)}static addCustomPostType(e){d(this,gr,e)}static createForm(e,t){let i=`form.${n(this,hr).size}`;return n(this,hr).set(i,{form:e,onSubmit:t}),i}static addSchedulerJob(e){if(n(this,_)[S.SchedulerDefinition.fullName]||b(this,H,V).call(this,S.SchedulerDefinition),n(this,vr).has(e.name))throw new Error(`Job ${e.name} is already defined`);n(this,vr).set(e.name,e.onRun)}static addSettings(e){ir(e);let t=e.filter(s=>s.type==="group"||!s.scope||s.scope==="installation"),i=e.filter(s=>s.type!=="group"&&s.scope==="app");t.length>0&&d(this,Ii,t),i.length>0&&d(this,wi,i),n(this,_)[S.SettingsDefinition.fullName]||b(this,H,V).call(this,S.SettingsDefinition)}static addTrigger(e){if("events"in e){for(let t of e.events)this.addTrigger({event:t,onEvent:(i,s)=>e.onEvent(i,s)});return this}return n(this,Bt).has(e.event)?n(this,Bt).get(e.event)?.push(e.onEvent):n(this,Bt).set(e.event,[e.onEvent]),L}static get redditAPIPlugins(){if(!dt(n(this,Ss).redditAPI))throw new Error("Reddit API is not enabled. You can enable it by passing `redditAPI: true` to `Devvit.configure`.");return{Flair:n(this,_)[S.FlairDefinition.fullName],GraphQL:n(this,_)[S.GraphQLDefinition.fullName],LinksAndComments:n(this,_)[S.LinksAndCommentsDefinition.fullName],Listings:n(this,_)[S.ListingsDefinition.fullName],Moderation:n(this,_)[S.ModerationDefinition.fullName],ModNote:n(this,_)[S.ModNoteDefinition.fullName],NewModmail:n(this,_)[S.NewModmailDefinition.fullName],PrivateMessages:n(this,_)[S.PrivateMessagesDefinition.fullName],Subreddits:n(this,_)[S.SubredditsDefinition.fullName],PostCollections:n(this,_)[S.PostCollectionsDefinition.fullName],Users:n(this,_)[S.UsersDefinition.fullName],Widgets:n(this,_)[S.WidgetsDefinition.fullName],Wiki:n(this,_)[S.WikiDefinition.fullName]}}static get modLogPlugin(){let e=n(this,_)[S.ModlogDefinition.fullName];if(!e)throw new Error("ModLog is not enabled. You can enable it by passing `modLog: true` to `Devvit.configure`");return e}static get schedulerPlugin(){let e=n(this,_)[S.SchedulerDefinition.fullName];if(!e)throw new Error("Scheduler is not enabled. You can enable it by calling `Devvit.addSchedulerJob` at the top level of your app.");return e}static get kvStorePlugin(){let e=n(this,_)[S.KVStoreDefinition.fullName];if(!e)throw new Error("Key Value Store is not enabled. You can enable it by passing `kvStore: true` to `Devvit.configure`");return e}static get redisPlugin(){let e=n(this,_)[S.RedisAPIDefinition.fullName];if(!e)throw new Error("Redis is not enabled. You can enable it by passing `redis: true` to `Devvit.configure`");return e}static get mediaPlugin(){let e=n(this,_)[S.MediaServiceDefinition.fullName];if(!e)throw new Error("MediaService is not enabled. You can enable it by passing `media: true` to `Devvit.configure`");return e}static get redditapiv2Plugin(){let e=n(this,_)[S.RedditAPIV2Definition.fullName];if(!e)throw new Error("RedditAPIV2 is not enabled. You can enable it by passing `apiV2: true` to `Devvit.configure`");return e}static get settingsPlugin(){let e=n(this,_)[S.SettingsDefinition.fullName];if(!e)throw new Error("Settings is not enabled. You can enable it by passing `settings: true` to `Devvit.configure`");return e}static get realtimePlugin(){let e=n(this,_)[S.RealtimeDefinition.fullName];if(!e)throw new Error("Realtime is not enabled. You can enable it by passing `realtime: true` to `Devvit.configure`");return e}static get menuItems(){return n(this,Ci)}static get customPostType(){return n(this,gr)}static get formDefinitions(){return n(this,hr)}static get scheduledJobHandlers(){return n(this,vr)}static get installationSettings(){return n(this,Ii)}static get appSettings(){return n(this,wi)}static get triggerOnEventHandlers(){return n(this,Bt)}static get assets(){return n(L,Cs)}constructor(e){super(e),d(L,Cs,e.assets??{});for(let t in n(L,yr)){let i=n(L,yr)[t];i.handler=e.use(i.def,i.options)}n(L,Ci).length>0&&xy(e),n(L,vr).size>0&&Ty(e),n(L,gr)&&(Iy(e),Mb(e)),(n(L,gr)||n(L,hr).size>0)&&Ib(e),n(L,Ii)&&wy(e),n(L,wi)&&ny(e),n(L,Bt).size>0&&Ey(e)}};Ss=new WeakMap,Ci=new WeakMap,gr=new WeakMap,hr=new WeakMap,vr=new WeakMap,Ii=new WeakMap,wi=new WeakMap,Bt=new WeakMap,yr=new WeakMap,_=new WeakMap,H=new WeakSet,V=function(e,t){n(this,yr)[e.fullName]={def:e,options:t??{},handler:void 0};let i={};for(let s of Object.values(e.methods))i[s.name]=(o,a)=>n(this,yr)[e.fullName].handler?.[s.name]?.(s.requestType?.fromPartial(o??{}),a);return n(this,_)[e.fullName]=i,i},Cs=new WeakMap,l(L,H),L.debug={},l(L,Ss,{}),l(L,Ci,[]),l(L,gr,void 0),l(L,hr,new Map),l(L,vr,new Map),l(L,Ii,void 0),l(L,wi,void 0),l(L,Bt,new Map),l(L,yr,{}),l(L,_,{}),l(L,Cs,{});var u=L;(e=>{function r(t,i,...s){return{type:t,props:i,children:s}}e.createElement=r})(u||(u={}));function J(r){let e=Object.getOwnPropertyDescriptors(r.constructor.prototype);for(let[t,i]of Object.entries(e))i.get&&Object.defineProperty(r,t,{...i,enumerable:!0})}var vm;(function(r){r[r.bold=1]="bold",r[r.italic=2]="italic",r[r.underline=4]="underline",r[r.strikethrough=8]="strikethrough",r[r.subscript=16]="subscript",r[r.superscript=32]="superscript",r[r.monospace=64]="monospace"})(vm||(vm={}));var Ub="text",Bb="raw",Lb="br",Db="link",_b="c/",Nb="p/",qb="r/",Hb="u/",jb="@",Wb="spoilertext",Gb="par",zb="h",Vb="hr",Jb="blockquote",$b="code",Kb="li",Xb="list",Zb="L",Yb="R",Qb="C",ek="table",tk="embed",rk="img",ik="gif",nk="video";function sk(r){return{e:ik,id:r.mediaId,...r.caption&&{c:r.caption},...r.blur&&{o:r.blur}}}function ok(r,e){let t={},i=[];return Object.assign(t,Is(t,i),ws(t,i),As(t,i),Es(t,i),Rs(t,i),Os(t,i)),e(t),{e:Jb,c:i,...r.author&&{a:r.author}}}function ak(r,e){let t={},i=[];return Object.assign(t,bm(t,i)),e(t),{e:$b,c:i,...r.language&&{l:r.language}}}function dk(r){return{e:_b,t:r.permalink}}function lk(r,e){let t={},i=[];return Object.assign(t,bm(t,i),Ts(t,i)),e(t),{e:zb,l:r.level,c:i}}function uk(r){return{e:tk,u:r.sourceUrl,c:r.contentUrl,x:r.width,y:r.height}}function ck(){return{e:Vb}}function mk(r){return{e:rk,id:r.mediaId,...r.caption&&{c:r.caption},...r.blur&&{o:r.blur}}}function pk(){return{e:Lb}}function fk(r){return{e:Db,t:r.text,u:r.url,...r.formatting&&{f:r.formatting},...r.tooltip&&{a:r.tooltip}}}function gk(r,e){let t={},i=[];return Object.assign(t,Ok(t,i)),e(t),{e:Xb,o:r.ordered,c:i}}function hk(r){let e={},t=[];return Object.assign(e,Is(e,t),ws(e,t),As(e,t),$d(e,t),Es(e,t),Rs(e,t),Os(e,t)),r(e),{e:Kb,c:t}}function vk(r){let e={},t=[];return Object.assign(e,Kd(e,t),Ts(e,t),ym(e,t),km(e,t),xs(e,t)),r(e),{e:Gb,c:t}}function yk(r){return{e:Nb,t:r.permalink}}function bk(r){return{e:Bb,t:r}}function kk(r){let e={},t=[];return Object.assign(e,Kd(e,t),Ts(e,t),ym(e,t)),r(e),{e:Wb,c:t}}function Pk(r){return{e:qb,t:r.subredditName,l:r.showPrefix}}function Sk(r){let e={},t=[],i=[];return Object.assign(e,Fk(e,t,i)),r(e),{e:ek,h:t,c:i}}function Ck(r){let[e,t]=Rk();return r(e),{c:t}}function Ik(r,e){let[t,i]=Rk();e(t);let s;switch(r.columnAlignment){case"left":s=Zb;break;case"right":s=Yb;break;case"center":s=Qb;break}return{...s&&{a:s},...i&&{c:i}}}function wk(r){let e={},t=[];return Object.assign(e,Mk(e,t)),r(e),t}function Ak(r){return{e:Ub,t:r.text,...r.formatting&&{f:r.formatting}}}function xk(r){return{e:Hb,t:r.username,l:r.showPrefix}}function Tk(r){return{e:jb,t:r.username,l:r.showPrefix}}function Ek(r){return{e:nk,id:r.mediaId,...r.caption&&{c:r.caption},...r.blur&&{o:r.blur},...r.thumbnail&&{p:r.thumbnail},...r.convertToGif&&{gifify:r.convertToGif}}}function Rk(){let r={},e=[];return Object.assign(r,Kd(r,e),Ts(r,e),km(r,e),xs(r,e)),[r,e]}function Is(r,e){return{blockQuote(t,i){return e.push(ok(t,i)),r}}}function ws(r,e){return{codeBlock(t,i){return e.push(ak(t,i)),r}}}function Uk(r,e){return{embed(t){return e.push(uk(t)),r}}}function As(r,e){return{heading(t,i){return e.push(lk(t,i)),r}}}function $d(r,e){return{horizontalRule(){return e.push(ck()),r}}}function xs(r,e){return{image(t){return e.push(mk(t)),r},animatedImage(t){return e.push(sk(t)),r}}}function ym(r,e){return{linebreak(){return e.push(pk()),r}}}function Ts(r,e){return{link(t){return e.push(fk(t)),r},commentLink(t){return e.push(dk(t)),r},postLink(t){return e.push(yk(t)),r},subredditLink(t){return e.push(Pk(t)),r},userLink(t){return e.push(xk(t)),r},userMention(t){return e.push(Tk(t)),r}}}function Es(r,e){return{list(t,i){return e.push(gk(t,i)),r}}}function Ok(r,e){return{item(t){return e.push(hk(t)),r}}}function Rs(r,e){return{paragraph(t){return e.push(vk(t)),r}}}function bm(r,e){return{rawText(t){return e.push(bk(t)),r}}}function km(r,e){return{spoiler(t){return e.push(kk(t)),r}}}function Fk(r,e,t){return{headerCell(i,s){return e.push(Ik(i,s)),r},row(i){return t.push(wk(i)),r}}}function Os(r,e){return{table(t){return e.push(Sk(t)),r}}}function Mk(r,e){return{cell(t){return e.push(Ck(t)),r}}}function Kd(r,e){return{text(t){return e.push(Ak(t)),r}}}function Bk(r,e){return{video(t){return e.push(Ek(t)),r}}}var BR=function(r,e,t,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},LR=function(r,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(r):i?i.value:e.get(r)},Xd,Fs=class{constructor(){Xd.set(this,void 0);let e=[];Object.assign(this,Rs(this,e),As(this,e),$d(this,e),Is(this,e),ws(this,e),Uk(this,e),Es(this,e),Os(this,e),xs(this,e),Bk(this,e)),BR(this,Xd,{document:e},"f")}build(){return JSON.stringify(LR(this,Xd,"f"))}paragraph(e){return this}heading(e,t){return this}horizontalRule(){return this}blockQuote(e,t){return this}codeBlock(e,t){return this}embed(e){return this}list(e,t){return this}table(e){return this}image(e){return this}animatedImage(e){return this}video(e){return this}};Xd=new WeakMap;function Ai(r){let e;return r instanceof Fs?e=r.build():typeof r=="object"?e=JSON.stringify(r):e=r,e}var Lk=100,Dk=1/0,br,kr,Lt,xi,Ti,Zd,j=class{constructor(e){l(this,Ti);l(this,br,void 0);l(this,kr,void 0);l(this,Lt,void 0);l(this,xi,!1);this.pageSize=Lk;this.limit=Dk;this.children=[];J(this),this._fetch=e.fetch,this.pageSize=e.pageSize??Lk,this.limit=e.limit??Dk,d(this,kr,e.after),d(this,br,e.before),d(this,Lt,e.more),e.children&&(this.children=e.children)}get hasMore(){return!n(this,xi)||!!(n(this,kr)||n(this,br)||n(this,Lt))}async*[Symbol.asyncIterator](){let e=0;for(;;){if(e===this.children.length)if(this.hasMore){if((await b(this,Ti,Zd).call(this)).length===0)break}else break;if(yield this.children[e],e++,e===this.limit)break}}setMore(e){d(this,Lt,e)}preventInitialFetch(){d(this,xi,!0)}async all(){for(;this.hasMore&&this.children.length<this.limit;)await b(this,Ti,Zd).call(this);return this.children.slice(0,this.limit)}async get(e){let t=e<=this.limit?e:this.limit;for(;this.hasMore&&this.children.length<t;)await b(this,Ti,Zd).call(this);return this.children.slice(0,t)}};br=new WeakMap,kr=new WeakMap,Lt=new WeakMap,xi=new WeakMap,Ti=new WeakSet,Zd=async function(){if(!this.hasMore)throw new Error("This listing does not have any more items to load.");let{children:e,before:t,after:i,more:s}=await this._fetch({before:n(this,br),after:n(this,kr),limit:this.pageSize,more:n(this,Lt)});return this.children.push(...e),d(this,br,t),d(this,kr,i),d(this,Lt,s),d(this,xi,!0),e};function DR(r){try{return!0}catch{return!1}}function _R(r){try{return!0}catch{return!1}}var Ms,Pm,Fe=class{constructor(){}static get(e,t){let i=u.redditAPIPlugins.ModNote;return new j({hasMore:!0,before:e.before,limit:e.limit,pageSize:e.limit,fetch:async s=>{let o=await i.GetNotes({subreddit:e.subreddit,user:e.user,filter:e.filter,before:s.before,limit:s.limit},t);return{children:o.modNotes?.map(a=>b(this,Ms,Pm).call(this,a))||[],before:o.hasNextPage?o.endCursor:void 0,hasMore:o.hasNextPage}}})}static async delete(e,t){let i=u.redditAPIPlugins.ModNote,{deleted:s}=await i.DeleteNotes(e,t);return!!s}static async add(e,t){let s=await u.redditAPIPlugins.ModNote.PostNotes(e,t);if(!s?.created)throw new Error("Failed to create mod note");return b(this,Ms,Pm).call(this,s.created)}static async addRemovalNote(e,t){await u.redditAPIPlugins.ModNote.PostRemovalNote(e,t)}};Ms=new WeakSet,Pm=function(e){if(g(e.id,"Mod note ID is null or undefined"),g(e.createdAt,"Mod note createdAt is null or undefined"),g(e.type,"Mod note type is null or undefined"),g(e.subreddit,"Mod note subreddit is null or undefined"),g(e.subredditId,"Mod note subredditId is null or undefined"),g(e.operator,"Mod note operator is null or undefined"),g(e.operatorId,"Mod note operatorId is null or undefined"),g(e.user,"Mod note user is null or undefined"),g(e.userId,"Mod note userId is null or undefined"),g(e.userNoteData,"Mod note userNote is null or undefined"),g(e.modActionData,"Mod note modAction is null or undefined"),!DR(e.userNoteData?.label??""))throw new Error(`Invalid user note label: ${e.userNoteData?.label}`);if(!_R(e.type))throw new Error(`Invalid mod note type: ${e.type}`);return{id:e.id,user:{id:te(e.userId??""),name:e.user},subreddit:{id:Re(e.subredditId??""),name:e.subreddit},operator:{id:te(e.operatorId??""),name:e.operator},createdAt:new Date(e.createdAt*1e3),userNote:{note:e.userNoteData?.note,redditId:ge(e.userNoteData?.redditId??""),label:e.userNoteData?.label},type:e.type}},l(Fe,Ms);var Ei=class{static queryWithQueryString(e,t){return u.redditAPIPlugins.GraphQL.Query({query:e},t)}static query(e,t,i,s){return u.redditAPIPlugins.GraphQL.PersistedQuery({operationName:e,id:t,variables:i},s)}};var _k=["all","wiki","posts","access","mail","config","flair","channels","chat_config","chat_community","chat_operator"];function NR(r,e,t=!1){let i=t?"%2b":"+";return e.map(s=>(r.includes(s)?i:"-")+s).join(",")}function Sm(r){return NR(r,_k,!0)}function Nk(r){return r.filter(e=>_k.includes(e))}var qR=(t=>(t.User="USER_FLAIR",t.Post="LINK_FLAIR",t))(qR||{}),Pr,Ri,Oi,Fi,Mi,Ui,Bi,Li,Di,_i,Ni,Yd,Je=class Je{constructor(e,t,i){l(this,Pr,void 0);l(this,Ri,void 0);l(this,Oi,void 0);l(this,Fi,void 0);l(this,Mi,void 0);l(this,Ui,void 0);l(this,Bi,void 0);l(this,Li,void 0);l(this,Di,void 0);l(this,_i,void 0);J(this),g(e.id),g(e.text),d(this,Pr,e.id),d(this,Ri,t),d(this,Oi,e.text),d(this,Fi,HR(e.textColor)),d(this,Mi,jR(e.backgroundColor)),d(this,Ui,WR(e.allowableContent)),d(this,Bi,e.modOnly),d(this,Li,e.maxEmojis),d(this,Di,e.textEditable),d(this,_i,i)}get id(){return n(this,Pr)}get text(){return n(this,Oi)}get textColor(){return n(this,Fi)}get backgroundColor(){return n(this,Mi)}get allowableContent(){return n(this,Ui)}get modOnly(){return n(this,Bi)}get maxEmojis(){return n(this,Li)}get allowUserEdits(){return n(this,Di)}async delete(){return Je.deleteFlairTemplate(n(this,Pr),n(this,Ri),n(this,_i))}async edit(e){return Je.editFlairTemplate({id:n(this,Pr),subredditName:n(this,Ri),text:e.text??n(this,Oi),allowableContent:e.allowableContent??n(this,Ui),backgroundColor:e.backgroundColor??n(this,Mi),maxEmojis:e.maxEmojis??n(this,Li),modOnly:e.modOnly??n(this,Bi),textColor:e.textColor??n(this,Fi),allowUserEdits:e.allowUserEdits??n(this,Di)},n(this,_i))}static async createPostFlairTemplate(e,t){var i;return b(i=Je,Ni,Yd).call(i,{...e,flairType:"LINK_FLAIR"},t)}static async createUserFlairTemplate(e,t){var i;return b(i=Je,Ni,Yd).call(i,{...e,flairType:"USER_FLAIR"},t)}static async editFlairTemplate(e,t){var i;return b(i=Je,Ni,Yd).call(i,e,t)}static async getPostFlairTemplates(e,t){return(await u.redditAPIPlugins.Flair.LinkFlair({subreddit:e},t)).flair?.map(o=>new Je(o,e,t))||[]}static async getUserFlairTemplates(e,t){return(await u.redditAPIPlugins.Flair.UserFlair({subreddit:e},t)).flair?.map(o=>new Je(o,e,t))||[]}static async deleteFlairTemplate(e,t,i){await u.redditAPIPlugins.Flair.DeleteFlairTemplate({subreddit:e,flairTemplateId:t},i)}};Pr=new WeakMap,Ri=new WeakMap,Oi=new WeakMap,Fi=new WeakMap,Mi=new WeakMap,Ui=new WeakMap,Bi=new WeakMap,Li=new WeakMap,Di=new WeakMap,_i=new WeakMap,Ni=new WeakSet,Yd=async function(e,t){let{subredditName:i,allowableContent:s="all",backgroundColor:o="transparent",flairType:a="",maxEmojis:c=10,modOnly:p=!1,text:f,textColor:v="dark",allowUserEdits:m=!1,id:y=""}=e;if(p&&m)throw new Error("Cannot have a mod only flair that is editable by users");let C=await u.redditAPIPlugins.Flair.FlairTemplate({subreddit:i,allowableContent:s,backgroundColor:o,flairType:a,maxEmojis:c,modOnly:p,text:f,textColor:v,textEditable:m,flairTemplateId:y,cssClass:"",overrideCss:!1},t);return new Je(C,i,t)},l(Je,Ni);var ae=Je;function Ls(r){return{flairCssClass:r.flairCssClass,user:r.user,flairText:r.flairText}}var Us,Cm,Bs,Im,Dt=class Dt{static async getUserFlairBySubreddit(e,t){return u.redditAPIPlugins.Flair.FlairList(e,t)}static setUserFlair(e,t){var i;return b(i=Dt,Us,Cm).call(i,e,t)}static setPostFlair(e,t){var i;return b(i=Dt,Us,Cm).call(i,{...e,postId:fe(e.postId)},t)}static async removePostFlair(e,t,i){var s;return b(s=Dt,Bs,Im).call(s,e,t,void 0,i)}static async removeUserFlair(e,t,i){var s;return b(s=Dt,Bs,Im).call(s,e,void 0,t,i)}};Us=new WeakSet,Cm=async function(e,t){await u.redditAPIPlugins.Flair.SelectFlair({subreddit:e.subredditName,flairTemplateId:e.flairTemplateId??"",text:e.text??"",name:e.username,link:e.postId,backgroundColor:e.backgroundColor??"",textColor:e.textColor??"dark",cssClass:e.cssClass??"",returnRtjson:"none"},t)},Bs=new WeakSet,Im=async function(e,t,i,s){await u.redditAPIPlugins.Flair.SelectFlair({subreddit:e,name:i??"",link:t??"",flairTemplateId:"",backgroundColor:"",text:"",textColor:"",cssClass:"",returnRtjson:"none"},s)},l(Dt,Us),l(Dt,Bs);var Me=Dt;function HR(r){if(g(r,"Flair text color is required"),r==="light"||r==="dark")return r;throw new Error(`Invalid flair text color: ${r}`)}function jR(r){if(g(r,"Flair background color is required"),r==="transparent"||/^#([A-Fa-f0-9]{6})$/.test(r))return r;throw new Error(`Invalid flair background color: ${r}`)}function WR(r){if(r==="all"||r==="text"||r==="emoji")return r;throw new Error(`Invalid allowable content: ${r}`)}import{Block as ZR}from"@devvit/protos";var Wk=Rr(jk(),1);var qi,_s,Hi,Ns,qs,Hs,js,Ws,ji,Gs,zs,Vs,Js,$s,Ks,_t,Cr,Wi,Nt,Gi,zi,Vi,Ir,qt,Ht,Ji,jt,Wt,Gt,ct,Xs,Zs,$i,Ki,D,N=class N{constructor(e,t){l(this,qi,void 0);l(this,_s,void 0);l(this,Hi,void 0);l(this,Ns,void 0);l(this,qs,void 0);l(this,Hs,void 0);l(this,js,void 0);l(this,Ws,void 0);l(this,ji,void 0);l(this,Gs,void 0);l(this,zs,void 0);l(this,Vs,void 0);l(this,Js,void 0);l(this,$s,void 0);l(this,Ks,void 0);l(this,_t,void 0);l(this,Cr,void 0);l(this,Wi,void 0);l(this,Nt,void 0);l(this,Gi,void 0);l(this,zi,void 0);l(this,Vi,void 0);l(this,Ir,void 0);l(this,qt,void 0);l(this,Ht,void 0);l(this,Ji,void 0);l(this,jt,void 0);l(this,Wt,void 0);l(this,Gt,void 0);l(this,ct,void 0);l(this,Xs,void 0);l(this,Zs,void 0);l(this,$i,void 0);l(this,Ki,void 0);l(this,D,void 0);J(this),g(e.id,"Post is missing id"),g(e.title,"Post is missing title"),g(e.createdUtc,"Post is missing created date"),g(e.author,"Post is missing author name"),g(e.subreddit,"Post is missing subreddit name"),g(e.subredditId,"Post is missing subreddit id"),g(e.url,"Post is missing url"),g(e.permalink,"Post is missing permalink"),d(this,qi,fe(`t3_${e.id}`)),d(this,Hi,e.author),d(this,_s,e.authorFullname?te(e.authorFullname):void 0),d(this,qs,Re(e.subredditId)),d(this,Hs,e.subreddit),d(this,Vs,e.score??0),d(this,Js,e.numComments??0),d(this,$s,e.numReports??0);let i=new Date(0);i.setUTCSeconds(e.createdUtc),d(this,Ns,i),d(this,Ws,e.title),d(this,ji,e.selftext),d(this,Gs,e.selftextHtml),d(this,zs,e.url),d(this,js,e.permalink),e.thumbnail&&e.thumbnail!=="self"&&e.thumbnail!=="nsfw"&&e.thumbnailHeight!=null&&e.thumbnailWidth!=null&&d(this,Ks,{url:e.thumbnail,height:e.thumbnailHeight,width:e.thumbnailWidth}),d(this,_t,e.approved??!1),d(this,Nt,e.removed??!1),d(this,Gi,e.removedBy),d(this,zi,e.removedByCategory),d(this,Cr,e.spam??!1),d(this,Wi,e.stickied??!1),d(this,Vi,e.archived??!1),d(this,Ir,e.edited??!1),d(this,qt,e.locked??!1),d(this,Ht,e.over18??!1),d(this,Ji,e.quarantine??!1),d(this,jt,e.spoiler),d(this,Wt,e.hidden??!1),d(this,Gt,e.ignoreReports??!1),d(this,ct,e.distinguished),d(this,Zs,e.secureMedia),d(this,$i,(e.modReports??[]).map(([s])=>s)),d(this,Ki,(e.userReports??[]).map(([s])=>s)),d(this,D,t),(e.linkFlairBackgroundColor||e.linkFlairCssClass||e.linkFlairText||e.linkFlairType||e.linkFlairTemplateId||e.linkFlairRichtext||e.linkFlairTextColor)&&d(this,Xs,{backgroundColor:e.linkFlairBackgroundColor,cssClass:e.linkFlairCssClass,text:e.linkFlairText,type:e.linkFlairType,templateId:e.linkFlairTemplateId,richtext:(e.linkFlairRichtext??[]).map(({e:s,t:o,a,u:c})=>({elementType:s,text:o,emojiRef:a,url:c})),textColor:e.linkFlairTextColor})}get id(){return n(this,qi)}get authorId(){return n(this,_s)}get authorName(){return n(this,Hi)}get subredditId(){return n(this,qs)}get subredditName(){return n(this,Hs)}get permalink(){return n(this,js)}get title(){return n(this,Ws)}get body(){return n(this,ji)}get bodyHtml(){return n(this,Gs)}get url(){return n(this,zs)}get thumbnail(){return n(this,Ks)}get createdAt(){return n(this,Ns)}get score(){return n(this,Vs)}get numberOfComments(){return n(this,Js)}get numberOfReports(){return n(this,$s)}get approved(){return n(this,_t)}get spam(){return n(this,Cr)}get stickied(){return n(this,Wi)}get removed(){return n(this,Nt)}get removedBy(){return n(this,Gi)}get removedByCategory(){return n(this,zi)}get archived(){return n(this,Vi)}get edited(){return n(this,Ir)}get locked(){return n(this,qt)}get nsfw(){return n(this,Ht)}get quarantined(){return n(this,Ji)}get spoiler(){return n(this,jt)}get hidden(){return n(this,Wt)}get ignoringReports(){return n(this,Gt)}get distinguishedBy(){return n(this,ct)}get comments(){return X.getComments({postId:this.id},n(this,D))}get flair(){return n(this,Xs)}get secureMedia(){return n(this,Zs)}get userReportReasons(){return n(this,Ki)}get modReportReasons(){return n(this,$i)}toJSON(){return{id:this.id,authorId:this.authorId,authorName:this.authorName,subredditId:this.subredditId,subredditName:this.subredditName,permalink:this.permalink,title:this.title,body:this.body,bodyHtml:this.bodyHtml,url:this.url,thumbnail:this.thumbnail,score:this.score,numberOfComments:this.numberOfComments,numberOfReports:this.numberOfReports,createdAt:this.createdAt,approved:this.approved,spam:this.spam,stickied:this.stickied,removed:this.removed,removedBy:n(this,Gi),removedByCategory:n(this,zi),archived:this.archived,edited:this.edited,locked:this.locked,nsfw:this.nsfw,quarantined:this.quarantined,spoiler:this.spoiler,hidden:this.hidden,ignoringReports:this.ignoringReports,distinguishedBy:this.distinguishedBy,flair:this.flair,secureMedia:this.secureMedia,modReportReasons:n(this,$i),userReportReasons:n(this,Ki)}}isApproved(){return n(this,_t)}isSpam(){return n(this,Cr)}isStickied(){return n(this,Wi)}isRemoved(){return n(this,Nt)}isArchived(){return n(this,Vi)}isEdited(){return n(this,Ir)}isLocked(){return n(this,qt)}isNsfw(){return n(this,Ht)}isQuarantined(){return n(this,Ji)}isSpoiler(){return n(this,jt)}isHidden(){return n(this,Wt)}isIgnoringReports(){return n(this,Gt)}isDistinguishedBy(){return n(this,ct)}async edit(e){let t=await N.edit({id:this.id,...e},n(this,D));d(this,ji,t.body),d(this,Ir,t.edited)}async addComment(e){return X.submit({id:this.id,...e},n(this,D))}async delete(){return N.delete(this.id,n(this,D))}async approve(){await N.approve(this.id,n(this,D)),d(this,_t,!0),d(this,Nt,!1)}async remove(e=!1){await N.remove(this.id,e,n(this,D)),d(this,Nt,!0),d(this,Cr,e),d(this,_t,!1)}async lock(){await N.lock(this.id,n(this,D)),d(this,qt,!0)}async unlock(){await N.unlock(this.id,n(this,D)),d(this,qt,!1)}async hide(){await N.hide(this.id,n(this,D)),d(this,Wt,!0)}async unhide(){await N.unhide(this.id,n(this,D)),d(this,Wt,!1)}async markAsNsfw(){await N.markAsNsfw(this.id,n(this,D)),d(this,Ht,!0)}async unmarkAsNsfw(){await N.unmarkAsNsfw(this.id,n(this,D)),d(this,Ht,!1)}async markAsSpoiler(){await N.markAsSpoiler(this.id,n(this,D)),d(this,jt,!0)}async unmarkAsSpoiler(){await N.unmarkAsSpoiler(this.id,n(this,D)),d(this,jt,!1)}async sticky(e){await N.sticky(this.id,e,n(this,D))}async unsticky(){await N.unsticky(this.id,n(this,D))}async distinguish(){let{distinguishedBy:e}=await N.distinguish(this.id,!1,n(this,D));d(this,ct,e)}async distinguishAsAdmin(){let{distinguishedBy:e}=await N.distinguish(this.id,!0,n(this,D));d(this,ct,e)}async undistinguish(){let{distinguishedBy:e}=await N.undistinguish(this.id,n(this,D));d(this,ct,e)}async ignoreReports(){await N.ignoreReports(this.id,n(this,D)),d(this,Gt,!0)}async unignoreReports(){await N.unignoreReports(this.id,n(this,D)),d(this,Gt,!1)}async getAuthor(){return w.getByUsername(n(this,Hi),n(this,D))}async crosspost(e){return N.crosspost({...e,postId:this.id},n(this,D))}addRemovalNote(e){return Fe.addRemovalNote({itemIds:[n(this,qi)],...e},n(this,D))}static async getById(e,t){let i=u.redditAPIPlugins.LinksAndComments,s=rr(e)?e:`t3_${e}`,o=await i.Info({subreddits:[],thingIds:[s]},t);if(!o.data?.children?.length)throw new Error("could not find post");let a=o.data.children[0];if(!a?.data)throw new Error("could not find post");return new N(a.data,t)}static async submit(e,t){let i=u.redditAPIPlugins.LinksAndComments,s;if("preview"in e){g(t,"Missing metadata in `SubmitPostOptions`");let c=await new at(()=>e.preview,void 0,{},t,void 0).buildBlocksUI(),p=ZR.encode(c).finish();s=await i.Submit({kind:"custom",sr:e.subredditName,richtextJson:(0,Wk.fromByteArray)(p),...e},t)}else s=await i.Submit({kind:"kind"in e?e.kind:"url"in e?"link":"self",sr:e.subredditName,richtextJson:"richtext"in e?Ai(e.richtext):void 0,...e},t);if("kind"in e&&["image","video","videogif"].includes(e.kind)&&!s.json?.data?.id&&"url"in e)throw new Error(`Post of ${e.kind} type with ${e.url} is being created asynchronously and should be updated in the subreddit soon.`);if(!s.json?.data?.id||s.json?.errors?.length)throw new Error(`failed to submit post - either post ID is empty or request failed with errors: ${s.json?.errors}`);return N.getById(`t3_${s.json.data.id}`,t)}static async crosspost(e,t){let i=u.redditAPIPlugins.LinksAndComments,{postId:s,subredditName:o,...a}=e,c=await i.Submit({kind:"crosspost",sr:o,crosspostFullname:fe(s),...a},t);if(!c.json?.data?.id||c.json?.errors?.length)throw new Error("failed to crosspost post");return N.getById(`t3_${c.json.data.id}`,t)}static async edit(e,t){let i=u.redditAPIPlugins.LinksAndComments,{id:s}=e,o;if("richtext"in e&&(o=Ai(e.richtext)),(await i.EditUserText({thingId:s,text:"text"in e?e.text:"",richtextJson:o},t)).json?.errors?.length)throw new Error("Failed to edit post");return N.getById(s,t)}static async delete(e,t){await u.redditAPIPlugins.LinksAndComments.Del({id:e},t)}static async approve(e,t){await u.redditAPIPlugins.Moderation.Approve({id:e},t)}static async remove(e,t=!1,i){await u.redditAPIPlugins.Moderation.Remove({id:e,spam:t},i)}static async hide(e,t){await u.redditAPIPlugins.LinksAndComments.Hide({id:e},t)}static async unhide(e,t){await u.redditAPIPlugins.LinksAndComments.Unhide({id:e},t)}static async markAsNsfw(e,t){await u.redditAPIPlugins.LinksAndComments.MarkNSFW({id:e},t)}static async unmarkAsNsfw(e,t){await u.redditAPIPlugins.LinksAndComments.UnmarkNSFW({id:e},t)}static async markAsSpoiler(e,t){await u.redditAPIPlugins.LinksAndComments.Spoiler({id:e},t)}static async unmarkAsSpoiler(e,t){await u.redditAPIPlugins.LinksAndComments.Unspoiler({id:e},t)}static async sticky(e,t,i){await u.redditAPIPlugins.LinksAndComments.SetSubredditSticky({id:e,state:!0,num:t},i)}static async unsticky(e,t){await u.redditAPIPlugins.LinksAndComments.SetSubredditSticky({id:e,state:!1},t)}static async lock(e,t){await u.redditAPIPlugins.LinksAndComments.Lock({id:e},t)}static async unlock(e,t){await u.redditAPIPlugins.LinksAndComments.Unlock({id:e},t)}static async distinguish(e,t,i){let a=(await u.redditAPIPlugins.Moderation.Distinguish({id:e,how:t?"admin":"yes",sticky:!1},i)).json?.data?.things?.[0]?.data;return g(a),{distinguishedBy:a.distinguished}}static async undistinguish(e,t){let o=(await u.redditAPIPlugins.Moderation.Distinguish({id:e,how:"no",sticky:!1},t)).json?.data?.things?.[0]?.data;return g(o),{distinguishedBy:o.distinguished}}static async ignoreReports(e,t){await u.redditAPIPlugins.Moderation.IgnoreReports({id:e},t)}static async unignoreReports(e,t){await u.redditAPIPlugins.Moderation.UnignoreReports({id:e},t)}static getControversialPosts(e={},t){return this.getSortedPosts({...e,sort:"controversial"},t)}static getTopPosts(e={},t){return this.getSortedPosts({...e,sort:"top"},t)}static getSortedPosts(e,t){let i=u.redditAPIPlugins.Listings;return new j({hasMore:!0,before:e.before,after:e.after,pageSize:e.pageSize,limit:e.limit,fetch:async s=>{let o=await i.Sort({show:"all",sort:e.sort,t:e.timeframe,subreddit:e.subredditName,...s},t);return Ds(o,t)}})}static getHotPosts(e={location:"GLOBAL"},t){let i=u.redditAPIPlugins.Listings;return new j({hasMore:!0,before:e.before,after:e.after,pageSize:e.pageSize,limit:e.limit,fetch:async s=>{let o=await i.Hot({g:e.location,show:"all",subreddit:e.subredditName,...s},t);return Ds(o,t)}})}static getNewPosts(e,t){let i=u.redditAPIPlugins.Listings;return new j({hasMore:!0,before:e.before,after:e.after,pageSize:e.pageSize,limit:e.limit,fetch:async s=>{let o=await i.New({show:"all",subreddit:e.subredditName,...s},t);return Ds(o,t)}})}static getRisingPosts(e,t){let i=u.redditAPIPlugins.Listings;return new j({hasMore:!0,before:e.before,after:e.after,pageSize:e.pageSize,limit:e.limit,fetch:async s=>{let o=await i.Rising({show:"all",subreddit:e.subredditName,...s},t);return Ds(o,t)}})}static getPostsByUser(e,t){let i=u.redditAPIPlugins.Users;return new j({hasMore:!0,before:e.before,after:e.after,pageSize:e.pageSize,limit:e.limit,async fetch(s){let o=await i.UserWhere({username:e.username,where:"submitted",...s},t);return Ds(o,t)}})}};qi=new WeakMap,_s=new WeakMap,Hi=new WeakMap,Ns=new WeakMap,qs=new WeakMap,Hs=new WeakMap,js=new WeakMap,Ws=new WeakMap,ji=new WeakMap,Gs=new WeakMap,zs=new WeakMap,Vs=new WeakMap,Js=new WeakMap,$s=new WeakMap,Ks=new WeakMap,_t=new WeakMap,Cr=new WeakMap,Wi=new WeakMap,Nt=new WeakMap,Gi=new WeakMap,zi=new WeakMap,Vi=new WeakMap,Ir=new WeakMap,qt=new WeakMap,Ht=new WeakMap,Ji=new WeakMap,jt=new WeakMap,Wt=new WeakMap,Gt=new WeakMap,ct=new WeakMap,Xs=new WeakMap,Zs=new WeakMap,$i=new WeakMap,Ki=new WeakMap,D=new WeakMap;var z=N;function Ds(r,e){if(!r.data?.children)throw new Error("Listing response is missing children");return{children:r.data.children.map(i=>new z(i.data,e)),before:r.data.before,after:r.data.after}}var Ys,Xi,Qs,eo,to,ro,io,zt,no,so,mt,wr=class wr{constructor(e,t){l(this,Ys,void 0);l(this,Xi,void 0);l(this,Qs,void 0);l(this,eo,void 0);l(this,to,void 0);l(this,ro,void 0);l(this,io,void 0);l(this,zt,new Map);l(this,no,void 0);l(this,so,void 0);l(this,mt,void 0);J(this),g(e.id,"User ID is missing or undefined"),g(e.name,"Username is missing or undefined"),g(e.createdUtc,"User is missing created date"),d(this,Ys,te(id(e.id)?e.id:`t2_${e.id}`)),d(this,Xi,e.name),d(this,ro,e.over18??!1),d(this,io,e.isEmployee??!1);let i=new Date(0);if(i.setUTCSeconds(e.createdUtc),d(this,Qs,i),d(this,eo,e.linkKarma??0),d(this,to,e.commentKarma??0),e.modPermissions)for(let[s,o]of Object.entries(e.modPermissions))n(this,zt).set(s,Nk(o));d(this,no,new URL(e.subreddit?.url??"","https://www.reddit.com").toString()),d(this,so,e.subreddit?.url??""),d(this,mt,t)}get id(){return n(this,Ys)}get username(){return n(this,Xi)}get createdAt(){return n(this,Qs)}get linkKarma(){return n(this,eo)}get commentKarma(){return n(this,to)}get nsfw(){return n(this,ro)}get isAdmin(){return n(this,io)}get modPermissions(){return n(this,zt)}get url(){return n(this,no)}get permalink(){return n(this,so)}toJSON(){return{id:this.id,username:this.username,createdAt:this.createdAt,linkKarma:this.linkKarma,commentKarma:this.commentKarma,nsfw:this.nsfw,modPermissionsBySubreddit:Object.fromEntries(this.modPermissions)}}async getModPermissionsForSubreddit(e){if(n(this,zt).has(e))return n(this,zt).get(e);let t=await wr.getSubredditUsersByType({subredditName:e,type:"moderators",username:this.username},n(this,mt)).all();if(t.length===0)return[];let i=t[0].modPermissions.get(e)??[];return i.length>0&&n(this,zt).set(e,i),i}getComments(e){return X.getCommentsByUser({username:this.username,...e},n(this,mt))}getPosts(e){return z.getPostsByUser({username:this.username,...e},n(this,mt))}async getUserFlairBySubreddit(e){let t=await Me.getUserFlairBySubreddit({subreddit:e,name:n(this,Xi)},n(this,mt));return t.users[0]?Ls(t.users[0]):void 0}getSnoovatarUrl(){return wr.getSnoovatarUrl(this.username,n(this,mt))}static async getById(e,t){let o=(await u.redditAPIPlugins.Users.UserDataByAccountIds({ids:e},t))?.users?.[e]?.name;return g(o,"Expected the username in response to be not null"),wr.getByUsername(o,t)}static async getByUsername(e,t){let s=await u.redditAPIPlugins.Users.UserAbout({username:e},t);if(!s.data?.id)throw new Error("failed to get user");return new wr(s.data,t)}static async getFromMetadata(e,t){g(t);let i=t?.[e]?.values[0];return i?wr.getById(te(i),t):Promise.resolve(void 0)}static getSubredditUsersByType(e,t){let i=u.redditAPIPlugins.Subreddits;return new j({hasMore:!0,pageSize:e.pageSize,limit:e.limit,after:e.after,before:e.before,fetch:async s=>{let o=await i.AboutWhere({where:e.type,user:e.username,subreddit:e.subredditName,show:"all",...s},t);return QR(o,e.subredditName,t)}})}static async createRelationship(e,t){let i=u.redditAPIPlugins.Users,{type:s,subredditName:o,username:a,permissions:c,...p}=e,f=await i.Friend({type:s,subreddit:o,name:a,permissions:c?Sm(c):void 0,...p},t);if(f.json?.errors?.length)throw new Error(f.json.errors.join(`
`))}static async removeRelationship(e,t){await u.redditAPIPlugins.Users.Unfriend({type:e.type,subreddit:e.subredditName,name:e.username},t)}static async setModeratorPermissions(e,t,i,s){let a=await u.redditAPIPlugins.Users.SetPermissions({subreddit:t,name:e,type:"moderator",permissions:Sm(i)},s);if(a.json?.errors?.length)throw new Error(a.json.errors.join(`
`))}static async getSnoovatarUrl(e,t){let i="GetSnoovatarUrlByName",s="c47fd42345af268616d2d8904b56856acdc05cf61d3650380f539ad7d596ac0c";return(await Ei.query(i,s,{username:e},t)).data?.redditorInfoByName?.snoovatarIcon?.url}static getOverview(e,t){let i=u.redditAPIPlugins.Users;return new j({hasMore:!0,before:e.before,after:e.after,pageSize:e.pageSize,limit:e.limit,async fetch(s){let o=await i.UserWhere({username:e.username,where:"overview",...s},t);return YR(o,t)}})}};Ys=new WeakMap,Xi=new WeakMap,Qs=new WeakMap,eo=new WeakMap,to=new WeakMap,ro=new WeakMap,io=new WeakMap,zt=new WeakMap,no=new WeakMap,so=new WeakMap,mt=new WeakMap;var w=wr;function YR(r,e){if(!r.data?.children)throw new Error("Listing response is missing children");return{children:r.data.children.map(i=>{if(i.kind==="t3")return new z(i.data,e);if(i.kind==="t1")return new X(i.data,e);throw new Error(`Type ${i.kind} is not supported`)}),before:r.data.before,after:r.data.after}}async function QR(r,e,t){let i=u.redditAPIPlugins.Users;if(!r.data?.children)throw new Error("Listing response is missing children");let s=r.data.children.map(v=>(g(v.data?.id,"User id is still from listing data"),v.data.id)),o=100,a=[];for(let v=0;v<s.length;v+=o)a.push(s.slice(v,v+o));let p=(await Promise.all(a.map(v=>i.UserDataByAccountIds({ids:v.join(",")},t)))).reduce((v,m)=>({...v,...m.users}),{});return{children:r.data.children.map(v=>{let m=v.data?.id;g(m,"User id is missing from listing");let y=p[m];return g(y,"User data is missing from response"),new w({id:m,name:y.name,linkKarma:y.linkKarma,commentKarma:y.commentKarma,createdUtc:y.createdUtc,over18:y.profileOver18,snoovatarSize:[],modPermissions:{[e]:v.data?.modPermissions??[]}},t)}),before:r.data.before,after:r.data.after}}var Ar,oo,Zi,Yi,ao,lo,Qi,uo,co,en,Vt,xr,Jt,$t,pt,Tr,ft,mo,po,fo,go,ho,vo,yo,Y,tn,el,rn,tl,W=class W{constructor(e,t){l(this,Ar,void 0);l(this,oo,void 0);l(this,Zi,void 0);l(this,Yi,void 0);l(this,ao,void 0);l(this,lo,void 0);l(this,Qi,void 0);l(this,uo,void 0);l(this,co,void 0);l(this,en,void 0);l(this,Vt,void 0);l(this,xr,void 0);l(this,Jt,void 0);l(this,$t,void 0);l(this,pt,void 0);l(this,Tr,void 0);l(this,ft,void 0);l(this,mo,void 0);l(this,po,void 0);l(this,fo,void 0);l(this,go,void 0);l(this,ho,void 0);l(this,vo,void 0);l(this,yo,void 0);l(this,Y,void 0);var s;J(this),g(e.id,"Comment id is null or undefined"),g(e.body,"Comment body is null or undefined"),g(e.createdUtc,"Comment is missing created date"),g(e.author,"Comment author is null or undefined"),g(e.parentId,"Comment parentId is null or undefined"),g(e.linkId,"Comment linkId is null or undefined"),g(e.permalink,"Comment permalink is null or undefined"),g(e.subreddit,"Comment is missing subreddit name"),g(e.subredditId,"Comment is missing subreddit id"),d(this,Ar,zr(`t1_${e.id}`)),d(this,oo,e.authorFullname?te(e.authorFullname):void 0),d(this,Zi,e.author),d(this,Yi,e.body),d(this,uo,Re(e.subredditId)),d(this,co,e.subreddit),d(this,lo,yc(e.parentId)?zr(e.parentId):fe(e.parentId)),d(this,Qi,fe(e.linkId)),d(this,xr,e.edited??!1),d(this,Jt,e.locked??!1),d(this,$t,e.removed??!1),d(this,pt,e.stickied??!1),d(this,Vt,e.approved??!1),d(this,Tr,e.spam??!1),d(this,ft,e.distinguished),d(this,mo,e.numReports??0),d(this,po,e.collapsedBecauseCrowdControl??!1),d(this,fo,e.score??0),d(this,go,e.permalink),d(this,yo,new URL(e.permalink??"","https://www.reddit.com/").toString()),d(this,ho,(e.modReports??[]).map(([o])=>o)),d(this,vo,(e.userReports??[]).map(([o])=>o));let i=new Date(0);i.setUTCSeconds(e.createdUtc),d(this,ao,i),d(this,en,b(s=W,tn,el).call(s,{postId:n(this,Qi),commentId:n(this,Ar)},t)),d(this,Y,t)}get id(){return n(this,Ar)}get authorId(){return n(this,oo)}get authorName(){return n(this,Zi)}get subredditId(){return n(this,uo)}get subredditName(){return n(this,co)}get body(){return n(this,Yi)}get createdAt(){return n(this,ao)}get parentId(){return n(this,lo)}get postId(){return n(this,Qi)}get replies(){return n(this,en)}get distinguishedBy(){return n(this,ft)}get locked(){return n(this,Jt)}get stickied(){return n(this,pt)}get removed(){return n(this,$t)}get approved(){return n(this,Vt)}get spam(){return n(this,Tr)}get edited(){return n(this,xr)}get numReports(){return n(this,mo)}get collapsedBecauseCrowdControl(){return n(this,po)}get score(){return n(this,fo)}get permalink(){return n(this,go)}get userReportReasons(){return n(this,vo)}get modReportReasons(){return n(this,ho)}get url(){return n(this,yo)}toJSON(){return{id:this.id,authorName:this.authorName,subredditId:this.subredditId,subredditName:this.subredditName,body:this.body,createdAt:this.createdAt,parentId:this.parentId,postId:this.postId,replies:this.replies,approved:this.approved,locked:this.locked,removed:this.removed,stickied:this.stickied,spam:this.spam,edited:this.edited,distinguishedBy:this.distinguishedBy,numReports:this.numReports,collapsedBecauseCrowdControl:this.collapsedBecauseCrowdControl,score:this.score,permalink:this.permalink,modReportReasons:this.modReportReasons,userReportReasons:this.userReportReasons,url:this.url}}isLocked(){return n(this,Jt)}isApproved(){return n(this,Vt)}isRemoved(){return n(this,$t)}isSpam(){return n(this,Tr)}isStickied(){return n(this,pt)}isDistinguished(){return!!n(this,ft)}isEdited(){return n(this,xr)}async delete(){return W.delete(this.id,n(this,Y))}async edit(e){let t=await W.edit({id:this.id,...e},n(this,Y));return d(this,Yi,t.body),d(this,xr,t.edited),this}async approve(){await W.approve(this.id,n(this,Y)),d(this,Vt,!0),d(this,$t,!1)}async remove(e=!1){await W.remove(this.id,e,n(this,Y)),d(this,$t,!0),d(this,Tr,e),d(this,Vt,!1)}async lock(){await W.lock(this.id,n(this,Y)),d(this,Jt,!0)}async unlock(){await W.unlock(this.id,n(this,Y)),d(this,Jt,!1)}async reply(e){return W.submit({id:this.id,...e},n(this,Y))}async getAuthor(){return w.getByUsername(n(this,Zi),n(this,Y))}async distinguish(e=!1){let{distinguishedBy:t,stickied:i}=await W.distinguish(this.id,e,!1,n(this,Y));d(this,ft,t),d(this,pt,i)}async distinguishAsAdmin(e=!1){let{distinguishedBy:t,stickied:i}=await W.distinguish(this.id,e,!0,n(this,Y));d(this,ft,t),d(this,pt,i)}async undistinguish(){let{distinguishedBy:e,stickied:t}=await W.undistinguish(this.id,n(this,Y));d(this,ft,e),d(this,pt,t)}addRemovalNote(e){return Fe.addRemovalNote({itemIds:[n(this,Ar)],...e},n(this,Y))}static async getById(e,t){let i=u.redditAPIPlugins.LinksAndComments,s=kt(e)?e:`t1_${e}`,o=await i.Info({subreddits:[],thingIds:[s]},t);if(!o.data?.children?.[0]?.data)throw new Error("not found");return new W(o.data.children[0].data,t)}static getComments(e,t){var a;let{postId:i,commentId:s,...o}=e;return b(a=W,tn,el).call(a,{postId:fe(i),commentId:s?zr(s):void 0,...o},t)}static async edit(e,t){let i=u.redditAPIPlugins.LinksAndComments,{id:s}=e,o;"richtext"in e&&(o=Ai(e.richtext));let a=await i.EditUserText({thingId:s,text:"text"in e?e.text:"",richtextJson:o},t);if(a.json?.errors?.length)throw new Error("Failed to edit comment");let c=a.json?.data?.things?.[0]?.data;return g(c),new W(c,t)}static async delete(e,t){await u.redditAPIPlugins.LinksAndComments.Del({id:e},t)}static async approve(e,t){await u.redditAPIPlugins.Moderation.Approve({id:e},t)}static async remove(e,t=!1,i){await u.redditAPIPlugins.Moderation.Remove({id:e,spam:t},i)}static async lock(e,t){await u.redditAPIPlugins.LinksAndComments.Lock({id:e},t)}static async unlock(e,t){await u.redditAPIPlugins.LinksAndComments.Unlock({id:e},t)}static async submit(e,t){let i=u.redditAPIPlugins.LinksAndComments,{id:s}=e,o;"richtext"in e&&(o=Ai(e.richtext));let a=await i.Comment({thingId:s,text:"text"in e?e.text:"",richtextJson:o},t);if(a.json?.errors?.length)throw new Error("failed to reply to comment");let c=a.json?.data?.things?.[0]?.data;return g(c),new W(c,t)}static async distinguish(e,t,i,s){let c=(await u.redditAPIPlugins.Moderation.Distinguish({id:e,how:i?"admin":"yes",sticky:t},s)).json?.data?.things?.[0]?.data;return g(c),{distinguishedBy:c.distinguished,stickied:!!c.stickied}}static async undistinguish(e,t){let o=(await u.redditAPIPlugins.Moderation.Distinguish({id:e,how:"no",sticky:!1},t)).json?.data?.things?.[0]?.data;return g(o),{distinguishedBy:o.distinguished,stickied:!!o.stickied}}static getCommentsByUser(e,t){let i=u.redditAPIPlugins.Users;return new j({hasMore:!0,before:e.before,after:e.after,pageSize:e.pageSize,limit:e.limit,async fetch(s){let o=await i.UserWhere({username:e.username,where:"comments",...s},t);return g(o.data,"Failed to get comments for user"),{children:o.data.children?.map(c=>new W(c.data,t))||[],before:o.data.before,after:o.data.after}}})}};Ar=new WeakMap,oo=new WeakMap,Zi=new WeakMap,Yi=new WeakMap,ao=new WeakMap,lo=new WeakMap,Qi=new WeakMap,uo=new WeakMap,co=new WeakMap,en=new WeakMap,Vt=new WeakMap,xr=new WeakMap,Jt=new WeakMap,$t=new WeakMap,pt=new WeakMap,Tr=new WeakMap,ft=new WeakMap,mo=new WeakMap,po=new WeakMap,fo=new WeakMap,go=new WeakMap,ho=new WeakMap,vo=new WeakMap,yo=new WeakMap,Y=new WeakMap,tn=new WeakSet,el=function(e,t,i=0){return new j({limit:e.limit,pageSize:e.pageSize,fetch:async s=>{var y,k;let o=s.limit,a=u.redditAPIPlugins.Listings,c=u.redditAPIPlugins.LinksAndComments,p=e.commentId;if(s.more)if(s.more.children.length){let C=s.more;(!o||o>100)&&(o=100);let I=C.children.splice(0,o),A=await c.MoreChildren({linkId:e.postId,children:I,sort:e.sort},t);if(!A.json?.data?.things?.length)return{children:[]};let{children:U}=b(y=W,rn,tl).call(y,A.json.data.things,e.postId,e,t);return{children:U,more:C.children.length?C:void 0}}else p=s.more.parentId,i=i+s.more.depth;let v=(await a.Comments({article:e.postId.substring(3),comment:p?.substring(3),limit:o,depth:e.depth,sort:e.sort},t)).listings?.[1]?.data?.children??[],m=v[0];return p&&m?.data?.replyList?.data&&(v=m.data.replyList.data.children),b(k=W,rn,tl).call(k,v,p??e.postId,e,t,i)}})},rn=new WeakSet,tl=function(e,t,i,s,o=0){var f,v;let a=[],c,p={};for(let m of e){if(!m.data||(m.data.depth!=null&&(m.data.depth=m.data.depth+o),m.data.depth!=null&&i.depth!=null&&m.data.depth>=i.depth))continue;let y=m.data.parentId?p[m.data.parentId]:void 0;if(m.kind==="t1"){if(m.data.name===t)continue;let k=new W(m.data,s);if(p[k.id]=k,d(k,en,b(f=W,tn,el).call(f,{...i,postId:k.postId,commentId:k.id},s,o)),"replyList"in m.data&&m.data.replyList?.data){let{children:C,more:I}=b(v=W,rn,tl).call(v,m.data.replyList.data.children,k.id,i,s,o);C.length&&k.replies.children.push(...C),I&&k.replies.setMore(I)}k.replies.preventInitialFetch(),y?y.replies.children.push(k):a.push(k)}else if(m.kind==="more"&&m.data.parentId&&m.data.depth!=null){let k={parentId:yc(m.data.parentId)?zr(m.data.parentId):fe(m.data.parentId),children:m.data.children??[],depth:m.data.depth};y?y.replies.setMore(k):k.parentId===t&&(c=k)}}return{children:a,more:c}},l(W,tn),l(W,rn);var X=W;function ad(r,e){let t=u.redditAPIPlugins.Moderation;return new j({hasMore:!0,after:r.after,before:r.before,limit:r.limit,pageSize:r.pageSize,fetch:async i=>{let s=await t.AboutLog({subreddit:r.subredditName,mod:r.moderatorUsernames?r.moderatorUsernames.join(","):void 0,type:r.type,...i},e);return eO(s)}})}function eO(r){if(!r.data?.children)throw new Error("AboutLogResponse is missing children");return{children:r.data.children.map(t=>{if(!t.data)throw new Error("ModAction from AboutLogResponse is missing or invalid");let{id:i,mod:s,modId36:o,createdUtc:a,subreddit:c,subredditNamePrefixed:p,action:f,srId36:v,description:m,details:y,targetAuthor:k,targetBody:C,targetFullname:I,targetPermalink:A,targetTitle:U}=t.data;g(i,"ModAction from AboutLogResponse is missing id"),g(s,"ModAction from AboutLogResponse is missing mod"),g(o,"ModAction from AboutLogResponse is missing modId36"),g(a,"ModAction from AboutLogResponse is missing createdUtc"),g(c,"ModAction from AboutLogResponse is missing subreddit"),g(p,"ModAction from AboutLogResponse is missing subredditNamePrefixed"),g(f,"ModAction from AboutLogResponse is missing action"),g(v,"ModAction from AboutLogResponse is missing srId36");let ue=new Date(0);return ue.setUTCSeconds(a),{id:i,type:f,moderatorName:s,moderatorId:`t2_${o}`,createdAt:ue,subredditName:c,subredditId:`t5_${v}`,description:m,details:y,target:I?{id:I,author:k,body:C,permalink:A,title:U}:void 0}}),after:r.data.after,before:r.data.before}}var tO=(a=>(a.New="New",a.InProgress="InProgress",a.Archived="Archived",a.Appeals="Appeals",a.JoinRequests="JoinRequests",a.Filtered="Filtered",a))(tO||{}),rO={0:"New",1:"InProgress",2:"Archived",3:"Appeals",4:"JoinRequests",5:"Filtered"},iO=(k=>(k.Highlighted="Highlighted",k.Unhighlighted="Unhighlighted",k.Archived="Archived",k.Unarchived="Unarchived",k.ReportedToAdmins="ReportedToAdmins",k.Muted="Muted",k.Unmuted="Unmuted",k.Banned="Banned",k.Unbanned="Unbanned",k.Approved="Approved",k.Disapproved="Disapproved",k.Filtered="Filtered",k.Unfiltered="Unfiltered",k))(iO||{}),nO={0:"Highlighted",1:"Unhighlighted",2:"Archived",3:"Unarchived",4:"ReportedToAdmins",5:"Muted",6:"Unmuted",7:"Banned",8:"Unbanned",9:"Approved",10:"Disapproved",11:"Filtered",12:"Unfiltered"},G,Z,se,rl,Gk,il,zk,dd=class{constructor(e){l(this,Z);l(this,rl);l(this,il);l(this,G,void 0);d(this,G,e)}async bulkReadConversations(e,t){let i=u.redditAPIPlugins.NewModmail,{conversationIds:s}=await i.BulkReadConversations({entity:e.join(","),state:t},n(this,G));return s}async getConversations(e){let i=await u.redditAPIPlugins.NewModmail.GetConversations({after:e.after,entity:e.subreddits?e.subreddits.join(","):void 0,limit:e.limit,sort:e.sort,state:e.state},n(this,G)),s={};for(let o in i.conversations)s[o]=b(this,Z,se).call(this,{protoConversation:i.conversations[o],protoMessages:i.messages,protoModActions:{}});return{conversations:s,viewerId:i.viewerId}}async getConversation(e){let i=await u.redditAPIPlugins.NewModmail.GetConversation({...e,markRead:!!e.markRead},n(this,G));return{participantSubreddit:i.participantSubreddit,conversation:b(this,Z,se).call(this,{protoConversation:i.conversation,protoMessages:i.messages,protoModActions:i.modActions}),user:i.user}}async getSubreddits(){let e=u.redditAPIPlugins.NewModmail,{subreddits:t}=await e.Subreddits({},n(this,G));return t}async createConversation(e){let i=await u.redditAPIPlugins.NewModmail.CreateConversation({body:e.body,isAuthorHidden:e.isAuthorHidden??!1,srName:e.subredditName,subject:e.subject,to:e.to?e.to:void 0},n(this,G));return{conversation:b(this,Z,se).call(this,{protoConversation:i.conversation,protoMessages:i.messages,protoModActions:i.modActions}),user:i.user}}async reply(e){let i=await u.redditAPIPlugins.NewModmail.CreateConversationMessage({body:e.body,conversationId:e.conversationId,isAuthorHidden:e.isAuthorHidden??!1,isInternal:e.isInternal??!1},n(this,G));return{conversation:b(this,Z,se).call(this,{protoConversation:i.conversation,protoMessages:i.messages,protoModActions:{}}),user:i.user}}async highlightConversation(e){let i=await u.redditAPIPlugins.NewModmail.HighlightConversation({conversationId:e},n(this,G));return{conversation:b(this,Z,se).call(this,{protoConversation:i.conversation,protoMessages:i.messages,protoModActions:i.modActions})}}async unhighlightConversation(e){let i=await u.redditAPIPlugins.NewModmail.UnhighlightConversation({conversationId:e},n(this,G));return{conversation:b(this,Z,se).call(this,{protoConversation:i.conversation,protoMessages:i.messages,protoModActions:i.modActions})}}async archiveConversation(e){let i=await u.redditAPIPlugins.NewModmail.ArchiveConversation({conversationId:e},n(this,G));return{conversation:b(this,Z,se).call(this,{protoConversation:i.conversation,protoMessages:i.messages,protoModActions:i.modActions})}}async unarchiveConversation(e){let i=await u.redditAPIPlugins.NewModmail.UnarchiveConversation({conversationId:e},n(this,G));return{conversation:b(this,Z,se).call(this,{protoConversation:i.conversation,protoMessages:i.messages,protoModActions:i.modActions})}}async muteConversation(e){let i=await u.redditAPIPlugins.NewModmail.MuteConversation({conversationId:e.conversationId,numHours:e.numHours},n(this,G));return{conversation:b(this,Z,se).call(this,{protoConversation:i.conversations,protoMessages:i.messages,protoModActions:i.modActions}),user:i.user}}async unmuteConversation(e){let i=await u.redditAPIPlugins.NewModmail.UnmuteConversation({conversationId:e},n(this,G));return{conversation:b(this,Z,se).call(this,{protoConversation:i.conversations,protoMessages:i.messages,protoModActions:i.modActions}),user:i.user}}async readConversations(e){await u.redditAPIPlugins.NewModmail.Read({conversationIds:e.join(",")},n(this,G))}async unreadConversations(e){await u.redditAPIPlugins.NewModmail.Unread({conversationIds:e.join(",")},n(this,G))}async approveConversation(e){let i=await u.redditAPIPlugins.NewModmail.ApproveConversation({conversationId:e},n(this,G));return{conversation:b(this,Z,se).call(this,{protoConversation:i.conversations,protoMessages:i.messages,protoModActions:i.modActions}),user:i.user}}async disapproveConversation(e){let i=await u.redditAPIPlugins.NewModmail.DisapproveConversation({conversationId:e},n(this,G));return{conversation:b(this,Z,se).call(this,{protoConversation:i.conversations,protoMessages:i.messages,protoModActions:i.modActions}),user:i.user}}async tempBanConversation(e){let i=await u.redditAPIPlugins.NewModmail.TempBan({...e},n(this,G));return{conversation:b(this,Z,se).call(this,{protoConversation:i.conversations,protoMessages:i.messages,protoModActions:i.modActions}),user:i.user}}async unbanConversation(e){let i=await u.redditAPIPlugins.NewModmail.Unban({conversationId:e},n(this,G));return{conversation:b(this,Z,se).call(this,{protoConversation:i.conversations,protoMessages:i.messages,protoModActions:i.modActions}),user:i.user}}async getUnreadCount(){return await u.redditAPIPlugins.NewModmail.UnreadCount({},n(this,G))}async getUserConversations(e){return await u.redditAPIPlugins.NewModmail.UserConversations({conversationId:e},n(this,G))}};G=new WeakMap,Z=new WeakSet,se=function({protoConversation:e,protoMessages:t,protoModActions:i}){return{...e,state:rO[e.state],messages:b(this,rl,Gk).call(this,e,t),modActions:b(this,il,zk).call(this,e,i)}},rl=new WeakSet,Gk=function(e,t){let i={},s=e.objIds.filter(o=>o.key==="messages").map(({id:o})=>o);for(let o of s){let a=t[o];a&&(i[o]=a)}return i},il=new WeakSet,zk=function(e,t){let i={},s=e.objIds.filter(o=>o.key==="modActions").map(({id:o})=>o);for(let o of s){let a=t[o];a&&(i[o]={...a,actionType:nO[a.actionTypeId]})}return i};var nn,sn,nl,bo,ko,Po,So,Am=class Am{constructor(e,t){l(this,nn,void 0);l(this,sn,void 0);l(this,nl,void 0);l(this,bo,void 0);l(this,ko,void 0);l(this,Po,void 0);l(this,So,void 0);if(J(this),g(e.id,"PrivateMessage: Invalid data, no id"),g(e.name,"PrivateMessage: Invalid data, no name"),g(e.created,"PrivateMessage: Invalid data, no created date"),d(this,nn,ge(e.name)),e.author!=null)d(this,sn,{type:"user",username:e.author,id:e.authorFullname?te(e.authorFullname):void 0});else if(e.subreddit!=null)d(this,sn,{type:"subreddit",name:e.subreddit,id:e.subredditId?Re(e.subredditId):void 0});else throw new Error("PrivateMessage: Invalid data, no author or subreddit");d(this,bo,e.body??""),d(this,ko,e.bodyHtml??"");let i=new Date(0);i.setUTCSeconds(e.createdUtc),d(this,Po,i),d(this,nl,e.parentId?ge(e.parentId):void 0),d(this,So,t)}static async getMessages(e,t){let i=u.redditAPIPlugins.PrivateMessages;return new j({...e,fetch:async s=>{let o=await i.MessageWhere({...s,where:e.type??"inbox"},t);return{after:o.data?.after,before:o.data?.before,children:o.data?.children?.map(a=>new Am(a.data,t)).filter(Boolean)||[]}}})}static async send({to:e,subject:t,text:i},s){await u.redditAPIPlugins.PrivateMessages.Compose({to:e,subject:t,text:i,fromSr:""},s)}static async sendAsSubreddit({to:e,fromSubredditName:t,subject:i,text:s},o){await u.redditAPIPlugins.PrivateMessages.Compose({to:e,fromSr:t,subject:i,text:s},o)}static async markAllAsRead(e){await u.redditAPIPlugins.PrivateMessages.ReadAllMessages({filterTypes:""},e)}get id(){return n(this,nn)}get from(){return n(this,sn)}get body(){return n(this,bo)}get bodyHtml(){return n(this,ko)}get created(){return n(this,Po)}async markAsRead(){await u.redditAPIPlugins.PrivateMessages.ReadMessage({id:n(this,nn)},n(this,So))}};nn=new WeakMap,sn=new WeakMap,nl=new WeakMap,bo=new WeakMap,ko=new WeakMap,Po=new WeakMap,So=new WeakMap;var sr=Am;var qv=(o=>(o.Reports="reports",o.Spam="spam",o.Modqueue="modqueue",o.Unmoderated="unmoderated",o.Edited="edited",o))(qv||{}),on,x,Co,Io,wo,Ao,xo,To,Eo,Ro,Oo,an,T,tt=class tt{constructor(e,t){l(this,on,void 0);l(this,x,void 0);l(this,Co,void 0);l(this,Io,void 0);l(this,wo,void 0);l(this,Ao,void 0);l(this,xo,void 0);l(this,To,void 0);l(this,Eo,void 0);l(this,Ro,void 0);l(this,Oo,void 0);l(this,an,void 0);l(this,T,void 0);J(this),g(e.id,"Subreddit id is missing or undefined"),g(e.displayName,"Subreddit name is missing or undefined"),d(this,on,Re(`t5_${e.id}`)),d(this,x,e.displayName),g(e.createdUtc,"Subreddit is missing created date");let i=new Date(0);i.setUTCSeconds(e.createdUtc),d(this,Co,i),d(this,Io,sO(e.subredditType)),d(this,wo,e.title),d(this,Ao,e.description),g(e.lang,"Subreddit is missing language"),d(this,xo,e.lang),d(this,To,e.subscribers??0),d(this,Eo,e.activeUserCount??0),d(this,Ro,e.over18??!1),d(this,an,e.url??""),d(this,Oo,{acceptFollowers:e.acceptFollowers??!1,allOriginalContent:e.allOriginalContent??!1,allowChatPostCreation:e.allowChatPostCreation??!1,allowDiscovery:e.allowDiscovery??!1,allowGalleries:e.allowGalleries??!1,allowImages:e.allowImages??!1,allowPolls:e.allowPolls??!1,allowPredictionContributors:e.allowPredictionContributors??!1,allowPredictions:e.allowPredictions??!1,allowPredictionsTournament:e.allowPredictionsTournament??!1,allowTalks:e.allowTalks??!1,allowVideoGifs:e.allowVideogifs??!1,allowVideos:e.allowVideos??!1,chatPostEnabled:e.isChatPostFeatureEnabled??!1,collectionsEnabled:e.collectionsEnabled??!1,crosspostable:e.isCrosspostableSubreddit??!1,emojisEnabled:e.emojisEnabled??!1,eventPostsEnabled:e.eventPostsEnabled??!1,linkFlairEnabled:e.linkFlairEnabled??!1,originalContentTagEnabled:e.originalContentTagEnabled??!1,restrictCommenting:e.restrictCommenting??!1,restrictPosting:e.restrictPosting??!1,shouldArchivePosts:e.shouldArchivePosts??!1,spoilersEnabled:e.spoilersEnabled??!1,wikiEnabled:e.wikiEnabled??!1,allowedPostType:oO(e.submissionType),allowedMediaInComments:(e.allowedMediaInComments??[]).map(aO),bannerBackgroundColor:e.bannerBackgroundColor,bannerBackgroundImage:e.bannerBackgroundImage,bannerImage:e.bannerImg,communityIcon:e.communityIcon,headerTitle:e.headerTitle,mobileBannerImage:e.mobileBannerImage,userFlairs:{enabled:e.userFlairEnabledInSr??!1,usersCanAssign:e.canAssignUserFlair??!1},postFlairs:{enabled:e.linkFlairEnabled??!1,usersCanAssign:e.canAssignLinkFlair??!1},url:new URL(n(this,an),"https://www.reddit.com").toString()}),d(this,T,t)}get id(){return n(this,on)}get name(){return n(this,x)}get createdAt(){return n(this,Co)}get type(){return n(this,Io)}get title(){return n(this,wo)}get description(){return n(this,Ao)}get language(){return n(this,xo)}get numberOfSubscribers(){return n(this,To)}get numberOfActiveUsers(){return n(this,Eo)}get nsfw(){return n(this,Ro)}get settings(){return n(this,Oo)}get userFlairsEnabled(){return this.settings.userFlairs.enabled}get postFlairsEnabled(){return this.settings.postFlairs.enabled}get usersCanAssignUserFlairs(){return this.settings.userFlairs.usersCanAssign}get usersCanAssignPostFlairs(){return this.settings.postFlairs.usersCanAssign}get url(){return this.settings.url}get permalink(){return n(this,an)}toJSON(){return{id:this.id,name:this.name,createdAt:this.createdAt,type:this.type,title:this.title,description:this.description,language:this.language,nsfw:this.nsfw,numberOfSubscribers:this.numberOfSubscribers,numberOfActiveUsers:this.numberOfActiveUsers,settings:this.settings}}async submitPost(e){let t={...e,subredditName:n(this,x)};return z.submit(t,n(this,T))}getControversialPosts(e={}){if(!n(this,x))throw new Error("subreddit missing displayName - it might not have been fetched");return z.getControversialPosts({...e,subredditName:n(this,x)},n(this,T))}getTopPosts(e={}){if(!n(this,x))throw new Error("subreddit missing displayName - it might not have been fetched");return z.getTopPosts({...e,subredditName:n(this,x)},n(this,T))}getApprovedUsers(e={}){return w.getSubredditUsersByType({type:"contributors",subredditName:n(this,x),...e},n(this,T))}approveUser(e){return w.createRelationship({username:e,subredditName:n(this,x),type:"contributor"},n(this,T))}removeUser(e){return w.removeRelationship({username:e,subredditName:n(this,x),type:"contributor"},n(this,T))}getWikiContributors(e={}){return w.getSubredditUsersByType({type:"wikicontributors",subredditName:n(this,x),...e},n(this,T))}addWikiContributor(e){return w.createRelationship({username:e,subredditName:n(this,x),type:"wikicontributor"},n(this,T))}removeWikiContributor(e){return w.removeRelationship({username:e,subredditName:n(this,x),type:"wikicontributor"},n(this,T))}getBannedUsers(e={}){return w.getSubredditUsersByType({type:"banned",subredditName:n(this,x),...e},n(this,T))}banUser(e){return w.createRelationship({username:e.username,subredditName:n(this,x),type:"banned",banReason:e.reason,banMessage:e.message,note:e.note,duration:e.duration},n(this,T))}unbanUser(e){return w.removeRelationship({username:e,subredditName:n(this,x),type:"banned"},n(this,T))}getBannedWikiContributors(e={}){return w.getSubredditUsersByType({type:"wikibanned",subredditName:n(this,x),...e},n(this,T))}banWikiContributor(e){return w.createRelationship({username:e.username,subredditName:n(this,x),type:"wikibanned",banReason:e.reason,note:e.note,duration:e.duration},n(this,T))}unbanWikiContributor(e){return w.removeRelationship({username:e,subredditName:n(this,x),type:"wikibanned"},n(this,T))}getModerators(e={}){return w.getSubredditUsersByType({type:"moderators",subredditName:n(this,x),...e},n(this,T))}inviteModerator(e,t){return w.createRelationship({type:"moderator_invite",subredditName:n(this,x),username:e,permissions:t??[]},n(this,T))}revokeModeratorInvite(e){return w.removeRelationship({username:e,subredditName:n(this,x),type:"moderator_invite"},n(this,T))}removeModerator(e){return w.removeRelationship({type:"moderator",subredditName:n(this,x),username:e},n(this,T))}setModeratorPermissions(e,t){return w.setModeratorPermissions(e,n(this,x),t,n(this,T))}getMutedUsers(e={}){return w.getSubredditUsersByType({type:"muted",subredditName:n(this,x),...e},n(this,T))}muteUser(e,t){return w.createRelationship({username:e,subredditName:n(this,x),type:"muted",note:t},n(this,T))}unmuteUser(e){return w.removeRelationship({username:e,subredditName:n(this,x),type:"muted"},n(this,T))}getModerationLog(e){return ad({subredditName:n(this,x),...e},n(this,T))}getUserFlairTemplates(){return ae.getUserFlairTemplates(n(this,x),n(this,T))}getPostFlairTemplates(){return ae.getPostFlairTemplates(n(this,x),n(this,T))}createPostFlairTemplate(e){return ae.createPostFlairTemplate({subredditName:n(this,x),...e},n(this,T))}createUserFlairTemplate(e){return ae.createUserFlairTemplate({subredditName:n(this,x),...e},n(this,T))}async getUserFlair(e){if(e?.usernames!==void 0)return{users:await Promise.all(e.usernames.map(async i=>{let s=await Me.getUserFlairBySubreddit({subreddit:n(this,x),name:i},n(this,T));return Ls(s.users[0])}))};{let t=await Me.getUserFlairBySubreddit({...e,subreddit:n(this,x)},n(this,T));return{next:t.next,prev:t.prev,users:t.users.map(i=>Ls(i))}}}getModQueue(e={type:"all"}){return tt.aboutLocation({...e,location:"modqueue",subreddit:n(this,x)},n(this,T))}getReports(e={type:"all"}){return tt.aboutLocation({...e,location:"reports",subreddit:n(this,x)},n(this,T))}getSpam(e={type:"all"}){return tt.aboutLocation({...e,location:"spam",subreddit:n(this,x)},n(this,T))}getUnmoderated(e={type:"all"}){return tt.aboutLocation({...e,location:"unmoderated",subreddit:n(this,x)},n(this,T))}getEdited(e={type:"all"}){return tt.aboutLocation({...e,location:"edited",subreddit:n(this,x)},n(this,T))}static aboutLocation(e,t){let i=u.redditAPIPlugins.Moderation,s;switch(e.type){case"post":s="links";break;case"comment":s="comments";break;default:s=void 0}return new j({...e,fetch:async o=>{let a=await i.AboutLocation({...o,...e,only:s},t);return Vk(a,t)}})}getCommentsAndPostsByIds(e){let t=u.redditAPIPlugins.LinksAndComments;return new j({fetch:async()=>{let i=await t.Info({thingIds:e,subreddits:[n(this,on)]},n(this,T));return Vk(i,n(this,T))}})}static async addRemovalReason(e,t,i,s){return(await u.redditAPIPlugins.Subreddits.SubredditAddRemovalReason({title:t,message:i,subreddit:e},s)).id}static async getRemovalReasons(e,t){let s=await u.redditAPIPlugins.Subreddits.SubredditGetRemovalReasons({subreddit:e},t);return s.order.map(o=>({...s.data[o]}))}static async getFromMetadata(e){g(e);let t=e?.[B.Subreddit]?.values[0];return g(t),tt.getById(Re(t),e)}static async getById(e,t){let o=(await u.redditAPIPlugins.LinksAndComments.Info({thingIds:[e],subreddits:[]},t)).data?.children[0]?.data?.displayName;return g(o),tt.getByName(o,t)}static async getByName(e,t){let s=await u.redditAPIPlugins.Subreddits.SubredditAbout({subreddit:e},t);if(!s?.data)throw new Error("not found");return new tt(s.data,t)}};on=new WeakMap,x=new WeakMap,Co=new WeakMap,Io=new WeakMap,wo=new WeakMap,Ao=new WeakMap,xo=new WeakMap,To=new WeakMap,Eo=new WeakMap,Ro=new WeakMap,Oo=new WeakMap,an=new WeakMap,T=new WeakMap;var he=tt;function sO(r){if(r==="public"||r==="private"||r==="restricted"||r==="employees_only"||r==="gold_restricted"||r==="archived")return r;throw new Error(`invalid subreddit type: ${r}`)}function oO(r){if(r==="any"||r==="link"||r==="self")return r;throw new Error(`invalid allowed post type: ${r}`)}function aO(r){if(r==="animated"||r==="giphy"||r==="static"||r==="expression")return r;throw new Error(`invalid comment media type: ${r}`)}function Vk(r,e){let i=(r.data?.children??[]).map(a=>{let c=s(a);if(c!=null)return c;let p=o(a);return p??null}).filter(Boolean);return{after:r.data?.after,before:r.data?.before,children:i};function s(a){try{return new z(a.data,e)}catch{return null}}function o(a){try{return new X(a.data,e)}catch{return null}}}async function Hv(r,e){return Jk("GetVaultContactByAddress","3e2f7966a5c120e64fd2795d06a46595c52d988185be98d3ed71c3f81ae80d2e",{provider:"ethereum",address:r},e)}async function jv(r,e){return Jk("GetVaultContactByUserId","a854ddc19d0e22c4f36ed917fdbd568f299f3571427e393aee5e2972080fffe9",{provider:"ethereum",userId:r},e)}async function Jk(r,e,t,i){let o=(await Ei.query(r,e,t,i))?.data?.vault?.contact;return{provider:o?.provider,userId:te(o?.userId),address:o?.address,createdAt:o?.createdAt,isActive:o?.isActive}}import{CommunityListWidget_CommunityData as dO,GetWidgetsResponse_WidgetItem as le}from"@devvit/protos";var Fo,Mo,Uo,Bo,Tm=class Tm{constructor(e,t,i){l(this,Fo,void 0);l(this,Mo,void 0);l(this,Uo,void 0);l(this,Bo,void 0);J(this),d(this,Fo,e.id),d(this,Mo,e.shortName),d(this,Uo,t),d(this,Bo,i)}get id(){return n(this,Fo)}get name(){return n(this,Mo)}get subredditName(){return n(this,Uo)}toJSON(){return{id:this.id,name:this.name,subredditName:this.subredditName}}delete(){return Tm.delete(this.subredditName,this.id,n(this,Bo))}static async getWidgets(e,t){let s=await u.redditAPIPlugins.Widgets.GetWidgets({subreddit:e},t);g(s.layout,"Failed to load widgets for subreddit");let o=s.items,a=[];for(let c of s.layout.sidebar?.order??[]){let p=o[c];switch(p?.kind){case"image":a.push(new sl(p,e,t));break;case"calendar":a.push(new ol(p,e,t));break;case"textarea":a.push(new al(p,e,t));break;case"button":a.push(new dl(p,e,t));break;case"community-list":a.push(new ll(p,e,t));break;case"post-flair":a.push(new ul(p,e,t));break;case"custom":a.push(new cl(p,e,t));break;case"subreddit-rules":{let f=await u.redditAPIPlugins.Subreddits.SubredditAboutRules({subreddit:e},t);a.push(new xm(f,p,e,t));break}default:throw new Error(`Unknown widget type: ${p.kind}`)}}return a}static async delete(e,t,i){await u.redditAPIPlugins.Widgets.DeleteWidget({subreddit:e,id:t},i)}static async reorder(e,t,i){await u.redditAPIPlugins.Widgets.OrderWidgets({subreddit:e,order:t},i)}static async add(e,t){switch(e?.type){case"image":return sl.create(e,t);case"calendar":return ol.create(e,t);case"textarea":return al.create(e,t);case"button":return dl.create(e,t);case"community-list":return ll.create(e,t);case"post-flair":return ul.create(e,t);case"custom":return cl.create(e,t);default:throw new Error("Unknown widget type")}}};Fo=new WeakMap,Mo=new WeakMap,Uo=new WeakMap,Bo=new WeakMap;var re=Tm,Lo,ml=class ml extends re{constructor(t,i,s){super(t,i,s);l(this,Lo,void 0);d(this,Lo,t.data.map(o=>(g(o.url,"Image widget data is missing url"),g(o.height,"Image widget data is missing height"),g(o.width,"Image widget data is missing width"),g(o.linkUrl,"Image widget data is missing linkUrl"),{url:o.url,height:o.height,width:o.width,linkUrl:o.linkUrl})))}get images(){return n(this,Lo)}toJSON(){return{...super.toJSON(),images:this.images}}static async create(t,i){let o=await u.redditAPIPlugins.Widgets.AddImageWidget(t,i);return new ml(le.fromJSON(o),t.subreddit,i)}static async update(t,i){let o=await u.redditAPIPlugins.Widgets.UpdateImageWidget(t,i);return new ml(le.fromJSON(o),t.subreddit,i)}};Lo=new WeakMap;var sl=ml,Do,_o,No,pl=class pl extends re{constructor(t,i,s){super(t,i,s);l(this,Do,void 0);l(this,_o,void 0);l(this,No,void 0);g(t.googleCalendarId,"Calendar widget data is missing googleCalendarId"),g(t.configuration,"Calendar widget data is missing configuration"),g(t.styles,"Calendar widget data is missing styles"),d(this,Do,t.googleCalendarId),d(this,_o,t.configuration),d(this,No,t.styles)}get googleCalendarId(){return n(this,Do)}get configuration(){return n(this,_o)}get styles(){return n(this,No)}toJSON(){return{...super.toJSON(),googleCalendarId:this.googleCalendarId,configuration:this.configuration,styles:this.styles}}static async create(t,i){let o=await u.redditAPIPlugins.Widgets.AddCalendarWidget(t,i);return new pl(le.fromJSON(o),t.subreddit,i)}static async update(t,i){let o=await u.redditAPIPlugins.Widgets.UpdateCalendarWidget(t,i);return new pl(le.fromJSON(o),t.subreddit,i)}};Do=new WeakMap,_o=new WeakMap,No=new WeakMap;var ol=pl,qo,Ho,fl=class fl extends re{constructor(t,i,s){super(t,i,s);l(this,qo,void 0);l(this,Ho,void 0);g(t.text,"Textarea widget data is missing text"),g(t.styles,"Textarea widget data is missing styles"),d(this,qo,t.text),d(this,Ho,t.styles)}get text(){return n(this,qo)}get styles(){return n(this,Ho)}toJSON(){return{...super.toJSON(),text:this.text,styles:this.styles}}static async create(t,i){let o=await u.redditAPIPlugins.Widgets.AddTextAreaWidget(t,i);return new fl(le.fromJSON(o),t.subreddit,i)}static async update(t,i){let o=await u.redditAPIPlugins.Widgets.UpdateTextAreaWidget(t,i);return new fl(le.fromJSON(o),t.subreddit,i)}};qo=new WeakMap,Ho=new WeakMap;var al=fl,jo,Wo,Go,gl=class gl extends re{constructor(t,i,s){super(t,i,s);l(this,jo,void 0);l(this,Wo,void 0);l(this,Go,void 0);g(t.styles,"Button widget data is missing styles"),d(this,jo,t.buttons),d(this,Wo,t.description??""),d(this,Go,t.styles)}get buttons(){return n(this,jo)}get description(){return n(this,Wo)}get styles(){return n(this,Go)}toJSON(){return{...super.toJSON(),buttons:this.buttons,description:this.description,styles:this.styles}}static async create(t,i){let o=await u.redditAPIPlugins.Widgets.AddButtonWidget(t,i);return new gl(le.fromJSON(o),t.subreddit,i)}static async update(t,i){let o=await u.redditAPIPlugins.Widgets.UpdateButtonWidget(t,i);return new gl(le.fromJSON(o),t.subreddit,i)}};jo=new WeakMap,Wo=new WeakMap,Go=new WeakMap;var dl=gl,zo,Vo,hl=class hl extends re{constructor(t,i,s){super(t,i,s);l(this,zo,void 0);l(this,Vo,void 0);d(this,zo,t.data.map(o=>dO.fromJSON(o))),g(t.styles,"Community list widget data is missing styles"),d(this,Vo,t.styles)}get communities(){return n(this,zo)}get styles(){return n(this,Vo)}toJSON(){return{...super.toJSON(),communities:this.communities,styles:this.styles}}static async create(t,i){let o=await u.redditAPIPlugins.Widgets.AddCommunityListWidget(t,i);return new hl(le.fromJSON(o),t.subreddit,i)}static async update(t,i){let o=await u.redditAPIPlugins.Widgets.UpdateCommunityListWidget(t,i);return new hl(le.fromJSON(o),t.subreddit,i)}};zo=new WeakMap,Vo=new WeakMap;var ll=hl,Jo,$o,Ko,vl=class vl extends re{constructor(t,i,s){super(t,i,s);l(this,Jo,void 0);l(this,$o,void 0);l(this,Ko,void 0);if(g(t.styles,"Post flair widget data is missing styles"),d(this,Jo,t.styles),d(this,$o,t.order.map(o=>t.templates[o])),!(t.display&&t.display==="list"||t.display==="cloud"))throw new Error("Post flair widget data is missing display type");d(this,Ko,t.display)}get styles(){return n(this,Jo)}get templates(){return n(this,$o)}get display(){return n(this,Ko)}toJSON(){return{...super.toJSON(),styles:this.styles,templates:this.templates,display:this.display}}static async create(t,i){let o=await u.redditAPIPlugins.Widgets.AddPostFlairWidget(t,i);return new vl(le.fromJSON(o),t.subreddit,i)}static async update(t,i){let o=await u.redditAPIPlugins.Widgets.UpdatePostFlairWidget(t,i);return new vl(le.fromJSON(o),t.subreddit,i)}};Jo=new WeakMap,$o=new WeakMap,Ko=new WeakMap;var ul=vl,Xo,Zo,Yo,Qo,ea,yl=class yl extends re{constructor(t,i,s){super(t,i,s);l(this,Xo,void 0);l(this,Zo,void 0);l(this,Yo,void 0);l(this,Qo,void 0);l(this,ea,void 0);g(t.stylesheetUrl,"Custom widget data is missing stylesheetUrl"),g(t.height,"Custom widget data is missing height"),g(t.css,"Custom widget data is missing css"),d(this,Xo,t.imageData??[]),d(this,Zo,t.text??""),d(this,Yo,t.stylesheetUrl),d(this,Qo,t.height),d(this,ea,t.css)}get images(){return n(this,Xo)}get text(){return n(this,Zo)}get stylesheetUrl(){return n(this,Yo)}get height(){return n(this,Qo)}get css(){return n(this,ea)}toJSON(){return{...super.toJSON(),images:this.images,text:this.text,stylesheetUrl:this.stylesheetUrl,height:this.height,css:this.css}}static async create(t,i){let o=await u.redditAPIPlugins.Widgets.AddCustomWidget(t,i);return new yl(le.fromJSON(o),t.subreddit,i)}static async update(t,i){let o=await u.redditAPIPlugins.Widgets.UpdateCustomWidget(t,i);return new yl(le.fromJSON(o),t.subreddit,i)}};Xo=new WeakMap,Zo=new WeakMap,Yo=new WeakMap,Qo=new WeakMap,ea=new WeakMap;var cl=yl,ta,xm=class extends re{constructor(t,i,s,o){super(i,s,o);l(this,ta,void 0);let a=t.rules.map(({description:c,priority:p,shortName:f,violationReason:v})=>(g(c,"Subreddit rule is missing description"),g(p,"Subreddit rule is missing priority"),g(f,"Subreddit rule is missing shortName"),g(v,"Subreddit rule is missing violationReason"),{description:c,priority:p,shortName:f,violationReason:v}));d(this,ta,a)}get rules(){return n(this,ta)}toJSON(){return{...super.toJSON(),rules:this.rules}}};ta=new WeakMap;var lO=(i=>(i[i.SUBREDDIT_PERMISSIONS=0]="SUBREDDIT_PERMISSIONS",i[i.APPROVED_CONTRIBUTORS_ONLY=1]="APPROVED_CONTRIBUTORS_ONLY",i[i.MODS_ONLY=2]="MODS_ONLY",i))(lO||{}),ke,Pe,dn,ln,un,cn,mn,$e,Ne=class Ne{constructor(e,t,i,s){l(this,ke,void 0);l(this,Pe,void 0);l(this,dn,void 0);l(this,ln,void 0);l(this,un,void 0);l(this,cn,void 0);l(this,mn,void 0);l(this,$e,void 0);J(this),d(this,ke,e),d(this,Pe,t),d(this,dn,i.contentMd),d(this,ln,i.revisionId),d(this,un,new Date(i.revisionDate)),d(this,cn,i.reason??""),g(i.revisionBy?.data,"Wiki page author details are missing"),d(this,mn,new w(i.revisionBy.data,s)),d(this,$e,s)}get name(){return n(this,ke)}get subredditName(){return n(this,Pe)}get content(){return n(this,dn)}get revisionId(){return n(this,ln)}get revisionDate(){return n(this,un)}get revisionReason(){return n(this,cn)}get revisionAuthor(){return n(this,mn)}toJSON(){return{name:n(this,ke),subredditName:n(this,Pe),content:n(this,dn),revisionId:n(this,ln),revisionDate:n(this,un),revisionReason:n(this,cn),revisionAuthor:n(this,mn).toJSON()}}async update(e,t){return Ne.updatePage({subredditName:n(this,Pe),page:n(this,ke),content:e,reason:t},n(this,$e))}async getRevisions(e){return Ne.getPageRevisions({subredditName:n(this,Pe),page:n(this,ke),...e},n(this,$e))}async revertTo(e){return Ne.revertPage(n(this,Pe),n(this,ke),e,n(this,$e))}async getSettings(){return Ne.getPageSettings(n(this,Pe),n(this,ke),n(this,$e))}async updateSettings(e){return Ne.updatePageSettings({subredditName:n(this,Pe),page:n(this,ke),listed:e.listed,permLevel:e.permLevel},n(this,$e))}async addEditor(e){return Ne.addEditor(n(this,Pe),n(this,ke),e,n(this,$e))}async removeEditor(e){return Ne.removeEditor(n(this,Pe),n(this,ke),e,n(this,$e))}static async getPage(e,t,i){let o=await u.redditAPIPlugins.Wiki.GetWikiPage({subreddit:e,page:t},i);return g(o.data,"Failed to get wiki page"),new Ne(t,e,o.data,i)}static async getPages(e,t){return(await u.redditAPIPlugins.Wiki.GetWikiPages({subreddit:e},t)).data||[]}static async createPage(e,t){return Ne.updatePage(e,t)}static async updatePage(e,t){return await u.redditAPIPlugins.Wiki.EditWikiPage({subreddit:e.subredditName,page:e.page,content:e.content,reason:e.reason??""},t),Ne.getPage(e.subredditName,e.page,t)}static getPageRevisions(e,t){let i=u.redditAPIPlugins.Wiki;return new j({hasMore:!0,after:e.after,limit:e.limit,pageSize:e.pageSize,async fetch(s){let o=await i.GetWikiPageRevisions({subreddit:e.subredditName,page:e.page,limit:s.limit,after:s.after,before:s.before},t);return uO(o,t)}})}static async revertPage(e,t,i,s){await u.redditAPIPlugins.Wiki.RevertWikiPage({subreddit:e,page:t,revision:i},s)}static async getPageSettings(e,t,i){let o=await u.redditAPIPlugins.Wiki.GetWikiPageSettings({subreddit:e,page:t},i);return g(o.data,"Failed to get wiki page settings"),new bl(o.data,i)}static async updatePageSettings(e,t){let s=await u.redditAPIPlugins.Wiki.UpdateWikiPageSettings({subreddit:e.subredditName,page:e.page,listed:e.listed?"on":"",permlevel:e.permLevel},t);return g(s.data,"Failed to update wiki page settings"),new bl(s.data,t)}static async addEditor(e,t,i,s){await u.redditAPIPlugins.Wiki.AllowEditor({act:"add",subreddit:e,page:t,username:i},s)}static async removeEditor(e,t,i,s){await u.redditAPIPlugins.Wiki.AllowEditor({act:"del",subreddit:e,page:t,username:i},s)}};ke=new WeakMap,Pe=new WeakMap,dn=new WeakMap,ln=new WeakMap,un=new WeakMap,cn=new WeakMap,mn=new WeakMap,$e=new WeakMap;var ve=Ne,pn,fn,gn,hn,vn,yn,Em=class{constructor(e,t){l(this,pn,void 0);l(this,fn,void 0);l(this,gn,void 0);l(this,hn,void 0);l(this,vn,void 0);l(this,yn,void 0);d(this,pn,e.id),d(this,fn,e.page),d(this,gn,new Date(e.timestamp)),g(e.author?.data,"Wiki page revision author details are missing"),d(this,hn,new w(e.author.data,t)),d(this,vn,e.reason??""),d(this,yn,e.revisionHidden??!1)}get id(){return n(this,pn)}get page(){return n(this,fn)}get date(){return n(this,gn)}get author(){return n(this,hn)}get reason(){return n(this,vn)}get hidden(){return n(this,yn)}toJSON(){return{id:n(this,pn),page:n(this,fn),date:n(this,gn),author:n(this,hn).toJSON(),reason:n(this,vn),hidden:n(this,yn)}}};pn=new WeakMap,fn=new WeakMap,gn=new WeakMap,hn=new WeakMap,vn=new WeakMap,yn=new WeakMap;var bn,kn,Pn,bl=class{constructor(e,t){l(this,bn,void 0);l(this,kn,void 0);l(this,Pn,void 0);d(this,bn,e.listed),d(this,kn,e.permLevel),d(this,Pn,e.editors.map(i=>(g(i.data,"Wiki page editor details are missing"),new w(i.data,t))))}get listed(){return n(this,bn)}get permLevel(){return n(this,kn)}get editors(){return n(this,Pn)}toJSON(){return{listed:n(this,bn),permLevel:n(this,kn),editors:n(this,Pn).map(e=>e.toJSON())}}};bn=new WeakMap,kn=new WeakMap,Pn=new WeakMap;function uO(r,e){return g(r.data?.children,"Wiki page revision listing is missing children"),{children:r.data.children.map(i=>new Em(i,e)),before:r.data.before,after:r.data.after}}var cO=(t=>(t.Gallery="GALLERY",t.Timeline="TIMELINE",t))(cO||{});function mO(r){return r==="GALLERY"?"GALLERY":"TIMELINE"}var qe,Se,ia,Sn,Cn,na,sa,oa,aa,gt,da,la,In,ra=class ra{constructor(e,t){l(this,qe,void 0);l(this,Se,void 0);l(this,ia,void 0);l(this,Sn,void 0);l(this,Cn,void 0);l(this,na,void 0);l(this,sa,void 0);l(this,oa,void 0);l(this,aa,void 0);l(this,gt,void 0);l(this,da,void 0);l(this,la,void 0);l(this,In,void 0);g(e.collectionId,"Collection Id is missing or undefined"),g(e.subredditId,"Subreddit Id is missing or undefined"),g(e.title,"Collection title is missing or undefined"),g(e.authorId,"Collection author's id is missing or undefined"),g(e.authorName,"Collection author's id is missing or undefined"),g(e.createdAtUtc,"Collection create timestamp is missing"),g(e.lastUpdateUtc,"Collection last updated timestamp is missing"),d(this,qe,t),d(this,Se,e.collectionId),d(this,ia,e.subredditId),d(this,Sn,e.title),d(this,Cn,e.description||""),d(this,na,e.authorId),d(this,sa,e.authorName),d(this,oa,e.permalink),d(this,aa,e.primaryLinkId),d(this,gt,e.linkIds||[]),d(this,In,mO(e.displayLayout)),d(this,da,e.createdAtUtc),d(this,la,e.lastUpdateUtc),J(this)}get id(){return n(this,Se)}get subredditId(){return n(this,ia)}get title(){return n(this,Sn)}get description(){return n(this,Cn)}get authorId(){return n(this,na)}get authorName(){return n(this,sa)}get permalink(){return n(this,oa)}get primaryLinkId(){return n(this,aa)}get linkIds(){return n(this,gt)}get createdAtUtc(){return n(this,da)}get lastUpdateUtc(){return n(this,la)}get displayLayout(){return n(this,In)}static async getCollectionById(e,t){let s=await u.redditAPIPlugins.PostCollections.Collection(e,t);return new ra(s,t)}static async create(e,t){let s=await u.redditAPIPlugins.PostCollections.Create({srFullname:e.subredditId,title:e.title,description:e.description,displayLayout:e.displayLayout},t);return new ra(s,t)}static async getCollectionsForSubreddit(e,t){return(await u.redditapiv2Plugin.GetSubredditCollections({srFullname:e.subredditId},t)).collections.map(s=>new ra(s,t))}async addPost(e){await u.redditAPIPlugins.PostCollections.AddPost({collectionId:n(this,Se),linkFullname:e},n(this,qe)),n(this,gt).push(e)}async removePost(e){await u.redditAPIPlugins.PostCollections.RemovePost({collectionId:n(this,Se),linkFullname:e},n(this,qe)),d(this,gt,n(this,gt).filter(i=>i!==e))}async delete(){await u.redditAPIPlugins.PostCollections.Delete({collectionId:n(this,Se)},n(this,qe))}async follow(e){await u.redditAPIPlugins.PostCollections.Follow({collectionId:n(this,Se),follow:e},n(this,qe))}async reorder(e){await u.redditAPIPlugins.PostCollections.Reorder({collectionId:n(this,Se),linkIds:e.join(",")},n(this,qe)),d(this,gt,e)}async updateTitle(e){await u.redditAPIPlugins.PostCollections.UpdateTitle({collectionId:n(this,Se),title:e},n(this,qe)),d(this,Sn,e)}async updateDescription(e){await u.redditAPIPlugins.PostCollections.UpdateDescription({collectionId:n(this,Se),description:e},n(this,qe)),d(this,Cn,e)}async updateLayout(e){await u.redditAPIPlugins.PostCollections.UpdateDisplayLayout({collectionId:n(this,Se),displayLayout:e},n(this,qe)),d(this,In,e)}};qe=new WeakMap,Se=new WeakMap,ia=new WeakMap,Sn=new WeakMap,Cn=new WeakMap,na=new WeakMap,sa=new WeakMap,oa=new WeakMap,aa=new WeakMap,gt=new WeakMap,da=new WeakMap,la=new WeakMap,In=new WeakMap;var Zr=ra;var pO=["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"],fO=["border-image","border-image-source","behavior","expression","list-style-image","cursor","content"],gO=["onload","onerror","onclick","onmouseover"];function hO(r){return/xmlns=["']http:\/\/www\.w3\.org\/2000\/svg["']/.test(r)?r:r.replace(/<svg\b/,'<svg xmlns="http://www.w3.org/2000/svg"')}function $k(r){if(r){if(!r.trim().startsWith("<svg")){console.log("The provided string is not a valid SVG.");return}try{let e=new RegExp(`<\\s*(${pO.join("|")})\\b`,"gi"),t=new RegExp(`(${fO.join("|")})\\s*:\\s*url\\s*\\((['"]?)(.*?)\\2\\)`,"gi"),i=new RegExp(`(${gO.join("|")})\\s*(=\\s*(['"]?)(.*?)\\3)?`,"gi");r=r.trim().replace(/\s+/g," "),r=hO(r);let s=r.match(e)||[],o=r.match(t)||[],a=r.match(i)||[],c=!1;return s.length>0&&(c=!0,console.warn(`Disallowed elements detected in SVG: ${s.map(p=>p.replace("<","")).join(", ")}`)),o.length>0&&(c=!0,console.warn(`Disallowed styles detected in SVG: ${o.map(p=>p.split(":")[0]).join(", ")}`)),a.length>0&&(c=!0,console.warn(`Disallowed attributes detected in SVG: ${a.map(p=>p.split("=")[0]).join(", ")}`)),c?void 0:r}catch{return}}}function Gq(r,...e){let t="";return r.forEach((i,s)=>{t+=i;let o=e[s];o!==void 0&&(t+=`${o}`)}),t=$k(t),t===void 0?"":`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(t)}`}var Kk="ServerCallRequired";var Xk=Rr(Dd(),1);var rt,ht,ua,wn,ca,Er,ma,Rm=class{constructor(e,t,i){l(this,rt,void 0);l(this,ht,void 0);l(this,ua,void 0);l(this,wn,void 0);l(this,ca,void 0);l(this,Er,void 0);l(this,ma,void 0);d(this,rt,!!i.context.devvitContext.debug.useAsync),n(this,rt)&&console.debug("[useAsync] v1",t),this.state={data:null,loading:!1,error:null,depends:null},d(this,ht,i.hookId),d(this,ua,e),d(this,wn,i.invalidate),d(this,ca,i.context),d(this,Er,t.depends??null),d(this,ma,t.enabled??!0)}onStateLoaded(){if(n(this,ma)&&(n(this,rt)&&console.debug("[useAsync] async onLoad ",n(this,ht),this.state),n(this,rt)&&console.debug("[useAsync] async onLoad have ",n(this,Er),"and",this.state.depends),!(0,Xk.default)(n(this,Er),this.state.depends)||this.state.data===null&&this.state.error===null&&this.state.loading===!1)){this.state.loading=!0,this.state.depends=n(this,Er),n(this,wn).call(this);let e={hook:n(this,ht),async:!0,asyncRequest:{requestId:n(this,ht)+"-"+JSON.stringify(this.state.depends)}};n(this,rt)&&console.debug("[useAsync] onLoad requeue"),n(this,ca).addToRequeueEvents(e)}}async onUIEvent(e,t){if(e.asyncRequest){let i={requestId:e.asyncRequest.requestId};try{i.data={value:await n(this,ua).call(this)}}catch(o){if(o instanceof Error){if(o.message===Kk)throw o;i.error={message:o.message,details:o.stack??""}}else i.error={message:"Unknown error",details:String(o)}}let s={asyncResponse:i,hook:n(this,ht)};n(this,rt)&&console.debug("[useAsync] onReq requeue"),t.addToRequeueEvents(s)}else if(e.asyncResponse){let i=n(this,ht)+"-"+JSON.stringify(this.state.depends);if(e.asyncResponse.requestId===i){let s={data:e.asyncResponse.data?.value,loading:!1,error:e.asyncResponse.error??null};this.state={...this.state,...s},n(this,wn).call(this)}else n(this,rt)&&console.debug("[useAsync] onResp skip, stale event")}else throw new Error("Unknown event type")}};rt=new WeakMap,ht=new WeakMap,ua=new WeakMap,wn=new WeakMap,ca=new WeakMap,Er=new WeakMap,ma=new WeakMap;function vO(r,e={}){return De({namespace:"useAsync"},i=>new Rm(r,e,i)).state}export{_M as ALL_ICON_NAMES,qv as AboutLocations,dl as ButtonWidget,ol as CalendarWidget,cO as CollectionDisplayLayout,X as Comment,ll as CommunityListWidget,cl as CustomWidget,u as Devvit,Me as Flair,ae as FlairTemplate,qR as FlairType,Pt as Hook,sl as ImageWidget,j as Listing,iO as ModMailActionType,tO as ModMailConversationState,dd as ModMailService,Fe as ModNote,z as Post,Zr as PostCollection,ul as PostFlairWidget,sr as PrivateMessage,Fs as RichTextBuilder,bc as SettingScope,he as Subreddit,xm as SubredditRulesWidget,al as TextAreaWidget,w as User,re as Widget,ve as WikiPage,lO as WikiPagePermissionLevel,Em as WikiPageRevision,bl as WikiPageSettings,Ls as convertUserFlairProtoToAPI,ad as getModerationLog,Hv as getVaultByAddress,jv as getVaultByUserId,Gq as svg,vO as useAsync,ER as useAsyncState,nm as useForm,lm as useInterval,cm as useState};
/*! Bundled license information:

shallow-clone/index.js:
  (*!
   * shallow-clone <https://github.com/jonschlinkert/shallow-clone>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

isobject/index.js:
  (*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-plain-object/index.js:
  (*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)
*/
//# sourceMappingURL=public-api.min.js.map
